
<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
<title>Simulador Eleitoral Global</title>
<style>
:root{ --bg:#c0c0c0; --primary:#000080; --green:#00ff00; --red:#ff0000; --gold:#ffcc00; --paper:#f4f1ea; }
*{ box-sizing:border-box; }
body{ font-family:"MS Sans Serif", Arial; background:#008080; margin:0; display:flex; justify-content:center; align-items:flex-start; min-height:100vh; overflow-x:hidden; }
#game-container{ width:100%; max-width:1200px; background:var(--bg); border:2px solid white; padding:4px; box-shadow:4px 4px black; }
.title-bar{ background:var(--primary); color:white; padding:4px 10px; font-weight:bold; display:flex; justify-content:space-between; align-items:center; }
.screen{ display:none; } .active{ display:block; }
.btn{ padding:6px; border:2px solid; border-color:white black black white; background:var(--bg); cursor:pointer; font-weight:bold; font-size:11px; width: 100%; margin-bottom: 5px; touch-action:manipulation; }
.btn:active{ border-color:black white white black; }
.btn:disabled{ color: #888; cursor: default; background: #aaa; }
.grid-main{ display:grid; grid-template-columns:250px 1fr 280px; gap:10px; height:550px; margin-top:10px; }
.card{ background:white; border:2px inset #888; padding:8px; overflow-y:auto; }
.polling-table{ width:100%; border-collapse:collapse; }
.polling-table td, .polling-table th{ border:1px solid #444; padding:4px; font-size:11px; }
.player-row{ background:#ffffaa; font-weight:bold; }
.brazil-map{ position:relative; width:100%; height:400px; background:#004d00; border: 2px inset gray; overflow: hidden; }
.state-node{ position:absolute; width:22px; height:16px; background:#eee; border:1px solid black; font-size:9px; display:flex; align-items:center; justify-content:center; cursor:pointer; font-weight: bold; color: white; text-shadow: 1px 1px 1px black; }
#terminal-log{ background:black; color:lime; height:90px; font-family: 'Courier New', monospace; font-size:11px; overflow-y:auto; padding:8px; border: 2px inset #444; margin-top:5px; }
#modal-overlay{ display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.7); z-index:1000; justify-content:center; align-items:center; padding:10px; }
.modal{ background:var(--bg); padding:15px; border:2px outset white; width:400px; max-width:95vw; max-height:90vh; overflow-y:auto; box-shadow: 5px 5px 0 black; }
.party-tag { font-size: 9px; padding: 2px 4px; background: #eee; border: 1px solid #999; margin: 2px; display: inline-block; color: black; text-shadow: none; }
.tab-btn { width: 23%; display: inline-block; margin-bottom: 10px; font-size: 9px; }
#tab-jornal { background: var(--paper); padding: 10px; border: 1px solid #dcd7c9; }
.news-header { font-family: "Times New Roman", serif; text-align: center; border-bottom: 2px solid black; margin-bottom: 10px; }
.news-header h1 { margin: 0; font-size: 24px; text-transform: uppercase; letter-spacing: -1px; }
.news-entry { font-family: "Times New Roman", serif; border-bottom: 1px solid #ccc; padding: 8px 0; color: #222; }
.news-entry b { display: block; font-size: 14px; line-height: 1.1; margin-bottom: 3px; }
.region-card { background: #f0f0f0; border: 1px solid #999; padding: 5px; margin-bottom: 5px; font-size: 11px; }
.newspaper-wrap { background: var(--paper); padding: 20px; border: 1px solid #999; text-align: left; line-height: 1.4; color: #111; }
.ideology-bar { display:flex; align-items:center; gap:4px; font-size:10px; margin:2px 0; }
.ideology-bar label { width:60px; text-align:right; font-size:9px; }
.ideology-track { width:80px; height:8px; background:#ddd; border:1px solid #999; position:relative; }
.ideology-fill { height:100%; position:absolute; }
.scandal-bar { height:8px; background:linear-gradient(to right, #ff0, #f00); border:1px solid #999; margin-top:2px; }
.momentum-badge { background:var(--gold); border:1px solid #888; padding:1px 4px; font-size:9px; font-weight:bold; display:inline-block; }
#chart-container { background:black; color:lime; padding:5px; border:2px inset #444; margin-top:5px; }
#poll-chart { width:100%; height:120px; }
.congress-bar { display:flex; height:20px; width:100%; margin-top:5px; overflow:hidden; border:1px solid #888; }
.congress-segment { height:100%; display:flex; align-items:center; justify-content:center; font-size:9px; font-weight:bold; color:white; text-shadow:1px 1px black; }
.approval-row { font-size:10px; display:flex; gap:4px; align-items:center; }
.approve-fill { background:#00aa00; height:6px; }
.reject-fill { background:#cc0000; height:6px; }
.mini-bar { width:60px; height:6px; background:#ddd; border:1px solid #999; overflow:hidden; display:inline-block; vertical-align:middle; }
#ranking-screen .rank-item { font-family:'Times New Roman'; font-size:14px; margin:5px 0; }
.fatigue-bar { height:8px; background:linear-gradient(to right,#4caf50,#ff9800,#f44336); border:1px solid #999; margin:3px 0; position:relative; }
.fatigue-pointer { position:absolute; top:-2px; width:3px; height:12px; background:#000080; }
.scenario-card { background:white; border:2px inset #888; padding:10px; text-align:center; cursor:pointer; transition:background 0.1s; }
.scenario-card:hover { background:#ffffcc; }
.scenario-card.locked { background:#ddd; cursor:not-allowed; color:#999; }
.scenario-card.indirect { background:#f5e8e8; cursor:pointer; border:2px inset #aa4444; }
.scenario-card.indirect:hover { background:#ffe0e0; }
.scenario-card h3 { margin:5px 0; font-size:13px; }
.scenario-card .year { font-size:20px; font-weight:bold; color:#000080; }
.scenario-card .desc { font-size:10px; color:#555; margin-top:4px; }
.pivot-badge { background:var(--gold); color:#000; font-size:8px; padding:1px 3px; border:1px solid #888; }
.action-card { background:#f9f9f9; border:1px solid #ccc; padding:6px; margin-bottom:4px; font-size:11px; }
.debate-option { background:#e8f4e8; border:1px solid #999; padding:5px; margin:3px 0; cursor:pointer; font-size:11px; }
.debate-option:hover { background:#d0ecd0; }
/* INDIRECT ELECTION STYLES */
.hemicycle-container { background:#1a1a2e; border:2px inset #444; padding:10px; margin:5px 0; border-radius:4px; }
.hemicycle-canvas { display:block; margin:0 auto; }
.deputy-dot { display:inline-block; border-radius:50%; margin:1px; }
.vote-counter { font-family:'Courier New',monospace; font-size:13px; background:#000; color:#0f0; padding:5px 10px; border:1px solid #333; display:inline-block; margin:3px; }
.indirect-action { background:#2a1a0a; color:#f4d03f; border:2px solid #8b6914; padding:8px; margin:3px 0; cursor:pointer; font-size:11px; font-weight:bold; display:block; width:100%; text-align:left; }
.indirect-action:hover { background:#3a2a1a; }
.faction-bar { height:16px; display:flex; width:100%; border:1px solid #666; overflow:hidden; margin:3px 0; border-radius:2px; }
.faction-seg { height:100%; display:flex; align-items:center; justify-content:center; font-size:8px; color:white; font-weight:bold; text-shadow:1px 1px black; }
/* MOBILE RESPONSIVE */
@media (max-width: 768px) {
  body { align-items:flex-start; }
  .grid-main { grid-template-columns:1fr !important; height:auto !important; }
  .grid-main .card:nth-child(2) { display:none; }
  #game-container { border:none; box-shadow:none; }
  .modal { width:95vw !important; }
  .scenario-card .year { font-size:16px; }
  .scenario-card h3 { font-size:11px; }
  #scenario-list { grid-template-columns:repeat(2,1fr) !important; }
  .tab-btn { width:48%; font-size:8px; }
  .grid-main .card { min-height:200px; }
  .brazil-map { height:250px !important; }
  #indirect-grid { grid-template-columns:1fr !important; }
  #indirect-grid .card:nth-child(3) { display:none; }
}
@media (max-width: 480px) {
  #scenario-list { grid-template-columns:1fr !important; }
  .tab-btn { width:48%; }
}
</style>
</head>
<body>

<div id="game-container">
    <div class="title-bar">
        <span>üåé SIMULADOR ELEITORAL GLOBAL</span>
        <div style="display:flex;gap:8px;align-items:center">
            <span style="font-size:10px;cursor:pointer;opacity:0.8" onclick="showChangelog()">üìã v9</span>
            <span onclick="location.reload()" style="cursor:pointer">[X]</span>
        </div>
    </div>

    <!-- TELA DE SELE√á√ÉO DE CEN√ÅRIO -->
    <div id="scenario-screen" class="screen active">
        <h2 style="text-align:center;margin:8px 0">üåé SIMULADOR ELEITORAL GLOBAL</h2>
        <div style="display:flex;justify-content:center;gap:4px;padding:6px;background:#d4d0c8;border-bottom:2px inset #888;flex-wrap:wrap;">
            <button class="btn" id="tab-btn-pres" style="width:auto;padding:5px 14px;background:#000080;color:white;font-size:11px" onclick="switchScenarioTab('pres')">üèõÔ∏è PRESIDENCIAIS BR</button>
            <button class="btn" id="tab-btn-gov" style="width:auto;padding:5px 14px;font-size:11px" onclick="switchScenarioTab('gov')">üó∫Ô∏è GOVERNADORES</button>
            <button class="btn" id="tab-btn-mun" style="width:auto;padding:5px 14px;font-size:11px" onclick="switchScenarioTab('mun')">üèôÔ∏è MUNICIPAIS</button>
            <button class="btn" id="tab-btn-ind" style="width:auto;padding:5px 14px;font-size:11px" onclick="switchScenarioTab('ind')">‚öôÔ∏è INDIRETAS</button>
            <button class="btn" id="tab-btn-pais" style="width:auto;padding:5px 14px;font-size:11px" onclick="switchScenarioTab('pais')">üåç PA√çSES</button>
            <button class="btn" id="tab-btn-conq" style="width:auto;padding:5px 14px;font-size:11px" onclick="switchScenarioTab('conq')">üèÜ CONQUISTAS</button>
        </div>
        <div style="padding:8px;max-height:460px;overflow-y:auto;" id="scenario-list"></div>
        <div style="text-align:center;padding:5px;font-size:10px;color:#666;display:flex;gap:5px;justify-content:center;flex-wrap:wrap;">
            <button class="btn" style="width:auto;background:#d4d0c8;font-size:10px" onclick="showPlannedContent()">üìã Planejado</button>
            <button class="btn" style="width:auto;background:#d4d0c8;font-size:10px" onclick="showChangelog()">üìù Changelog</button>
        </div>
    </div>

    <!-- TELA DE ELEI√á√ÉO INDIRETA -->
    <div id="indirect-screen" class="screen">
        <div id="indirect-title" style="background:#1a1a2e;color:#f4d03f;padding:8px;text-align:center;font-weight:bold;font-size:14px;border-bottom:2px solid #8b6914;display:flex;justify-content:space-between;align-items:center;">
            <button onclick="goToScenarios()" style="background:#8b6914;color:white;border:1px solid #aa8822;padding:3px 8px;cursor:pointer;font-size:10px">‚Üê Voltar</button>
            <span id="indirect-title-text">üèõÔ∏è COL√âGIO ELEITORAL ‚Äî 1934</span>
            <span style="font-size:10px;opacity:0.7">Sistema Indiret–æ</span>
        </div>
        <div style="display:grid;grid-template-columns:260px 1fr 260px;gap:8px;padding:8px;min-height:500px;" id="indirect-grid">
            <!-- Coluna Esquerda: A√ß√µes -->
            <div class="card" style="background:#1a1a0a;color:#f4d03f;border-color:#8b6914;">
                <b style="color:#f4d03f">‚öôÔ∏è A√á√ïES POL√çTICAS</b><hr style="border-color:#8b6914">
                <div style="font-size:10px;color:#aaa;margin-bottom:8px">Rodada: <span id="ind-turn">1</span>/10 | Influ√™ncia: <span id="ind-points" style="color:#f4d03f">5</span>p</div>
                <div id="indirect-actions"></div>
                <hr style="border-color:#8b6914">
                <button class="btn" style="background:#8b6914;color:white;margin-top:5px" onclick="indirectNextTurn()">‚è© AVAN√áAR RODADA</button>
                <button class="btn" style="background:#333366;color:white;margin-top:3px;font-size:10px" onclick="indirectAutoSimulate()">‚è©‚è© SIMULAR TUDO</button>
                <label style="font-size:10px;color:#f4d03f;display:block;margin-top:4px">
                    <input type="checkbox" id="indirect-spectator" onchange="indirectSpectatorMode=this.checked"> Modo Espectador
                </label>
                <div id="indirect-log" style="background:#000;color:#0f0;font-family:'Courier New';font-size:10px;height:80px;overflow-y:auto;padding:5px;margin-top:5px;border:1px solid #333;"></div>
            </div>
            <!-- Coluna Central: Hemiciclo + Placar -->
            <div class="card" style="background:#0d0d1a;padding:5px;">
                <div style="text-align:center;color:#f4d03f;font-size:11px;font-weight:bold;margin-bottom:5px">INTEN√á√ïES DE VOTO NO CONGRESSO</div>
                <canvas id="hemicycle-canvas" width="380" height="200" style="display:block;margin:0 auto;background:#1a1a2e;border-radius:4px;max-width:100%;"></canvas>
                <div id="indirect-scoreboard" style="margin-top:8px;"></div>
                <div style="color:#888;font-size:9px;text-align:center;margin-top:5px" id="indirect-context"></div>
            </div>
            <!-- Coluna Direita: Fac√ß√µes -->
            <div class="card" style="background:#0a0a1a;color:#ccc;border-color:#333;">
                <b style="color:#f4d03f">üèõÔ∏è FAC√á√ïES DO CONGRESSO</b><hr style="border-color:#444">
                <div id="faction-list"></div>
                <hr style="border-color:#444">
                <div style="font-size:10px;color:#888">
                    <b style="color:#f4d03f">üì∞ DI√ÅRIO OFICIAL</b>
                    <div id="indirect-news" style="height:120px;overflow-y:auto;font-size:10px;"></div>
                </div>
            </div>
        </div>
    </div>

    <div id="setup-screen" class="screen">
        <div id="setup-title" style="text-align:center"><h2 style="margin:5px 0">ELEI√á√ïES 1994: SIMULADOR</h2></div>
        <div style="display:grid; grid-template-columns: 1fr 1fr; gap: 15px; padding: 10px;">
            <div class="card">
                <b>CANDIDATOS REAIS</b><hr>
                <div id="setup-candidates" style="display:grid;grid-template-columns:1fr 1fr;gap:5px;"></div>
            </div>
            <div class="card" style="background:#d4d0c8">
                <b>CRIAR PERSONAGEM (OPCIONAL)</b><hr>
                <input type="text" id="custom-name" placeholder="Nome do Candidato" style="width:90%"><br><br>
                <label>Partido:</label>
                <select id="custom-party" style="width:100%">
                    <option value="PV">PV (Ambientalista - E)</option>
                    <option value="PSC">PSC (Conservador - D)</option>
                    <option value="PRTB">PRTB (Nacionalista - D)</option>
                    <option value="PSTU">PSTU (Radical - E)</option>
                </select><br><br>
                <button class="btn" style="background:var(--gold)" onclick="startCustomGame()">JOGAR COM MEU PERSONAGEM</button>
                <button class="btn" style="margin-top:5px" onclick="goToScenarios()">‚Üê Voltar</button>
            </div>
        </div>
        <div class="card" style="margin: 10px; text-align: center;">
            <b>DIFICULDADE:</b> 
            <select id="difficulty-level">
                <option value="1">F√°cil</option>
                <option value="2" selected>Normal</option>
                <option value="3">Dif√≠cil</option>
            </select>
            &nbsp;&nbsp;&nbsp;
            <b>MODO:</b>
            <select id="game-mode">
                <option value="historico">Hist√≥rico</option>
                <option value="caotico">Ca√≥tico üî•</option>
            </select>
        </div>
    </div>

    <div id="game-screen" class="screen">
        <div style="display:flex;justify-content:space-between;background:#d4d0c8;border:2px inset white;padding:6px;font-weight:bold">
            <span id="fase-label">1¬∫ TURNO</span>
            <span>DIA: <span id="turn-display">1</span>/<span id="turn-max-display">15</span></span>
            <span style="color:navy">PONTOS: <span id="points-display">2</span>p</span>
            <span style="color:darkgreen">VERBA: R$ <span id="money-display">0</span>M</span>
            <span style="color:#8b0000">‚ö° <span id="energy-display">100</span>%</span>
        </div>

        <div class="grid-main">
            <div class="card" style="background:var(--bg)">
                <button class="btn tab-btn" onclick="showTab('campanha')">A√á√ïES</button>
                <button class="btn tab-btn" onclick="showTab('regioes')">REGIOES</button>
                <button class="btn tab-btn" onclick="showTab('jornal')">JORNAL</button>
                <button class="btn tab-btn" onclick="showTab('opcoes')">‚öôÔ∏è OP√á√ïES</button>
                
                <div id="tab-campanha">
                    <div style="font-size:10px;margin-bottom:4px"><b>ENERGIA:</b> <span id="fatigue-label">100%</span>
                    <div class="fatigue-bar"><div class="fatigue-pointer" id="fatigue-ptr" style="left:0%"></div></div></div>
                    <b>M√çDIA & COMUNICA√á√ÉO</b>
                    <button class="btn" onclick="actionTV()">üì∫ Hor√°rio Eleitoral Nacional (6p, R$12M)</button>
                    <button class="btn" onclick="actionRadio()">üìª Inser√ß√µes de R√°dio (3p, R$6M)</button>
                    <button class="btn" onclick="actionEntrevista()">üéôÔ∏è Entrevista em Rede (4p)</button>
                    <b>FINANCEIRO</b>
                    <button class="btn" onclick="actionCaixaEmpresarial()">üè≠ Arrecadar: Empres√°rios (2p, risco)</button>
                    <button class="btn" onclick="actionCaixaSindical()">‚öíÔ∏è Arrecadar: Sindicatos (2p, esq)</button>
                    <button class="btn" onclick="actionCaixaPopular()">üèòÔ∏è Arrecadar: Vaquinha Popular (1p)</button>
                    <b>ESTRAT√âGIA</b>
                    <button class="btn" id="btn-alliance" onclick="openAllianceMenu()">ü§ù Negociar Alian√ßas (4p)</button>
                    <button class="btn" style="background:#ffe0e0" onclick="actionInvestigar()">üîç Investigar Rival (4p)</button>
                    <button class="btn" style="background:#e0ffe0" onclick="actionAbafar()">ü§´ Abafar Esc√¢ndalo (R$15M)</button>
                    <button class="btn" onclick="actionDescansar()">üò¥ Descansar / Recuperar Energia (1p)</button>
                    <button class="btn" style="background:#eee" onclick="showTab('estrategia')">‚öîÔ∏è Ataque & Apoio</button>
                </div>

                <div id="tab-estrategia" style="display:none">
                    <button class="btn" onclick="showTab('campanha')"><- Voltar</button>
                    <b>ATAQUE & APOIO</b><hr>
                    <div id="adversary-list"></div>
                </div>

                <div id="tab-regioes" style="display:none">
                    <b>L√çDERES POR REGI√ÉO</b><hr>
                    <div id="region-list"></div>
                </div>


                <div id="tab-jornal" style="display:none">
                    <div class="news-header">
                        <h1>Folha de S. Pol√≠tica</h1>
                        <small>EDI√á√ÉO NACIONAL - <span id="news-date">OUTUBRO 1994</span></small>
                    </div>
                    <div id="news-feed"></div>
                </div>

                <div id="tab-opcoes" style="display:none">
                    <b>‚öôÔ∏è OP√á√ïES DE JOGO</b><hr>
                    <div style="background:#ffffcc;border:1px solid #999;padding:8px;margin-bottom:8px;">
                        <b>üé≠ MODO ESPECTADOR</b><br>
                        <small style="color:#555">Desativa eventos e avan√ßa turnos sem intera√ß√£o.</small><br><br>
                        <label style="font-size:12px">
                            <input type="checkbox" id="spectator-mode" onchange="toggleSpectatorMode(this.checked)"> 
                            Ativar Modo Espectador
                        </label>
                    </div>
                    <div style="background:#e8f4e8;border:1px solid #999;padding:8px;margin-bottom:8px;">
                        <b>üì∞ VISIBILIDADE DE EVENTOS</b><br>
                        <label style="font-size:12px"><input type="checkbox" id="hide-hist-events" checked> Exibir eventos hist√≥ricos</label><br>
                        <label style="font-size:12px"><input type="checkbox" id="hide-rand-events" checked> Exibir eventos aleat√≥rios</label><br>
                        <label style="font-size:12px"><input type="checkbox" id="hide-debates" checked> Exibir debates ao vivo</label>
                    </div>
                    <div style="background:#e8e8ff;border:1px solid #999;padding:8px;">
                        <b>üöÄ AVAN√áO AUTOM√ÅTICO</b><br>
                        <small>Simula todos os turnos restantes instantaneamente.</small><br><br>
                        <button class="btn" style="background:#000080;color:white" onclick="autoSimulateAll()">‚è© Simular Restante</button>
                    </div>
                </div>

                <div id="terminal-log"></div>
                <button class="btn" style="background:var(--gold); margin-top:10px" onclick="nextTurn()">ENCERRAR DIA</button>
                <div style="margin-top:5px; font-size:10px"><b>SUA COLIGA√á√ÉO:</b><br><div id="my-coalition"></div></div>
            </div>

            <div class="card" style="padding:0">
                <div class="brazil-map" id="map-container"></div>
                <div id="state-details" style="padding:8px;background:#eee;border-top:2px solid #888;font-size:12px; height: 130px;">
                    Selecione um estado no mapa.
                </div>
            </div>

            <div class="card">
                <b>PESQUISA NACIONAL</b> <button class="btn" style="width:auto;font-size:9px;padding:2px 5px;float:right" onclick="showChart()">üìä GR√ÅFICO</button><hr>
                <table class="polling-table" id="polling-body"></table>
                <div id="approval-section" style="margin-top:8px;font-size:10px;"><b>APROVA√á√ÉO / REJEI√á√ÉO</b><div id="approval-bars"></div></div>
            </div>
        </div>
    </div>

    <div id="end-screen" class="screen">
        <div class="card" style="padding:20px; text-align:center; background: #999;">
            <div class="newspaper-wrap">
                <div class="news-header">
                    <h1 id="result-title">BRASIL TEM NOVO PRESIDENTE</h1>
                    <small>EDI√á√ÉO EXTRA - BRAS√çLIA, 1994</small>
                </div>
                <div id="result-desc" style="font-family:'Times New Roman'; font-size:16px; margin: 20px 0;"></div>
                <hr>
                <div id="candidate-bio" style="font-family:'Times New Roman'; font-size:14px; text-align: justify;"></div>
            </div>
            <br>
            <button class="btn" style="width:200px" onclick="location.reload()">REINICIAR SIMULA√á√ÉO</button>
        </div>
        <div class="card" style="margin-top:10px; padding:15px;" id="congress-section">
            <b>üèõÔ∏è COMPOSI√á√ÉO DO CONGRESSO</b><hr>
            <div id="congress-bars"></div>
            <div id="congress-gov" style="margin-top:8px; font-size:12px;"></div>
        </div>
        <div class="card" style="margin-top:10px; padding:15px;" id="ranking-section">
            <b>üèÜ AVALIA√á√ÉO FINAL</b><hr>
            <div id="ranking-content"></div>
        </div>
</div>

<!-- GR√ÅFICO TEMPORAL MODAL -->
<div id="chart-modal" style="display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.85);z-index:2000;justify-content:center;align-items:center;">
    <div style="background:#111;border:2px solid lime;padding:15px;width:700px;max-width:95vw;">
        <div style="display:flex;justify-content:space-between;color:lime;margin-bottom:10px;">
            <b>üìä HIST√ìRICO DE PESQUISAS - EVOLU√á√ÉO</b>
            <span onclick="document.getElementById('chart-modal').style.display='none'" style="cursor:pointer;color:#f00">[X]</span>
        </div>
        <canvas id="poll-chart" width="660" height="200" style="background:#000;border:1px solid #333;display:block;"></canvas>
        <div id="chart-legend" style="margin-top:8px;font-size:10px;color:#aaa;display:flex;gap:10px;flex-wrap:wrap;"></div>
    </div>
</div>

<div id="modal-overlay">
    <div class="modal">
        <h3 id="modal-title" style="margin-top:0"></h3>
        <div id="modal-text" style="font-size:12px; margin-bottom:10px"></div>
        <div id="modal-buttons"></div>
    </div>
</div>

<script>
const allStates = [
    {id:'AC', n:'Acre', x:5, y:35, p:1, r:'Norte', econ:-1, soc:0, nat:1}, {id:'AL', n:'Alagoas', x:92, y:40, p:2, r:'Nordeste', econ:-2, soc:1, nat:0}, {id:'AP', n:'Amap√°', x:55, y:5, p:1, r:'Norte', econ:0, soc:0, nat:1},
    {id:'AM', n:'Amazonas', x:20, y:20, p:4, r:'Norte', econ:-1, soc:0, nat:1}, {id:'BA', n:'Bahia', x:78, y:48, p:8, r:'Nordeste', econ:-2, soc:1, nat:0}, {id:'CE', n:'Cear√°', x:82, y:22, p:5, r:'Nordeste', econ:-1, soc:1, nat:0},
    {id:'DF', n:'Dist. Federal', x:58, y:50, p:2, r:'Centro-Oeste', econ:1, soc:0, nat:0}, {id:'ES', n:'Esp. Santo', x:75, y:65, p:2, r:'Sudeste', econ:1, soc:-1, nat:0}, {id:'GO', n:'Goi√°s', x:52, y:52, p:4, r:'Centro-Oeste', econ:1, soc:-1, nat:1},
    {id:'MA', n:'Maranh√£o', x:70, y:22, p:3, r:'Nordeste', econ:-2, soc:1, nat:0}, {id:'MT', n:'Mato Grosso', x:40, y:45, p:3, r:'Centro-Oeste', econ:1, soc:-2, nat:1}, {id:'MS', n:'Mato G. Sul', x:42, y:65, p:2, r:'Centro-Oeste', econ:1, soc:-1, nat:1},
    {id:'MG', n:'Minas Gerais', x:65, y:60, p:11, r:'Sudeste', econ:0, soc:0, nat:0}, {id:'PA', n:'Par√°', x:48, y:22, p:5, r:'Norte', econ:-1, soc:0, nat:1}, {id:'PB', n:'Para√≠ba', x:90, y:28, p:2, r:'Nordeste', econ:-1, soc:1, nat:0},
    {id:'PR', n:'Paran√°', x:50, y:75, p:6, r:'Sul', econ:1, soc:-1, nat:0}, {id:'PE', n:'Pernambuco', x:88, y:33, p:5, r:'Nordeste', econ:-1, soc:2, nat:0}, {id:'PI', n:'Piau√≠', x:75, y:30, p:2, r:'Nordeste', econ:-2, soc:1, nat:0},
    {id:'RJ', n:'Rio de Janeiro', x:72, y:72, p:9, r:'Sudeste', econ:0, soc:1, nat:0}, {id:'RN', n:'Rio G. Norte', x:90, y:20, p:2, r:'Nordeste', econ:-1, soc:1, nat:0}, {id:'RS', n:'Rio G. do Sul', x:45, y:88, p:7, r:'Sul', econ:0, soc:-1, nat:-1},
    {id:'RO', n:'Rond√¥nia', x:25, y:45, p:1, r:'Norte', econ:0, soc:-1, nat:1}, {id:'RR', n:'Roraima', x:25, y:5, p:1, r:'Norte', econ:0, soc:-1, nat:1}, {id:'SC', n:'S. Catarina', x:52, y:82, p:4, r:'Sul', econ:1, soc:-2, nat:0},
    {id:'SP', n:'S√£o Paulo', x:58, y:72, p:23, r:'Sudeste', econ:2, soc:0, nat:-1}, {id:'SE', n:'Sergipe', x:88, y:45, p:1, r:'Nordeste', econ:-1, soc:1, nat:0}, {id:'TO', n:'Tocantins', x:58, y:35, p:1, r:'Norte', econ:-1, soc:0, nat:1}
];

const newsArchive = [
    {t: "Economia", d: "Mercado reage com otimismo √†s novas pesquisas eleitorais."},
    {t: "Greve", d: "Metal√∫rgicos do ABC anunciam paralisa√ß√£o de 48 horas."},
    {t: "Copa 94", d: "Brasil celebra o Tetra enquanto elei√ß√£o esquenta."},
    {t: "Infla√ß√£o", d: "√çndices de pre√ßos mostram estabilidade recorde."},
    {t: "Den√∫ncia", d: "Dossi√™ contra candidato agita Bras√≠lia."},
    {t: "Mundo", d: "Crise do Peso no M√©xico preocupa exportadores brasileiros."},
    {t: "Cultura", d: "Novela das 8 bate recordes de audi√™ncia no pa√≠s."},
    {t: "Infraestrutura", d: "Obras em rodovias federais s√£o aceleradas no Nordeste."},
    {t: "Educa√ß√£o", d: "√çndice de analfabetismo cai em regi√µes Norte e Nordeste."},
    {t: "Sa√∫de P√∫blica", d: "Governo anuncia campanha de vacina√ß√£o emergencial."},
    {t: "Seca no NE", d: "Secas afetam agricultores do semi√°rido; candidatos prometem cisternas."},
    {t: "Desemprego", d: "Taxa de desocupa√ß√£o sobe ao patamar mais alto em anos."},
    {t: "Seguran√ßa", d: "√çndices de viol√™ncia urbana dominam debate p√∫blico nas capitais."},
    {t: "Agricultura", d: "Produtores rurais reclamam de custo do cr√©dito agr√≠cola."},
    {t: "Redes Sociais", d: "Candidatos investem em influencers para atingir eleitorado jovem."},
    {t: "Pesquisa CNT", d: "Nova pesquisa confirma empate t√©cnico entre os dois primeiros colocados."},
    {t: "Energia", d: "Pre√ßo da gasolina sobe e vira tema central das campanhas."},
    {t: "Igreja", d: "Lideran√ßas religiosas dividem apoios; voto evang√©lico √© disputado."},
    {t: "Corrup√ß√£o", d: "Relat√≥rio da CGU aponta irregularidades em contratos p√∫blicos."},
    {t: "Jovens", d: "Primeira vez nas urnas: 2 milh√µes de jovens se alistam eleitores."},
    {t: "Internacional", d: "Elei√ß√£o brasileira √© acompanhada com aten√ß√£o pelo mercado externo."},
    {t: "Fake News", d: "Checadores de fatos trabalham em ritmo acelerado na reta final."},
    {t: "Debate Regional", d: "Candidatos debatem quest√µes regionais em emissoras do interior."},
    {t: "Meteorologia", d: "Desastre clim√°tico move pauta ambiental para o centro do debate."},
    {t: "STF", d: "Decis√£o do Supremo agita o cen√°rio eleitoral e divide opini√µes."},
    {t: "C√¢mara", d: "Congresso aprova medida que afeta diretamente as campanhas."},
    {t: "Esc√¢ndalo", d: "Grava√ß√£o vazada exp√µe conversa comprometedora de assessor."},
    {t: "Mil√≠cias", d: "Relat√≥rio aponta influ√™ncia de grupos paramilitares em elei√ß√µes municipais."},
    {t: "Exporta√ß√µes", d: "Balan√ßa comercial favor√°vel sustenta discurso econ√¥mico do governo."},
    {t: "TSE", d: "Tribunal Superior Eleitoral determina remo√ß√£o de pe√ßas publicit√°rias falsas."}
];

// Eventos hist√≥ricos reais por cen√°rio
const historicalEvents = {
    "1945": [
        {turn:2, t:"FIM DO ESTADO NOVO", d:"Get√∫lio Vargas √© deposto. A ditadura acaba. O Brasil vai √†s urnas pela primeira vez desde 1930. O povo mal sabe como votar. Candidatos precisam explicar a democracia.", b:[{n:"√änfase na liberdade democr√°tica", f:()=>{ updateNationalVotes(game.player,2); game.approvals[game.player].app+=5; }},{n:"Criticar o legado varguista", f:()=>{ updateNationalVotes(game.player, game.player==='dutra'?-1:2.5); }}]},
        {turn:4, t:"VARGAS LAN√áA O PTB", d:"Embora deposto, Vargas lan√ßa o PTB e apoia o General Dutra. O trabalhismo vira for√ßa eleitoral. Candidatos precisam se posicionar sobre o legado getulista.", b:[{n:"Endossar o legado trabalhista", f:()=>{ updateNationalVotes(game.player, game.player==='dutra'?2:0.5); game.approvals[game.player].app+=3; }},{n:"Opor-se: 'Queremos democracia pura'", f:()=>{ updateNationalVotes(game.player, game.player==='brigadeiro'?2.5:1); }}]},
        {turn:6, t:"SEGUNDA GUERRA TERMINA", d:"Com a vit√≥ria aliada, a FEB (For√ßa Expedicion√°ria Brasileira) volta do front. Soldados s√£o vistos como her√≥is. O General Dutra, ex-ministro da Guerra, se beneficia da aura militar.", b:[{n:"Homenagear a FEB", f:()=>{ updateNationalVotes(game.player, game.player==='dutra'?2.5:1.5); game.approvals[game.player].app+=4; }},{n:"Focar no retorno √† vida civil", f:()=>{ updateNationalVotes(game.player,1.5); game.money+=5; }}]},
        {turn:8, t:"CAMPANHA EM VIAS RURAIS", d:"O Brasil √© majoritariamente rural. Coron√©is controlam o voto de fazendeiros e trabalhadores rurais. Quem conquista os coron√©is do Nordeste e do interior de MG e SP, conquista a elei√ß√£o.", b:[{n:"Negociar com coron√©is (R$10M)", f:()=>{ if(game.money>=10){game.money-=10; updateNationalVotes(game.player,3); }}},{n:"Discurso modernizador para as cidades", f:()=>{ updateNationalVotes(game.player, game.player==='brigadeiro'?2:1.5); game.approvals[game.player].app+=3; }}]},
        {turn:10, t:"DEBATE SOBRE RELA√á√ïES COM EUA", d:"Fim da Segunda Guerra. O Brasil precisa decidir seu alinhamento geopol√≠tico. Os EUA pressionam por alinhamento anticomunista. Como voc√™ se posiciona?", b:[{n:"Alinhamento com os EUA", f:()=>{ updateNationalVotes(game.player,2); game.money+=10; }},{n:"Independ√™ncia nacional soberana", f:()=>{ updateNationalVotes(game.player, game.player==='yedo'?2.5:1.5); game.approvals[game.player].app+=3; }}]},
    ],
    "1950": [
        {turn:2, t:"VARGAS VOLTA ‚Äî 'EU VOLTO'", d:"Get√∫lio Vargas, deposto em 1945, retorna candidato. Seu slogan 'Eu Volto' ressoa com os trabalhadores urbanos. Como voc√™ responde ao maior pol√≠tico do s√©culo XX?", b:[{n:"Atacar Vargas como o ditador", f:()=>{ updateNationalVotes(game.player, game.player!=='getuliopr'?2.5:0); }},{n:"Propor alternativa modernizadora", f:()=>{ updateNationalVotes(game.player,2); game.approvals[game.player].app+=4; }},{n:"Tentar captar o voto trabalhista", f:()=>{ updateNationalVotes(game.player, game.player==='gomes50'?1:2); }}]},
        {turn:4, t:"PESO DO TRABALHISMO URBANO", d:"As cidades crescem. Industri√°rios, ferrovi√°rios, servidores p√∫blicos. Get√∫lio fala direto a eles pela r√°dio. O r√°dio √© a internet da √©poca ‚Äî quem domina o r√°dio, domina a elei√ß√£o.", b:[{n:"Investir pesado no r√°dio (R$15M)", f:()=>{ if(game.money>=15){game.money-=15; updateNationalVotes(game.player,3.5); }}},{n:"M√≠tings e com√≠cios populares", f:()=>{ updateNationalVotes(game.player,2); spendEnergy(15); }}]},
        {turn:6, t:"ACUSA√á√ïES DE DEMAGOGO", d:"A UDN e a imprensa acusam Vargas de demagogo e de tentar ressuscitar o Estado Novo. A classe m√©dia de SP e RJ reage mal ao varguismo. Como voc√™ capitaliza?", b:[{n:"Explorar o medo da ditadura", f:()=>{ updateNationalVotes(game.player, game.player!=='getuliopr'?2.5:-1); }},{n:"Defender que o trabalhismo √© democr√°tico", f:()=>{ updateNationalVotes(game.player, game.player==='getuliopr'?2:1); game.approvals[game.player].app+=3; }}]},
        {turn:9, t:"NORDESTE E S√ÉO FRANCISCO", d:"As secas do Nordeste voltam √† pauta. Get√∫lio promete a CHESF (hidrel√©trica de Paulo Afonso). A promessa de luz el√©trica para o NE √© um divisor de √°guas.", b:[{n:"Prometer infraestrutura para o NE", f:()=>{ updateNationalVotes(game.player,2.5); game.approvals[game.player].app+=4; }},{n:"Focar na ind√∫stria sulista", f:()=>{ updateNationalVotes(game.player, game.player==='gomes50'?2:1); game.money+=8; }}]},
    ],
    "1955": [
        {turn:2, t:"CRISE P√ìS-VARGAS: SUIC√çDIO DO PRESIDENTE", d:"O suic√≠dio de Vargas em 1954 ainda d√≥i na mem√≥ria nacional. JK herda o legado trabalhista do PTB. A UDN tenta capitalizar o trauma. Como voc√™ aborda o assunto?", b:[{n:"Honrar a mem√≥ria de Vargas", f:()=>{ updateNationalVotes(game.player, game.player==='jk'?2.5:0.5); game.approvals[game.player].app+=4; }},{n:"Superar o varguismo com modernidade", f:()=>{ updateNationalVotes(game.player, game.player==='jk'?2:1.5); }},{n:"Culpar o PTB pela instabilidade", f:()=>{ updateNationalVotes(game.player, game.player==='juarez'?2.5:-1); }}]},
        {turn:4, t:"50 ANOS EM 5 ‚Äî PLANO DE METAS DE JK", d:"Juscelino Kubitschek promete 'Cinquenta Anos em Cinco': Bras√≠lia, rodovias, ind√∫stria automobil√≠stica. O programa de metas √© audacioso. Candidatos precisam responder.", b:[{n:"Endossar o desenvolvimentismo", f:()=>{ updateNationalVotes(game.player, game.player==='jk'?3:-0.5); game.approvals[game.player].app+=4; }},{n:"Questionar: 'De onde vem o dinheiro?'", f:()=>{ updateNationalVotes(game.player, game.player==='juarez'||game.player==='plinio55'?2.5:0.5); game.points+=2; }},{n:"Proposta alternativa de austeridade", f:()=>{ updateNationalVotes(game.player,1.5); game.money+=10; }}]},
        {turn:6, t:"TENTATIVA DE GOLPE CONTRA JK", d:"Militares da linha dura tentam impedir a posse de JK. O general Teixeira Lott d√° um 'contragolpe' para garantir a democracia. A UDN fica desmoralizada.", b:[{n:"Defender a democracia e Lott", f:()=>{ updateNationalVotes(game.player, game.player==='jk'?3:1.5); game.approvals[game.player].app+=5; }},{n:"Criticar a interven√ß√£o militar", f:()=>{ updateNationalVotes(game.player, game.player==='juarez'?2:1); }}]},
        {turn:9, t:"INTEGRALISMO E ANTICOMUNISMO", d:"Pl√≠nio Salgado acusa comunistas de infiltrarem os partidos. O integralismo ressurge no PRP. Candidatos precisam definir posi√ß√£o no espectro anticomunista.", b:[{n:"Anticomunismo firme mas democr√°tico", f:()=>{ updateNationalVotes(game.player, game.player==='juarez'?2.5:1); }},{n:"Ignorar e focar no desenvolvimento", f:()=>{ updateNationalVotes(game.player, game.player==='jk'?2:1); }},{n:"Endossar posi√ß√µes integralistas", f:()=>{ updateNationalVotes(game.player, game.player==='plinio55'?3:-2); }}]},
    ],
    "1960": [
        {turn:2, t:"J√ÇNIO QUADROS: O VARREDOR DE VASSOURA", d:"J√¢nio usa uma vassoura como s√≠mbolo ‚Äî vai 'varrer a corrup√ß√£o'. Seu estilo exc√™ntrico diverte e preocupa. JQ domina as pesquisas com apelo popular √∫nico.", b:[{n:"Usar s√≠mbolo pr√≥prio anti-corrup√ß√£o", f:()=>{ updateNationalVotes(game.player,2.5); }},{n:"Atacar o estilo populista de J√¢nio", f:()=>{ updateNationalVotes(game.player, game.player!=='janio'?2:0.5); }}]},
        {turn:4, t:"INAUGURA√á√ÉO DE BRAS√çLIA", d:"Juscelino inaugura Bras√≠lia em abril de 1960, menos de 4 anos ap√≥s o in√≠cio das obras. A proeza √© imensa. JK tenta transferir o capital pol√≠tico de seu governo para Lott.", b:[{n:"Celebrar: 'JK mostrou que o Brasil pode'", f:()=>{ updateNationalVotes(game.player, game.player==='lott'?2:1); game.approvals[game.player].app+=4; }},{n:"Criticar o endividamento de Bras√≠lia", f:()=>{ updateNationalVotes(game.player, game.player==='janio'?2.5:1.5); }}]},
        {turn:7, t:"DEBATE SOBRE CUBA E COMUNISMO", d:"A Revolu√ß√£o Cubana de 1959 assusta a direita. A quest√£o comunista domina o debate. J√¢nio tenta posi√ß√£o amb√≠gua; Lott √© mais claro.", b:[{n:"Anticomunismo veemente", f:()=>{ updateNationalVotes(game.player, game.player==='janio'||game.player==='adhemar'?2:0.5); }},{n:"Rela√ß√µes independentes e soberanas", f:()=>{ updateNationalVotes(game.player, game.player==='lott'?2.5:1.5); game.approvals[game.player].app+=3; }}]},
        {turn:10, t:"CAMPANHA NACIONAL DE R√ÅDIO", d:"O r√°dio ainda domina. J√¢nio √© carism√°tico no microfone. Lott √© formal e militar. A comunica√ß√£o define a elei√ß√£o.", b:[{n:"Campanha emocional no r√°dio (R$15M)", f:()=>{ if(game.money>=15){game.money-=15; updateNationalVotes(game.player,3); }}},{n:"Programa t√©cnico de TV (R$12M)", f:()=>{ if(game.money>=12){game.money-=12; updateNationalVotes(game.player,2); game.approvals[game.player].app+=4; }}}]},
    ],
    "1965_s": [
        {turn:2, t:"GOLPE DE 1964 ‚Äî ELEI√á√ÉO SIMULADA", d:"Em 1965, se houvesse elei√ß√µes diretas, Lacerda e Kubitschek seriam os favoritos. Os militares, no poder, cancelaram as elei√ß√µes. Este √© um cen√°rio alternativo.", b:[{n:"Defender o retorno √† democracia", f:()=>{ updateNationalVotes(game.player,2.5); game.approvals[game.player].app+=5; }},{n:"Apelo ao desenvolvimentismo de JK", f:()=>{ updateNationalVotes(game.player, game.player==='jk65'?3:1); }}]},
    ],
    "2026": [],
    "1994": [
        {turn:2, t:"AYRTON SENNA MORRE EM √çMOLA", d:"O maior piloto brasileiro falece. O pa√≠s inteiro para. Candidatos precisam se posicionar com cuidado.", b:[{n:"Homenagem solene (sem campanha)", f:()=>{ updateNationalVotes(game.player,1.5); game.approvals[game.player].app+=5; }},{n:"Manter agenda normal", f:()=>{ game.approvals[game.player].rej+=3; }}], historical:true},
        {turn:4, t:"PLANO REAL LAN√áADO", d:"Em 1 de julho, o Real entra em circula√ß√£o. Infla√ß√£o despenca. FHC aparece como her√≥i, Lula precisa recalcular estrat√©gia.", b:[{n:"Elogiar estabilidade", f:()=>{ updateNationalVotes(game.player,2); }},{n:"Criticar: '√â eleitoreiro!'", f:()=>{ game.points+=3; updateNationalVotes(game.player,-1); }}], historical:true},
        {turn:6, t:"BRASIL TETRACAMPE√ÉO!", d:"O Brasil vence a Copa do Mundo nos EUA. Euforia nacional. Todos os candidatos tentam surfar a onda.", b:[{n:"Festa e palanque", f:()=>{ updateNationalVotes(game.player,3); game.energy=Math.max(0,game.energy-10); }},{n:"Falar de futebol e pol√≠tica", f:()=>{ updateNationalVotes(game.player,1.5); }}], historical:true},
        {turn:9, t:"PESQUISA DATAFOLHA BOMB√ÅSTICA", d:"Nova pesquisa mostra FHC com mais de 40%. Lula em 22%. En√©as surpreende com 7%.", b:[{n:"Contratar pesquisa pr√≥pria (R$8M)", f:()=>{ game.money-=8; updateNationalVotes(game.player,1); }},{n:"Ignorar e focar base", f:()=>{ game.points+=2; }}], historical:true},
        {turn:12, t:"DEBATE NA BAND", d:"Debate entre os principais candidatos. Clima tenso. Troca de acusa√ß√µes sobre o Plano Real.", b:[{n:"Atacar advers√°rio", f:()=>{ updateNationalVotes(game.player,2.5); game.approvals[game.player].rej+=4; }},{n:"Propor programa de governo", f:()=>{ updateNationalVotes(game.player,1.5); game.approvals[game.player].app+=5; }},{n:"Defender Plano Real", f:()=>{ updateNationalVotes('fhc'?game.player==='fhc'?game.player:'fhc':game.player,2); }}], historical:true},
    ],
    "1989": [
        {turn:2, t:"CONSTITUI√á√ÉO DE 1988 ENTRA EM VIGOR", d:"A nova Carta Magna est√° em vigor h√° menos de um ano. O discurso sobre democracia e cidadania domina o debate eleitoral.", b:[{n:"Defender a Constitui√ß√£o", f:()=>{ updateNationalVotes(game.player,2); game.approvals[game.player].app+=4; }},{n:"Criticar excessos", f:()=>{ game.points+=3; updateNationalVotes(game.player,0.5); }}], historical:true},
        {turn:3, t:"CASO DOS AN√ïES DO OR√áAMENTO", d:"Corrup√ß√£o no Congresso abala a confian√ßa. Collor capitaliza no discurso anti-establishment.", b:[{n:"Atacar o sistema pol√≠tico", f:()=>{ updateNationalVotes(game.player,3); }},{n:"Propor reforma pol√≠tica", f:()=>{ updateNationalVotes(game.player,1.5); game.approvals[game.player].app+=3; }}], historical:true},
        {turn:5, t:"HIPERINFLA√á√ÉO BATE RECORDE", d:"Infla√ß√£o mensal ultrapassa 50%. O Brasil est√° com a economia em colapso. Quem prometer solu√ß√£o concreta ganha pontos.", b:[{n:"Plano de choque econ√¥mico", f:()=>{ updateNationalVotes(game.player,3.5); game.approvals[game.player].app+=6; }},{n:"Denunciar concentra√ß√£o de renda", f:()=>{ updateNationalVotes(game.player,2); }},{n:"Propor congelamento de pre√ßos", f:()=>{ updateNationalVotes(game.player,1.5); game.points+=2; }}], historical:true},
        {turn:7, t:"CA√áA AOS MARAJ√ÅS DE COLLOR", d:"Collor promete demitir servidores com sal√°rios absurdos. O slogan 'ca√ßa aos maraj√°s' explode nas pesquisas. Como voc√™ responde?", b:[{n:"Endossar o discurso (arriscado)", f:()=>{ updateNationalVotes(game.player,3); }},{n:"Defender servidores p√∫blicos", f:()=>{ game.approvals[game.player].app+=5; updateNationalVotes(game.player,1); }},{n:"Propor revis√£o salarial t√©cnica", f:()=>{ game.points+=3; }}], historical:true},
        {turn:9, t:"PESQUISA IBOPE: BRIZOLA CAI", d:"Brizola que liderava perde espa√ßo para Lula e Collor. O voto √∫til come√ßa a migrar. Momento decisivo para candidatos menores.", b:[{n:"Campanha agressiva de tv (R$20M)", f:()=>{ if(game.money>=20){game.money-=20; updateNationalVotes(game.player,4);} }},{n:"Discurso de resist√™ncia", f:()=>{ updateNationalVotes(game.player,2); game.approvals[game.player].app+=3; }}], historical:true},
        {turn:11, t:"DEBATE HIST√ìRICO: COLLOR X LULA", d:"O debate mais assistido da hist√≥ria brasileira. Tens√£o m√°xima. Collor ataca o passado pessoal de Lula. Lula responde com dados sobre desigualdade.", b:[{n:"Atacar com dados e n√∫meros", f:()=>{ updateNationalVotes(game.player,3); game.approvals[game.player].rej+=3; }},{n:"Discurso emocional da cidadania", f:()=>{ updateNationalVotes(game.player,2); game.approvals[game.player].app+=6; }},{n:"Ser t√©cnico e moderado", f:()=>{ game.points+=3; updateNationalVotes(game.player,1); }}], historical:true},
        {turn:13, t:"SEGUNDO TURNO SE APROXIMA", d:"Collor e Lula parecem ser os finalistas. Candidatos menores precisam definir posi√ß√£o para o 2¬∫ turno.", b:[{n:"Declarar apoio antecipado", f:()=>{ updateNationalVotes(game.player,2); }},{n:"Manter candidatura firme", f:()=>{ game.approvals[game.player].app+=4; updateNationalVotes(game.player,1); }}], historical:true},
    ],
    "2014": [
        {turn:2, t:"PROTESTOS DE JUNHO DE 2013: LEGADO", d:"As manifesta√ß√µes do ano anterior ainda ecoam. 'N√£o √© pelos 20 centavos' virou s√≠mbolo. O antipetismo cresce, mas o PT ainda tem base s√≥lida.", b:[{n:"Reconhecer as demandas", f:()=>{ updateNationalVotes(game.player,2); game.approvals[game.player].app+=4; }},{n:"Focar nas conquistas sociais", f:()=>{ updateNationalVotes(game.player,1.5); }},{n:"Criticar os manifestantes", f:()=>{ game.approvals[game.player].rej+=5; updateNationalVotes(game.player,-1); }}], historical:true},
        {turn:4, t:"MORTE DE EDUARDO CAMPOS", d:"O candidato do PSB morre em acidente de avi√£o em Santos. Marina Silva assume a candidatura e explode nas pesquisas, amea√ßando o segundo turno.", b:[{n:"Homenagem respeitosa", f:()=>{ game.approvals[game.player].app+=5; }},{n:"Accelerar campanha enquanto o rival reorganiza", f:()=>{ updateNationalVotes(game.player,2); spendEnergy(10); }}], historical:true},
        {turn:5, t:"MARINA ULTRAPASSA A√âCIO NAS PESQUISAS", d:"O fen√¥meno Marina amea√ßa o segundo turno. Por alguns dias ela aparece liderando contra Dilma. O PT entra em modo de guerra.", b:[{n:"Atacar o programa de Marina", f:()=>{ updateNationalVotes(game.player,2.5); game.approvals[game.player].rej+=3; }},{n:"Refor√ßar propostas pr√≥prias", f:()=>{ updateNationalVotes(game.player,1.5); game.approvals[game.player].app+=3; }}], historical:true},
        {turn:7, t:"PETROBRAS E A LAVA-JATO", d:"Investiga√ß√µes da Opera√ß√£o Lava-Jato come√ßam a vazar para a m√≠dia. Suspeitas de desvio bilion√°rio na Petrobras amea√ßam o PT.", b:[{n:"Negar e contra-atacar", f:()=>{ game.scandalLevels['dilma']=(game.scandalLevels['dilma']||0)+2; updateNationalVotes(game.player, game.player==='dilma'?-1:2); }},{n:"Prometer investiga√ß√£o independente", f:()=>{ game.approvals[game.player].app+=3; updateNationalVotes(game.player,1); }}], historical:true},
        {turn:9, t:"DEBATE NA GLOBO ‚Äî 1¬∫ TURNO", d:"Debate acirrado. Dilma e A√©cio trocam farpas sobre economia. Marina tenta se firmar no centro. Luciana acusa todos de defender o capital.", b:[{n:"Ataque direto ao rival principal", f:()=>{ updateNationalVotes(game.player,2.5); game.approvals[game.player].rej+=3; }},{n:"Proposta concreta e t√©cnica", f:()=>{ updateNationalVotes(game.player,2); game.approvals[game.player].app+=4; }},{n:"Discurso de renova√ß√£o pol√≠tica", f:()=>{ updateNationalVotes(game.player,1.5); spendEnergy(-5); }}], historical:true},
        {turn:11, t:"CRISE DO D√ìLAR E ECONOMIA", d:"O d√≥lar dispara. O mercado prefere A√©cio. Dilma defende o 'Brasil que n√£o pode voltar atr√°s'. A polariza√ß√£o esquenta.", b:[{n:"Defender o modelo econ√¥mico atual", f:()=>{ updateNationalVotes(game.player, game.player==='dilma'?2:-1); }},{n:"Prometer ajuste fiscal respons√°vel", f:()=>{ updateNationalVotes(game.player, game.player==='aecio'?3:0.5); game.money+=10; }}], historical:true},
        {turn:13, t:"SEGUNDO TURNO: DILMA X A√âCIO", d:"O segundo turno mais disputado da hist√≥ria recente. Brasil dividido ao meio. Cada voto conta.", b:[{n:"Mobiliza√ß√£o total da base", f:()=>{ updateNationalVotes(game.player,3); spendEnergy(20); }},{n:"Campanha no hor√°rio eleitoral (R$15M)", f:()=>{ if(game.money>=15){game.money-=15; updateNationalVotes(game.player,2.5);} }},{n:"Apelar ao voto √∫til", f:()=>{ updateNationalVotes(game.player,2); game.approvals[game.player].app+=3; }}], historical:true},
    ],
    "1998": [
        {turn:2, t:"CRISE ASI√ÅTICA CHEGA AO BRASIL", d:"Bolsas despencam no mundo inteiro. O real sofre press√£o especulativa. FHC anuncia pacote de austeridade. Quem vai colher os frutos da crise?", b:[{n:"Defender austeridade e o Real", f:()=>{ updateNationalVotes(game.player, game.player==='fhc98'?2.5:0.5); game.approvals[game.player].app+=3; }},{n:"Criticar vulnerabilidade externa", f:()=>{ updateNationalVotes(game.player, game.player==='fhc98'?-1:2.5); game.points+=2; }},{n:"Propor controle de capitais", f:()=>{ updateNationalVotes(game.player, game.player==='lula98'||game.player==='ciro98'?2:0.5); }}], historical:true},
        {turn:4, t:"COPA DO MUNDO: BRASIL PERDE A FINAL PARA A FRAN√áA", d:"3x0. Ronaldo entra em colapso antes da partida. O pa√≠s em choque. FHC √© visto no est√°dio. Como usar (ou n√£o) o momento?", b:[{n:"Solidariedade e luto nacional", f:()=>{ game.approvals[game.player].app+=4; updateNationalVotes(game.player,1.5); }},{n:"Prometer investimento no esporte", f:()=>{ updateNationalVotes(game.player,1.5); game.money-=5; }},{n:"Focar na campanha, ignorar Copa", f:()=>{ updateNationalVotes(game.player,0.5); game.points+=2; }}], historical:true},
        {turn:6, t:"FHC DEFENDE REELEI√á√ÉO: 'QUEM FAZ PRECISA CONTINUAR'", d:"FHC martela que s√≥ ele pode garantir a continuidade do Plano Real. Lula e Ciro tentam mostrar que estabilidade n√£o √© suficiente.", b:[{n:"Defender legado do Plano Real", f:()=>{ updateNationalVotes(game.player, game.player==='fhc98'?3:0.5); }},{n:"Atacar a reelei√ß√£o como concentra√ß√£o de poder", f:()=>{ updateNationalVotes(game.player,2.5); game.approvals[game.player].rej+=2; }},{n:"Propor terceira via econ√¥mica", f:()=>{ updateNationalVotes(game.player, game.player==='ciro98'?3:1.5); game.approvals[game.player].app+=3; }}], historical:true},
        {turn:8, t:"ATAQUE ESPECULATIVO AO REAL", d:"Bilh√µes saem do pa√≠s. Reservas caem. O governo eleva os juros para 40% ao ano. A bomba explodir√° depois das elei√ß√µes ‚Äî mas os candidatos precisam se posicionar agora.", b:[{n:"Apoiar medidas emergenciais", f:()=>{ updateNationalVotes(game.player, game.player==='fhc98'?2:-0.5); }},{n:"Denunciar: arrocho recai sobre os pobres", f:()=>{ updateNationalVotes(game.player, game.player==='lula98'?3:2); game.approvals[game.player].app+=4; }},{n:"Propor renegocia√ß√£o da d√≠vida externa", f:()=>{ updateNationalVotes(game.player, game.player==='ciro98'?3:1.5); game.approvals[game.player].rej+=2; }}], historical:true},
        {turn:10, t:"PESQUISAS: FHC PODE VENCER NO 1¬∫ TURNO", d:"Datafolha mostra FHC com 54% das inten√ß√µes de voto. O voto √∫til corr√≥i Ciro e En√©as. Candidatos menores entram em desespero.", b:[{n:"Investir forte em campanha (R$15M)", f:()=>{ if(game.money>=15){game.money-=15; updateNationalVotes(game.player,3);} }},{n:"Atacar por flancos alternativos", f:()=>{ updateNationalVotes(game.player,2); game.approvals[game.player].rej+=2; }},{n:"Apelar ao voto √∫til progressista", f:()=>{ updateNationalVotes(game.player, game.player!=='fhc98'?2.5:0.5); }}], historical:true},
        {turn:12, t:"DEBATE FINAL NA GLOBO", d:"√öltimo grande embate. FHC sereno. Lula agressivo. Ciro afiado nos n√∫meros. En√©as com o bord√£o de sempre. O Brasil decide.", b:[{n:"Ataque pesado ao favorito", f:()=>{ updateNationalVotes(game.player,3); game.approvals[game.player].rej+=4; }},{n:"Apresentar plano econ√¥mico detalhado", f:()=>{ updateNationalVotes(game.player,2); game.approvals[game.player].app+=5; }},{n:"Discurso de soberania nacional", f:()=>{ updateNationalVotes(game.player, game.player==='ciro98'||game.player==='eneas98'?3:1.5); }}], historical:true},
    ],
    "2002": [
        {turn:2, t:"LULA LIDERA COM VANTAGEM HIST√ìRICA", d:"Pesquisas colocam Lula com 40%. O mercado financeiro em p√¢nico: risco-Brasil dispara. D√≥lar sobe. O PT precisa convencer que n√£o vai dar calote na d√≠vida.", b:[{n:"Moderar discurso para acalmar mercado", f:()=>{ updateNationalVotes(game.player, game.player==='lula02'?2:0.5); game.money+=10; }},{n:"Manter postura progressista firme", f:()=>{ updateNationalVotes(game.player, game.player==='lula02'?1.5:2); game.approvals[game.player].app+=3; }},{n:"Atacar o p√¢nico como manipula√ß√£o", f:()=>{ updateNationalVotes(game.player,2.5); game.approvals[game.player].rej+=3; }}], historical:true},
        {turn:4, t:"APAG√ÉO EL√âTRICO: CULPA DE QUEM?", d:"O racionamento de 2001 ainda d√≥i. A infraestrutura privatizada falhou. Candidatos disputam a narrativa da crise energ√©tica.", b:[{n:"Culpar as privatiza√ß√µes do governo FHC", f:()=>{ updateNationalVotes(game.player, game.player!=='serra'?2.5:0.5); }},{n:"Prometer plano energ√©tico robusto", f:()=>{ updateNationalVotes(game.player,2); game.approvals[game.player].app+=3; }},{n:"Defender o modelo atual com ajustes", f:()=>{ updateNationalVotes(game.player, game.player==='serra'?2:-0.5); }}], historical:true},
        {turn:5, t:"CIRO EXPLODE NAS PESQUISAS", d:"Ciro Gomes sobe para 20% e amea√ßa disputar o 2¬∫ turno. Garotinho cresce no Nordeste com apelo evang√©lico. A corrida pelo 2¬∫ lugar est√° aberta.", b:[{n:"Atacar Ciro diretamente", f:()=>{ updateNationalVotes(game.player,2); game.approvals[game.player].rej+=3; updateNationalVotes(game.player==='ciro02'?game.player:'ciro02', game.player==='ciro02'?0:-1); }},{n:"Focar no pr√≥prio crescimento", f:()=>{ updateNationalVotes(game.player,2.5); game.approvals[game.player].app+=2; }},{n:"Proposta bomb√°stica de governo", f:()=>{ updateNationalVotes(game.player,2); spendEnergy(10); }}], historical:true},
        {turn:7, t:"CARTA AO POVO BRASILEIRO", d:"Lula assina a hist√≥rica carta comprometendo-se a honrar contratos, manter super√°vit prim√°rio e combater a infla√ß√£o. O mercado respira. √â um divisor de √°guas na hist√≥ria do PT.", b:[{n:"Assinar carta similar de compromisso", f:()=>{ updateNationalVotes(game.player,2); game.approvals[game.player].app+=5; game.money+=8; }},{n:"Criticar: '√â capitula√ß√£o ao mercado!'", f:()=>{ updateNationalVotes(game.player, game.player==='zemaria'||game.player==='pimenta'?3:-1); }},{n:"Aproveitar para apresentar plano pr√≥prio", f:()=>{ updateNationalVotes(game.player,2); game.approvals[game.player].app+=3; }}], historical:true},
        {turn:9, t:"CIRO CHAMA ROSA DO PT DE ESPI√ÉO", d:"Em gafe hist√≥rica, Ciro Gomes implode sua candidatura ao chamar um assessor do PT de espi√£o. Queda nas pesquisas. Eleitores migram.", b:[{n:"Absorver eleitores de Ciro", f:()=>{ updateNationalVotes(game.player, game.player==='lula02'||game.player==='garotinho'?2.5:1.5); }},{n:"Manter foco e n√£o comentar", f:()=>{ updateNationalVotes(game.player,1.5); game.approvals[game.player].app+=3; }},{n:"Atacar comportamento de Ciro", f:()=>{ updateNationalVotes(game.player,2); game.approvals[game.player].rej+=2; }}], historical:true},
        {turn:12, t:"DEBATE FINAL: POLARIZA√á√ÉO LULA X SERRA", d:"Serra parte para cima de Lula com dados sobre renegocia√ß√£o da d√≠vida. Lula fala de paz, amor e emprego. Garotinho fala de Deus. Ciro tenta se recuperar.", b:[{n:"Ataque pesado: 'Chega de mentira!'", f:()=>{ updateNationalVotes(game.player,3); game.approvals[game.player].rej+=4; }},{n:"'Lulinha paz e amor': conciliador", f:()=>{ updateNationalVotes(game.player, game.player==='lula02'?3:1.5); game.approvals[game.player].app+=6; }},{n:"Proposta t√©cnica e detalhada", f:()=>{ updateNationalVotes(game.player,2); game.approvals[game.player].app+=3; }}], historical:true},
    ],
    "2006": [
        {turn:2, t:"MENSAL√ÉO: O STF JULGA O PT", d:"O esc√¢ndalo do Mensal√£o domina a m√≠dia. Lula diz que n√£o sabia de nada. A oposi√ß√£o grita 'fora PT'. A base petista no Nordeste permanece fiel.", b:[{n:"Distanciar-se do esc√¢ndalo publicamente", f:()=>{ game.approvals[game.player].rej-=3; updateNationalVotes(game.player, game.player==='lula06'?1:2.5); }},{n:"Atacar: 'PT traiu seus eleitores!'", f:()=>{ updateNationalVotes(game.player, game.player!=='lula06'?3:-2); game.scandalLevels['lula06']=(game.scandalLevels['lula06']||0)+2; }},{n:"Reconhecer erros e prometer mudan√ßa", f:()=>{ updateNationalVotes(game.player, game.player==='lula06'?1.5:1); game.approvals[game.player].app+=4; }}], historical:true},
        {turn:3, t:"BOLSA FAM√çLIA: 11 MILH√ïES DE FAM√çLIAS", d:"O Bolsa Fam√≠lia beneficia 11 milh√µes de lares. O Nordeste vira terra de Lula. A oposi√ß√£o tenta desqualificar como 'assistencialismo eleitoral'. Como voc√™ responde?", b:[{n:"Defender como direito social permanente", f:()=>{ updateNationalVotes(game.player, game.player==='lula06'?3.5:0.5); game.approvals[game.player].app+=4; }},{n:"Propor 'Bolsa Fam√≠lia melhorado'", f:()=>{ updateNationalVotes(game.player, game.player==='alckmin'?2:1.5); }},{n:"Criticar como clientelismo eleitoreiro", f:()=>{ updateNationalVotes(game.player, game.player==='lula06'?-2.5:2); game.approvals[game.player].rej+=3; }}], historical:true},
        {turn:5, t:"HELO√çSA HELENA CRESCE: ESQUERDA DIVIDIDA", d:"A candidata do PSOL bate 8% nas pesquisas, roubando votos da esquerda de Lula. O PT entra em modo de alerta. Cristovam tamb√©m cresce no eleitorado educado.", b:[{n:"Atacar o PSOL pela esquerda", f:()=>{ updateNationalVotes(game.player,2); game.approvals[game.player].rej+=3; }},{n:"Ignorar e focar no duelo com Alckmin", f:()=>{ updateNationalVotes(game.player,1.5); game.approvals[game.player].app+=2; }},{n:"Radicalizar discurso para recuperar base", f:()=>{ updateNationalVotes(game.player,2.5); spendEnergy(10); }}], historical:true},
        {turn:7, t:"DOSSI√ä DOS ALOPRADOS: CRISE INTERNA NO PT", d:"Assessores do PT s√£o pegos com R$1,7 milh√£o tentando comprar dossi√™ contra Serra. Lula chama os envolvidos de 'aloprados' e os demite. Nova crise.", b:[{n:"Distanciar-se imediatamente", f:()=>{ game.approvals[game.player].rej-=3; updateNationalVotes(game.player, game.player==='lula06'?1:2); }},{n:"Explorar o esc√¢ndalo do PT para crescer", f:()=>{ updateNationalVotes(game.player, game.player!=='lula06'?3:-2); game.scandalLevels['lula06']=(game.scandalLevels['lula06']||0)+2; }},{n:"Prometer reforma √©tica da pol√≠tica", f:()=>{ updateNationalVotes(game.player,1.5); game.approvals[game.player].app+=4; }}], historical:true},
        {turn:9, t:"DEBATE NA BAND: ALCKMIN PARTE PARA CIMA", d:"Alckmin ataca Lula com dureza nos debates. Lula parece cansado e sem preparo. A imprensa questiona se haver√° segundo turno. En√©as, Helo√≠sa e Cristovam tentam se destacar.", b:[{n:"Defesa firme: 'Fiz o que prometi'", f:()=>{ updateNationalVotes(game.player, game.player==='lula06'?2:1); game.approvals[game.player].app+=3; }},{n:"Ataque t√©cnico com dados de governo", f:()=>{ updateNationalVotes(game.player,2.5); game.approvals[game.player].rej+=2; }},{n:"Discurso emocional da cidadania", f:()=>{ updateNationalVotes(game.player, game.player==='heloisa'||game.player==='cristovam'?3:1.5); }}], historical:true},
        {turn:11, t:"LULA VAI AO 2¬∫ TURNO COM 48,6%", d:"Faltou pouco para o 1¬∫ turno. Alckmin com 41,6%. Helo√≠sa com 6,8% e Cristovam com 2,6%. A migra√ß√£o de votos da esquerda decide o 2¬∫ turno.", b:[{n:"Apelar diretamente a eleitores de Helo√≠sa", f:()=>{ updateNationalVotes(game.player, game.player==='lula06'?3:1); }},{n:"Campanha intensa no hor√°rio eleitoral (R$15M)", f:()=>{ if(game.money>=15){game.money-=15; updateNationalVotes(game.player,2.5);} }},{n:"Debates regionais nas afiliadas", f:()=>{ updateNationalVotes(game.player,2); game.approvals[game.player].app+=3; }}], historical:true},
    ],
    "2010": [
        {turn:2, t:"LEGADO DO LULA: APROVA√á√ÉO DE 83%", d:"Lula deixa o governo com 83% de aprova√ß√£o ‚Äî recorde hist√≥rico. Dilma, sua candidata, herda essa popularidade. Os advers√°rios precisam descolar do governo sem atacar Lula diretamente.", b:[{n:"Usar Lula como cabo eleitoral central", f:()=>{ updateNationalVotes(game.player, game.player==='dilma10'?3.5:0.5); game.approvals[game.player].app+=5; }},{n:"Atacar o governo Lula indiretamente", f:()=>{ updateNationalVotes(game.player, game.player!=='dilma10'?2.5:-2); }},{n:"Falar do futuro, n√£o do passado", f:()=>{ updateNationalVotes(game.player,2); game.approvals[game.player].app+=3; }}], historical:true},
        {turn:3, t:"ESC√ÇNDALO DOS CART√ïES CORPORATIVOS", d:"Reportagem exp√µe uso de cart√µes corporativos do governo Lula em hot√©is e bares. A oposi√ß√£o grita 'maraj√°s do PT'. O governo tenta minimizar.", b:[{n:"Defender: 'Foi para o trabalho!'", f:()=>{ updateNationalVotes(game.player, game.player==='dilma10'?0.5:-2); game.approvals[game.player].rej+=3; }},{n:"Exigir explica√ß√µes e investiga√ß√£o", f:()=>{ updateNationalVotes(game.player, game.player!=='dilma10'?3:0.5); }},{n:"Propor lei de transpar√™ncia total", f:()=>{ updateNationalVotes(game.player,2); game.approvals[game.player].app+=4; }}], historical:true},
        {turn:5, t:"MARINA SILVA CRESCE: FEN√îMENO AMBIENTAL", d:"Marina Silva, ex-ministra que saiu do PT, cresce forte com o discurso verde e de renova√ß√£o. Eleitores jovens e urbanos se identificam. Ela pode roubar votos suficientes para for√ßar o 2¬∫ turno.", b:[{n:"Atacar o programa de Marina", f:()=>{ updateNationalVotes(game.player,2); game.approvals[game.player].rej+=2; updateNationalVotes('marina10',-1); }},{n:"Absorver pauta ambiental", f:()=>{ updateNationalVotes(game.player,1.5); game.approvals[game.player].app+=3; }},{n:"Ignorar e manter foco na base", f:()=>{ updateNationalVotes(game.player,1); game.points+=2; }}], historical:true},
        {turn:7, t:"BRASIL: OITAVA ECONOMIA DO MUNDO", d:"O Brasil ultrapassa a It√°lia e se torna a 8¬™ maior economia do planeta. Dilma capitaliza o crescimento. Serra acusa de 'voo de galinha'.", b:[{n:"Celebrar: 'Brasil chegou l√°!'", f:()=>{ updateNationalVotes(game.player, game.player==='dilma10'?3:0.5); game.approvals[game.player].app+=4; }},{n:"Apontar desigualdades que persistem", f:()=>{ updateNationalVotes(game.player, game.player==='plinio'||game.player==='marina10'?2.5:1.5); }},{n:"Propor acelerar com reformas liberais", f:()=>{ updateNationalVotes(game.player, game.player==='serra10'?2.5:1); game.money+=10; }}], historical:true},
        {turn:9, t:"DEBATE NA GLOBO: DILMA SEM EXPERI√äNCIA?", d:"Serra ataca Dilma por nunca ter disputado uma elei√ß√£o antes. Dilma se defende com compet√™ncia t√©cnica. Marina cobra do PT as promessas n√£o cumpridas da gest√£o Lula.", b:[{n:"Rebater com firmeza: 'Administra√ß√£o √© experi√™ncia'", f:()=>{ updateNationalVotes(game.player, game.player==='dilma10'?2.5:1); game.approvals[game.player].app+=4; }},{n:"Atacar o advers√°rio com estat√≠sticas", f:()=>{ updateNationalVotes(game.player,2.5); game.approvals[game.player].rej+=3; }},{n:"Discurso de renova√ß√£o e moralidade", f:()=>{ updateNationalVotes(game.player, game.player==='marina10'?3.5:1.5); }}], historical:true},
        {turn:11, t:"PESQUISA: DILMA PERTO DO 1¬∫ TURNO", d:"Datafolha coloca Dilma com 49%! Um ponto do 1¬∫ turno. Serra estacionou em 32%. Marina com 14% e Pl√≠nio com 2%. A esquerda teme o voto √∫til.", b:[{n:"Mobiliza√ß√£o m√°xima para fechar no 1T", f:()=>{ updateNationalVotes(game.player, game.player==='dilma10'?2.5:1); spendEnergy(15); }},{n:"Explorar insatisfa√ß√£o para crescer", f:()=>{ updateNationalVotes(game.player, game.player==='marina10'||game.player==='plinio'?3:1); }},{n:"Campanha final de TV (R$15M)", f:()=>{ if(game.money>=15){game.money-=15; updateNationalVotes(game.player,2.5);} }}], historical:true},
        {turn:13, t:"SEGUNDO TURNO: DILMA X SERRA", d:"Dilma obteve 46,9% no 1T, Serra 32,6% e Marina 19,3%. No 2T, a batalha pelo eleitorado verde e liberal √© decisiva.", b:[{n:"Apelar a eleitores de Marina diretamente", f:()=>{ updateNationalVotes(game.player,2.5); game.approvals[game.player].app+=3; }},{n:"Mobilizar base do Nordeste", f:()=>{ updateNationalVotes(game.player, game.player==='dilma10'?3.5:1); }},{n:"Debater economia e emprego", f:()=>{ updateNationalVotes(game.player,2); game.money+=5; }}], historical:true},
    ],
    "2018": [
        {turn:2, t:"LULA PRESO EM CURITIBA", d:"O ex-presidente Lula se entrega √† Pol√≠cia Federal em Curitiba. Entra para a cadeia. O PT mant√©m sua candidatura viva. O pa√≠s se divide em 'Lula livre' vs 'bandido n√£o tem direito'. Jair Bolsonaro dispara nas pesquisas.", b:[{n:"Explorar: 'PT √© partido de ladr√µes'", f:()=>{ updateNationalVotes(game.player, game.player==='bolsonaro'||game.player==='alckmin18'||game.player==='meirelles'?3:-2); updateNationalVotes('haddad',-2); }},{n:"Defender Lula e o PT", f:()=>{ updateNationalVotes(game.player, game.player==='haddad'?3.5:-2); game.approvals[game.player].app+=4; }},{n:"Falar de renova√ß√£o e novo Brasil", f:()=>{ updateNationalVotes(game.player, game.player==='amedo'||game.player==='ciro18'?3:1.5); }}], historical:true},
        {turn:3, t:"BOLSONARO √â ESFAQUEADO EM JUIZ DE FORA", d:"Durante com√≠cio em Minas Gerais, Jair Bolsonaro √© atacado a faca por Ad√©lio Bispo. Fica gravemente ferido. O ataque domina o notici√°rio e gera onda de solidariedade. Sua fam√≠lia assume a campanha nas redes.", b:[{n:"Solidariedade pol√≠tica respeitosa", f:()=>{ game.approvals[game.player].app+=4; updateNationalVotes(game.player,1.5); }},{n:"Manter campanha normal com discri√ß√£o", f:()=>{ updateNationalVotes(game.player,1); game.points+=2; }},{n:"Questionar o epis√≥dio publicamente", f:()=>{ game.approvals[game.player].rej+=6; updateNationalVotes(game.player,-2); }}], historical:true},
        {turn:5, t:"HADDAD SUBSTITUI LULA NA CANDIDATURA", d:"O TSE torna Lula ineleg√≠vel. Fernando Haddad, ex-prefeito de SP, assume como candidato do PT. Lula grava v√≠deos da pris√£o e transfere votos. Haddad sobe de 9% para 23% em dias.", b:[{n:"Atacar a 'candidatura laranja' do PT", f:()=>{ updateNationalVotes(game.player, game.player!=='haddad'?2:-1); game.approvals[game.player].rej+=2; }},{n:"Celebrar a for√ßa do PT sem Lula", f:()=>{ updateNationalVotes(game.player, game.player==='haddad'?3.5:-1); }},{n:"Focar na polariza√ß√£o para crescer", f:()=>{ updateNationalVotes(game.player, game.player==='bolsonaro'||game.player==='haddad'?2.5:0.5); }}], historical:true},
        {turn:7, t:"BOLSONARO DOMINA WHATSAPP E YOUTUBE", d:"Campanha de Bolsonaro usa redes sociais como nunca visto. Disparos em massa de WhatsApp. V√≠deos virais no YouTube. A grande m√≠dia perde influ√™ncia. √â uma nova era eleitoral.", b:[{n:"Investir pesado em redes sociais (R$15M)", f:()=>{ game.money-=15; updateNationalVotes(game.player,3.5); }},{n:"Manter estrat√©gia tradicional de TV", f:()=>{ updateNationalVotes(game.player,1.5); game.approvals[game.player].app+=2; }},{n:"Atacar as fake news nas redes", f:()=>{ updateNationalVotes(game.player, game.player==='haddad'||game.player==='ciro18'?2:1); }}], historical:true},
        {turn:9, t:"DEBATE: BOLSONARO N√ÉO APARECE", d:"Bolsonaro falta aos debates das grandes TVs. Seus apoiadores dizem que ele est√° acima disso. Os demais candidatos debatem entre si. Ciro e Haddad trocam farpas. Alckmin tenta modera√ß√£o.", b:[{n:"Atacar o ausente ferozmente", f:()=>{ updateNationalVotes(game.player,2.5); game.approvals[game.player].rej+=3; }},{n:"Focar em proposta pr√≥pria sem Bolsonaro", f:()=>{ updateNationalVotes(game.player,2); game.approvals[game.player].app+=5; }},{n:"Apelar ao voto √∫til anti-PT", f:()=>{ updateNationalVotes(game.player, game.player==='alckmin18'?3:1); }}], historical:true},
        {turn:11, t:"PESQUISA: POLARIZA√á√ÉO EXTREMA", d:"Bolsonaro chega a 35% e Haddad a 23%. Ciro em 12%, Alckmin em 8%. O voto √∫til come√ßa a matar candidaturas. Daciolo e Eymael somam menos de 2%.", b:[{n:"Apelar ao voto √∫til contra PT", f:()=>{ updateNationalVotes(game.player, game.player==='bolsonaro'?2.5:1); updateNationalVotes('haddad',-1); }},{n:"Apelar ao voto √∫til anti-Bolsonaro", f:()=>{ updateNationalVotes(game.player, game.player==='haddad'?2.5:1.5); updateNationalVotes('bolsonaro',-1); }},{n:"Resistir ao voto √∫til com identidade pr√≥pria", f:()=>{ updateNationalVotes(game.player,1.5); game.approvals[game.player].app+=4; }}], historical:true},
        {turn:13, t:"2T: BOLSONARO X HADDAD ‚Äî BRAZIL DIVIDIDO", d:"Bolsonaro com 46% no 1T, Haddad 29%. No 2T, toda a direita e centro migram para Bolsonaro. A esquerda se une em torno de Haddad. Resultado hist√≥rico.", b:[{n:"Mobilizar base ideol√≥gica com for√ßa", f:()=>{ updateNationalVotes(game.player,3); spendEnergy(20); }},{n:"Buscar eleitores descontentes do centro", f:()=>{ updateNationalVotes(game.player,2); game.approvals[game.player].app+=3; }},{n:"Campanha final de redes sociais (R$10M)", f:()=>{ if(game.money>=10){game.money-=10; updateNationalVotes(game.player,2.5);} }}], historical:true},
    ],
    "2022": [
        {turn:2, t:"BOLSONARO QUESTIONA AS URNAS ELETR√îNICAS", d:"O presidente Bolsonaro convoca embaixadores estrangeiros e defende um golpe caso perca. Generais ouvem sem protestar. A imprensa e o STF reagem com dureza. A democracia em risco vira o tema central.", b:[{n:"Defender a urna: 'N√£o tem fraude!'", f:()=>{ updateNationalVotes(game.player, game.player==='lula22'||game.player==='tebet'||game.player==='ciro22'?2.5:-1); game.approvals[game.player].app+=5; }},{n:"Semear d√∫vida sobre o sistema", f:()=>{ updateNationalVotes(game.player, game.player==='bolsonaro22'?3:-3); game.approvals[game.player].rej+=4; }},{n:"Propor comiss√£o independente de auditoria", f:()=>{ updateNationalVotes(game.player,1.5); game.points+=2; }}], historical:true},
        {turn:3, t:"LULA √â LIBERADO E LIDERA PESQUISAS", d:"Depois da decis√£o do STF que anulou condena√ß√µes por suspei√ß√£o de Moro, Lula volta candidat√°vel. Pesquisas mostram Lula com 47% e Bolsonaro com 32%. O campo da oposi√ß√£o est√° dominado.", b:[{n:"Atacar a decis√£o do STF", f:()=>{ updateNationalVotes(game.player, game.player==='bolsonaro22'?2.5:-1.5); game.approvals[game.player].rej+=3; }},{n:"Celebrar retorno da democracia", f:()=>{ updateNationalVotes(game.player, game.player==='lula22'||game.player==='tebet'?2.5:-0.5); }},{n:"Propor agenda de reconstru√ß√£o", f:()=>{ updateNationalVotes(game.player,2); game.approvals[game.player].app+=3; }}], historical:true},
        {turn:5, t:"AUX√çLIO BRASIL E A COMPRA DE VOTOS", d:"Bolsonaro eleva o Aux√≠lio Brasil para R$600 e prop√µe outros benef√≠cios √†s v√©speras da elei√ß√£o. O TCU questiona. Lula acusa de 'compra de votos com dinheiro p√∫blico'. O Nordeste fica em disputa.", b:[{n:"Atacar: 'Populismo eleitoral descarado!'", f:()=>{ updateNationalVotes(game.player, game.player!=='bolsonaro22'?2.5:-1.5); }},{n:"Propor benef√≠cio ainda maior se eleito", f:()=>{ updateNationalVotes(game.player,2); game.approvals[game.player].app+=3; }},{n:"Focar em combate √† fome como pauta", f:()=>{ updateNationalVotes(game.player, game.player==='lula22'||game.player==='tebet'?3:1.5); }}], historical:true},
        {turn:7, t:"MORO MIGRA PARA UNION E DESISTE DA CANDIDATURA", d:"Sergio Moro desiste da candidatura ao desmoronar nas pesquisas. Parte de seus votos migra para Bolsonaro, parte para Tebet. Simone Tebet vira esperan√ßa da terceira via moderada.", b:[{n:"Absorver eleitores de Moro pela direita", f:()=>{ updateNationalVotes(game.player, game.player==='bolsonaro22'?2.5:0.5); }},{n:"Absorver moderados descontentes do PT/PL", f:()=>{ updateNationalVotes(game.player, game.player==='tebet'?3:1); }},{n:"Manter base e ignorar migra√ß√£o", f:()=>{ updateNationalVotes(game.player,1); game.points+=2; }}], historical:true},
        {turn:9, t:"DEBATE NA GLOBO: LULA X BOLSONARO", d:"Debate mais tenso da hist√≥ria recente. Bolsonaro ataca o passado de Lula. Lula ataca o desemprego e a fome. Tebet surpreende com performance superior. Ciro ataca os dois.", b:[{n:"Ataque frontal: 'Corrup√ß√£o e mentira!'", f:()=>{ updateNationalVotes(game.player,2.5); game.approvals[game.player].rej+=4; }},{n:"Apresentar plano de governo detalhado", f:()=>{ updateNationalVotes(game.player,2); game.approvals[game.player].app+=5; }},{n:"Discurso emocional: fome, emprego, dignidade", f:()=>{ updateNationalVotes(game.player, game.player==='lula22'||game.player==='tebet'?3:1.5); }}], historical:true},
        {turn:11, t:"BOLSONARO SURPREENDE NO 1T: APENAS 1,8% DE DIFEREN√áA", d:"Lula obt√©m 48,4% e Bolsonaro 43,2% no 1T. Surpreendente! A oposi√ß√£o celebra. Tebet com 4,2% e Ciro com 3,1% ‚Äî ambas candidaturas declaradas para Lula no 2T.", b:[{n:"Apelar urgentemente a eleitores de Tebet e Ciro", f:()=>{ updateNationalVotes(game.player, game.player==='lula22'?3:1.5); }},{n:"Intensificar campanha com Lula de volta", f:()=>{ updateNationalVotes(game.player, game.player==='bolsonaro22'?3:1); spendEnergy(15); }},{n:"Buscar apoio de governadores aliados", f:()=>{ updateNationalVotes(game.player,2.5); game.money-=10; }}], historical:true},
        {turn:13, t:"2T HIST√ìRICO: DIFEREN√áA DE APENAS 2,1%", d:"O 2T mais apertado da hist√≥ria: Lula 50,9% e Bolsonaro 49,1%. Brasil dividido ao extremo. Eleitores na fila √†s 20h. Tens√£o m√°xima.", b:[{n:"Mobiliza√ß√£o total: 'Cada voto conta!'", f:()=>{ updateNationalVotes(game.player,3); spendEnergy(25); }},{n:"Press√£o judicial contra irregularidades", f:()=>{ updateNationalVotes(game.player,2); game.approvals[game.player].app+=3; }},{n:"Campanha final nas redes e TV (R$15M)", f:()=>{ if(game.money>=15){game.money-=15; updateNationalVotes(game.player,2.5);} }}], historical:true},
    ],
    "2026": [
        {turn:2, t:"LULA NO HOSPITAL: OPERA√á√ÉO E RECUPERA√á√ÉO", d:"O presidente Lula enfrenta problemas de sa√∫de e passa por cirurgia. A oposi√ß√£o questiona sua capacidade de governar. A base petista fecha fileiras. O pa√≠s acompanha tenso.", b:[{n:"Atacar a sa√∫de do presidente", f:()=>{ updateNationalVotes(game.player, game.player!=='lula26'?2.5:-3); game.approvals[game.player].rej+=5; }},{n:"Proposta de governo s√≥lida sem falar do rival", f:()=>{ updateNationalVotes(game.player,2); game.approvals[game.player].app+=4; }},{n:"Solidariedade humana + cr√≠tica ao governo", f:()=>{ updateNationalVotes(game.player,1.5); game.approvals[game.player].app+=3; }}], historical:true},
        {turn:4, t:"FL√ÅVIO BOLSONARO: HERDEIRO DO BOLSONARISMO", d:"O senador Fl√°vio Bolsonaro lan√ßa candidatura com apoio direto do pai, que gravou v√≠deo da pris√£o nos EUA. O movimento bolsonarista √© mobilizado. Zema e Caiado perdem espa√ßo.", b:[{n:"Atacar a 'candidatura herdeira'", f:()=>{ updateNationalVotes(game.player, game.player!=='flavio'?1.5:-1); }},{n:"Apelar ao eleitorado bolsonarista moderado", f:()=>{ updateNationalVotes(game.player, game.player==='flavio'||game.player==='zema'||game.player==='caiado'?3:0.5); }},{n:"Focar nas diferen√ßas program√°ticas", f:()=>{ updateNationalVotes(game.player,2); game.approvals[game.player].app+=3; }}], historical:true},
        {turn:6, t:"TRAG√âDIA AMBIENTAL: ENCHENTES NO RS/ES", d:"Enchentes massivas no Sul e Sudeste matam centenas. O governo federal √© cobrado por falta de preparo. A crise clim√°tica domina o debate eleitoral.", b:[{n:"Cobrar responsabilidade do governo federal", f:()=>{ updateNationalVotes(game.player, game.player!=='lula26'?2.5:-2); }},{n:"Proposta ambiciosa de reconstru√ß√£o clim√°tica", f:()=>{ updateNationalVotes(game.player,2); game.approvals[game.player].app+=4; }},{n:"Ir pessoalmente √†s √°reas afetadas", f:()=>{ updateNationalVotes(game.player,2.5); spendEnergy(15); }}], historical:true},
        {turn:8, t:"ELEI√á√ïES NOS EUA E IMPACTO NO BRASIL", d:"O novo governo americano aumenta tarifas sobre produtos brasileiros. A economia desacelera. O c√¢mbio sobe. Candidatos debatem soberania econ√¥mica vs alinhamento com o mercado global.", b:[{n:"Defender soberania e renegocia√ß√£o", f:()=>{ updateNationalVotes(game.player, game.player==='lula26'||game.player==='aldo'?2.5:1); }},{n:"Propor abertura e parceria com EUA", f:()=>{ updateNationalVotes(game.player, game.player==='zema'||game.player==='flavio'?2.5:1); game.money+=10; }},{n:"Atacar governo pelo desempenho econ√¥mico", f:()=>{ updateNationalVotes(game.player, game.player!=='lula26'?2:-1.5); }}], historical:true},
        {turn:10, t:"RENAN SANTOS E O MOVIMENTO MISS√ÉO", d:"O candidato do MISS√ÉO realiza com√≠cio gigantesco em Bras√≠lia, surpreendendo os analistas. O movimento evang-libert√°rio galvaniza uma nova fatia do eleitorado jovem e religioso.", b:[{n:"Atacar o extremismo do movimento", f:()=>{ updateNationalVotes(game.player, game.player!=='renan'?1.5:-1); }},{n:"Apelar √† modera√ß√£o e democracia", f:()=>{ updateNationalVotes(game.player,2); game.approvals[game.player].app+=4; }},{n:"Tentar absorver pauta religiosa", f:()=>{ updateNationalVotes(game.player, game.player==='caiado'||game.player==='zema'?2.5:0.5); }}], historical:true},
        {turn:12, t:"DEBATE FINAL: TODOS CONTRA TODOS", d:"Debate com os seis candidatos explode em confus√£o. Lula e Fl√°vio trocam acusa√ß√µes pesadas. Zema e Caiado disputam o mesmo espa√ßo. Tebet modera. Renan Santos diz que 'Deus vai dar o resultado'.", b:[{n:"Ataque pesado ao principal rival", f:()=>{ updateNationalVotes(game.player,2.5); game.approvals[game.player].rej+=4; }},{n:"Discurso de proposta e futuro do Brasil", f:()=>{ updateNationalVotes(game.player,2); game.approvals[game.player].app+=5; }},{n:"Momento viral nas redes sociais (R$8M)", f:()=>{ if(game.money>=8){game.money-=8; updateNationalVotes(game.player,3); } }}], historical:true},
    ]
};

// Dados dos cen√°rios dispon√≠veis
const scenariosData = {
    "1994": {
        title:"Elei√ß√µes 1994", year:"1994", emoji:"üí∞",
        desc:"FHC vs Lula. O Plano Real muda tudo.",
        available:true,
        newsHeader:"Folha de S. Pol√≠tica ‚Äî OUTUBRO 1994",
        endYear:"1994",
        partyPoolOverride: [
            {n:"PRN", side:"D", owner: null}, {n:"PSC", side:"D", owner: null}, 
            {n:"PL", side:"D", owner: null}, {n:"PST", side:"C", owner: null},
            {n:"PTdoB", side:"C", owner: null}, {n:"PTR", side:"E", owner: null}, {n:"PV", side:"E", owner: null}
        ],
        candidates: {
            fhc: {name:"FHC", party:"PSDB", start:34, money:50, side:"D", color:"#3366ff", econ:1, soc:0, nat:-1, bio:"Fernando Henrique Cardoso, o arquiteto do Plano Real. Com uma coliga√ß√£o de centro-direita (PSDB-PFL-PTB), sua campanha focou na estabilidade econ√¥mica e no fim da hiperinfla√ß√£o.", ideologia:"Social-Democracia Neoliberal"},
            lula: {name:"LULA", party:"PT", start:26, money:20, side:"E", color:"#ff3333", econ:-2, soc:2, nat:1, bio:"Luiz In√°cio Lula da Silva, a voz do operariado. Liderando a Frente Brasil Popular, resistindo ao Plano Real e focando nas desigualdades sociais.", ideologia:"Socialismo Democr√°tico"},
            quercia: {name:"QU√âRCIA", party:"PMDB", start:10, money:45, side:"C", color:"#15a015", econ:0, soc:0, nat:0, bio:"Orestes Qu√©rcia, a for√ßa da m√°quina do PMDB. Ex-governador de SP, tentou viabilizar uma terceira via.", ideologia:"Centro-Populismo"},
            eneas: {name:"EN√âAS", party:"PRONA", start:7, money:8, side:"X", color:"#555555", econ:-1, soc:-2, nat:2, bio:"En√©as Carneiro, o fen√¥meno do PRONA. 'Meu nome √© En√©as!' Defendia a bomba at√¥mica e o protecionismo.", ideologia:"Nacionalismo Conservador"},
            brizola: {name:"BRIZOLA", party:"PDT", start:9, money:15, side:"E", color:"#ff9900", econ:-1, soc:1, nat:1, bio:"Leonel Brizola, o √∫ltimo herdeiro do Trabalhismo. Veterano da legalidade, focando na educa√ß√£o e na defesa dos interesses nacionais.", ideologia:"Trabalhismo"},
            amin: {name:"AMIN", party:"PPR", start:5, money:30, side:"D", color:"#8b0000", econ:1, soc:-1, nat:1, bio:"Esperidi√£o Amin, ex-governador de Santa Catarina e senador pelo PPR. Representava o conservadorismo sulista, com forte base no Sul do pa√≠s e discurso de ordem e desenvolvimento regional.", ideologia:"Conservadorismo Regional"}
        }
    },
    "1989": {
        title:"Elei√ß√µes 1989", year:"1989", emoji:"üî¥",
        desc:"Primeira elei√ß√£o direta p√≥s-ditadura. Collor x Lula.",
        available:true,
        newsHeader:"Folha de S. Pol√≠tica ‚Äî NOVEMBRO 1989",
        endYear:"1989",
        partyPoolOverride: [
            {n:"PCdoB", side:"E", owner:null},
            {n:"PSB", side:"E", owner:null},
            {n:"PCB",  side:"E", owner:null},
            {n:"PTB",  side:"C", owner:null},
            {n:"PSD",  side:"C", owner:null},
            {n:"PRN",  side:"D", owner:null},
            {n:"PL",   side:"D", owner:null},
            {n:"PJ",   side:"D", owner:null},
            {n:"PRP",  side:"D", owner:null},
        ],
        candidates: {
            collor:    {name:"COLLOR",  party:"PRN",  start:28, money:60, side:"D", color:"#005bbb", econ:2,  soc:-1, nat:0,  bio:"Fernando Collor de Mello, jovem governador de Alagoas. Com o discurso anti-corrup√ß√£o e o slogan 'ca√ßa aos maraj√°s', conquistou o imagin√°rio popular.", ideologia:"Neoliberalismo"},
            lula89:    {name:"LULA",    party:"PT",   start:16, money:15, side:"E", color:"#ff3333", econ:-2, soc:2,  nat:1,  bio:"Luiz In√°cio Lula da Silva em sua primeira grande disputa presidencial, representando o PT e os trabalhadores do ABC paulista.", ideologia:"Socialismo Democr√°tico"},
            brizola89: {name:"BRIZOLA", party:"PDT",  start:14, money:25, side:"E", color:"#ff9900", econ:-1, soc:1,  nat:1,  bio:"Leonel Brizola, o grande favorito inicial. Acabou sendo ultrapassado por Lula para o segundo turno numa das maiores surpresas.", ideologia:"Trabalhismo"},
            maluf:     {name:"MALUF",   party:"PDS",  start:9,  money:55, side:"D", color:"#6600cc", econ:1,  soc:-2, nat:1,  bio:"Paulo Maluf, s√≠mbolo da direita cl√°ssica e da m√°quina pol√≠tica paulista. 'Rouba mas faz' tornaria-se slogan associado ao seu estilo.", ideologia:"Conservadorismo"},
            ulysses:   {name:"ULYSSES", party:"PMDB", start:8,  money:40, side:"C", color:"#15a015", econ:0,  soc:0,  nat:0,  bio:"Ulysses Guimar√£es, presidente da Constituinte. O 'Senhor Diretas' esperava colher os frutos da redemocratiza√ß√£o.", ideologia:"Centro-Democr√°tico"},
            eneas89:   {name:"EN√âAS",   party:"PRONA",start:4,  money:5,  side:"X", color:"#555555", econ:-1, soc:-2, nat:2,  bio:"En√©as Carneiro em sua primeira grande campanha presidencial. J√° defendia a bomba at√¥mica e o nacionalismo radical, com tempo m√≠nimo de TV mas presen√ßa marcante.", ideologia:"Nacionalismo Radical"},
            covas:     {name:"COVAS",   party:"PSDB", start:7,  money:30, side:"D", color:"#0099cc", econ:1,  soc:1,  nat:-1, bio:"M√°rio Covas, fundador do PSDB e senador por S√£o Paulo. Representava a social-democracia moderna num cen√°rio de polariza√ß√£o crescente.", ideologia:"Social-Democracia"},
            caiado:    {name:"CAIADO",  party:"PSD",  start:3,  money:20, side:"D", color:"#cc6600", econ:1,  soc:-2, nat:1,  bio:"Ronaldo Caiado, l√≠der ruralista e fundador da UDR. Candidatura de 1989 representava os interesses do agroneg√≥cio e da direita tradicional.", ideologia:"Ruralismo Conservador"},
            aureliano: {name:"AURELIANO",party:"PFL", start:5,  money:35, side:"D", color:"#990099", econ:1,  soc:-1, nat:0,  bio:"Aureliano Chaves, ex-vice-presidente da rep√∫blica e l√≠der do PFL em Minas Gerais. Candidatura moderada da direita liberal mineira.", ideologia:"Liberalismo Conservador"}
        }
    },
    "2014": {
        title:"Elei√ß√µes 2014", year:"2014", emoji:"üåø",
        desc:"Dilma vs A√©cio. Brasil dividido ao meio.",
        available:true,
        newsHeader:"Folha de S. Pol√≠tica ‚Äî OUTUBRO 2014",
        endYear:"2014",
        partyPoolOverride: [
            {n:"PMDB",  side:"C", owner:null},
            {n:"PP",    side:"D", owner:null},
            {n:"PR",    side:"C", owner:null},
            {n:"PDT",   side:"E", owner:null},
            {n:"PCdoB", side:"E", owner:null},
            {n:"SD",    side:"D", owner:null},
            {n:"PRB",   side:"D", owner:null},
            {n:"PSD",   side:"C", owner:null},
            {n:"PTB",   side:"C", owner:null},
            {n:"DEM",   side:"D", owner:null},
        ],
        candidates: {
            dilma:   {name:"DILMA",   party:"PT",   start:36, money:55, side:"E", color:"#cc0000", econ:-1, soc:2,  nat:1,  bio:"Dilma Rousseff, presidente em exerc√≠cio e candidata √† reelei√ß√£o. Sob ataque pela desacelera√ß√£o econ√¥mica e pelos protestos de 2013, lutava para manter a base petista unida.", ideologia:"Social-Desenvolvimentismo"},
            aecio:   {name:"A√âCIO",   party:"PSDB", start:28, money:50, side:"D", color:"#0044cc", econ:2,  soc:-1, nat:-1, bio:"A√©cio Neves, senador e ex-governador de Minas Gerais. Liderou a oposi√ß√£o tucana prometendo retomar as reformas econ√¥micas e combater a corrup√ß√£o do PT.", ideologia:"Social-Democracia Liberal"},
            marina:  {name:"MARINA",  party:"PSB",  start:22, money:30, side:"C", color:"#33aa33", econ:0,  soc:1,  nat:0,  bio:"Marina Silva, ex-ministra do Meio Ambiente. Ap√≥s a morte de Eduardo Campos, assumiu a candidatura do PSB e surpreendeu com crescimento explosivo nas pesquisas.", ideologia:"Ambientalismo Progressista"},
            luciana: {name:"LUCIANA", party:"PSOL", start:3,  money:8,  side:"E", color:"#ff00aa", econ:-2, soc:2,  nat:1,  bio:"Luciana Genro, deputada federal ga√∫cha e fundadora do PSOL. Representava a esquerda cr√≠tica ao PT, acusando Dilma de capitular ao mercado financeiro.", ideologia:"Socialismo Radical"}
        }
    },
    "2002": {
        title:"Elei√ß√µes 2002", year:"2002", emoji:"üåü",
        desc:"Lula finalmente vence. A Carta ao Povo Brasileiro.",
        available:true,
        newsHeader:"Folha de S. Pol√≠tica ‚Äî OUTUBRO 2002",
        endYear:"2002",
        partyPoolOverride: [
            {n:"PL",    side:"D", owner:null},
            {n:"PTB",   side:"C", owner:null},
            {n:"PMDB",  side:"C", owner:null},
            {n:"PDT",   side:"E", owner:null},
            {n:"PCdoB", side:"E", owner:null},
            {n:"PSB",   side:"E", owner:null},
            {n:"PV",    side:"E", owner:null},
            {n:"PHS",   side:"D", owner:null},
        ],
        candidates: {
            lula02:    {name:"LULA",      party:"PT",   start:33, money:25, side:"E", color:"#ff3333", econ:-1, soc:2,  nat:1,  bio:"Luiz In√°cio Lula da Silva em sua quarta candidatura, desta vez vencedora. Com o slogan 'Lulinha Paz e Amor' e a Carta ao Povo Brasileiro, moderou o discurso e foi eleito com 61% no 2¬∫ turno.", ideologia:"Socialismo Democr√°tico Moderado"},
            serra:     {name:"SERRA",     party:"PSDB", start:20, money:45, side:"D", color:"#3366ff", econ:2,  soc:0,  nat:-1, bio:"Jos√© Serra, ex-ministro da Sa√∫de do governo FHC. Chegou ao 2¬∫ turno mas perdeu para Lula, carregando o peso do desgaste do governo anterior.", ideologia:"Social-Democracia Liberal"},
            garotinho: {name:"GAROTINHO", party:"PSB",  start:15, money:18, side:"C", color:"#cc6600", econ:-1, soc:1,  nat:0,  bio:"Anthony Garotinho, ex-governador do Rio de Janeiro. Com forte apelo evang√©lico e populista, disputou o 3¬∫ lugar com Ciro Gomes ao longo de toda a campanha.", ideologia:"Centro-Crist√£o Popular"},
            ciro02:    {name:"CIRO",      party:"PPS",  start:12, money:22, side:"C", color:"#009900", econ:0,  soc:1,  nat:2,  bio:"Ciro Gomes, ex-governador do Cear√°. Propunha o 'choque de capitalismo' e renegocia√ß√£o da d√≠vida externa. Implodiu a pr√≥pria candidatura com a gafe do 'espi√£o Rosa'.", ideologia:"Nacional-Desenvolvimentismo"},
            zemaria:   {name:"Z√â MARIA",  party:"PSTU", start:0.5,money:3,  side:"E", color:"#8b0000", econ:-2, soc:2,  nat:1,  bio:"Z√© Maria, l√≠der sindical e candidato do PSTU. Representava a esquerda radical cr√≠tica ao PT por ter abandonado suas origens socialistas.", ideologia:"Socialismo Revolucion√°rio"},
            pimenta:   {name:"PIMENTA",   party:"PCO",  start:0.3,money:1,  side:"E", color:"#550000", econ:-2, soc:2,  nat:1,  bio:"Rui Costa Pimenta, candidato do PCO. Defendia o marxismo cl√°ssico e a tomada do poder pela classe trabalhadora. Vota√ß√£o irris√≥ria mas participa√ß√£o em todos os debates.", ideologia:"Comunismo"}
        }
    },
    "2006": {
        title:"Elei√ß√µes 2006", year:"2006", emoji:"‚≠ê",
        desc:"Lula reeleito. Mensal√£o vs Bolsa Fam√≠lia.",
        available:true,
        newsHeader:"Folha de S. Pol√≠tica ‚Äî OUTUBRO 2006",
        endYear:"2006",
        partyPoolOverride: [
            {n:"PP",    side:"D", owner:null},
            {n:"PR",    side:"C", owner:null},
            {n:"PTB",   side:"C", owner:null},
            {n:"PMDB",  side:"C", owner:null},
            {n:"PSB",   side:"E", owner:null},
            {n:"PCdoB", side:"E", owner:null},
            {n:"PV",    side:"E", owner:null},
            {n:"PRB",   side:"D", owner:null},
        ],
        candidates: {
            lula06:    {name:"LULA",      party:"PT",   start:37, money:40, side:"E", color:"#ff3333", econ:-1, soc:2,  nat:1,  bio:"Lula buscava a reelei√ß√£o com o Bolsa Fam√≠lia como escudo e o Mensal√£o como peso. Venceu o 2¬∫ turno com 60,8%, esmagando Alckmin gra√ßas ao eleitorado nordestino.", ideologia:"Social-Desenvolvimentismo"},
            alckmin:   {name:"ALCKMIN",   party:"PSDB", start:30, money:50, side:"D", color:"#0044cc", econ:2,  soc:-1, nat:-1, bio:"Geraldo Alckmin, ex-governador de S√£o Paulo. Candidato competente e agressivo nos debates, mas sem carisma para superar a aprova√ß√£o pessoal de Lula no Nordeste.", ideologia:"Social-Democracia Liberal"},
            heloisa:   {name:"HELO√çSA",   party:"PSOL", start:6,  money:8,  side:"E", color:"#ff00aa", econ:-2, soc:2,  nat:1,  bio:"Helo√≠sa Helena, senadora alagoana do PSOL. Representava a esquerda que n√£o perdoou o PT pelo Mensal√£o. Obteve hist√≥ricos 6,85% no 1¬∫ turno.", ideologia:"Socialismo Radical"},
            cristovam: {name:"CRISTOVAM", party:"PDT",  start:3,  money:10, side:"E", color:"#ff9900", econ:-1, soc:1,  nat:0,  bio:"Cristovam Buarque, senador do DF. Idealizador do Bolsa Escola, precursor do Bolsa Fam√≠lia. Disputou votos com Lula entre o eleitorado educado e progressista.", ideologia:"Social-Democracia Progressista"},
            rangel:    {name:"RANGEL",    party:"PRP",  start:0.5,money:5,  side:"D", color:"#888800", econ:1,  soc:-1, nat:1,  bio:"Ana Maria Rangel, candidata conservadora de pequeno partido. Participou dos debates com discurso de valores tradicionais e fam√≠lia.", ideologia:"Conservadorismo Familiar"},
            eymael:    {name:"EYMAEL",    party:"DC",   start:0.5,money:4,  side:"C", color:"#006633", econ:0,  soc:-1, nat:0,  bio:"Jos√© Maria Eymael, candidato veterano da Democracia Crist√£. Conhecido pelo jingle musical marcante e pelo discurso humanista crist√£o.", ideologia:"Democracia Crist√£"}
        }
    },
    "2018": {
        title:"Elei√ß√µes 2018", year:"2018", emoji:"‚ö°",
        desc:"Bolsonaro x PT. A elei√ß√£o que dividiu o Brasil.",
        available:true,
        newsHeader:"Folha de S. Pol√≠tica ‚Äî OUTUBRO 2018",
        endYear:"2018",
        partyPoolOverride: [
            {n:"PP",      side:"D", owner:null},
            {n:"DEM",     side:"D", owner:null},
            {n:"PRB",     side:"D", owner:null},
            {n:"SD",      side:"D", owner:null},
            {n:"PROS",    side:"C", owner:null},
            {n:"PCdoB",   side:"E", owner:null},
            {n:"PDT",     side:"E", owner:null},
        ],
        candidates: {
            bolsonaro:  {name:"BOLSONARO", party:"PSL",       start:22, money:20, side:"D", color:"#22bb22", econ:2,  soc:-2, nat:2,  bio:"Jair Bolsonaro, deputado federal por 27 anos, nunca antes t√£o popular. Capitalizou o antipetismo, o conservadorismo moral e o discurso anti-sistema para chegar √† presid√™ncia com apoio massivo das redes sociais.", ideologia:"Conservadorismo Nacional-Populista"},
            haddad:     {name:"HADDAD",    party:"PT",        start:20, money:50, side:"E", color:"#ff3333", econ:-1, soc:2,  nat:1,  bio:"Fernando Haddad, ex-prefeito de S√£o Paulo e ex-ministro da Educa√ß√£o. Herdeiro de Lula preso, carregou o peso do PT no momento de maior rejei√ß√£o da sigla.", ideologia:"Social-Desenvolvimentismo"},
            ciro18:     {name:"CIRO",      party:"PDT",       start:11, money:20, side:"C", color:"#ff9900", econ:-1, soc:1,  nat:2,  bio:"Ciro Gomes, governador do Cear√°. Propunha uma terceira via soberanista, cr√≠tico tanto do PT quanto do neoliberalismo. Dono de grandes momentos nos debates mas incapaz de romper a polariza√ß√£o.", ideologia:"Nacional-Desenvolvimentismo"},
            alckmin18:  {name:"ALCKMIN",   party:"PSDB",      start:8,  money:55, side:"D", color:"#0044cc", econ:2,  soc:0,  nat:-1, bio:"Geraldo Alckmin, ex-governador de S√£o Paulo. Candidato da grande m√≠dia e dos grandes empres√°rios, sufocado pela polariza√ß√£o Bolsonaro x PT e pela falta de carisma para furar a bolha.", ideologia:"Social-Democracia Liberal"},
            amedo:      {name:"AM√îEDO",    party:"NOVO",      start:3,  money:15, side:"D", color:"#ff6600", econ:2,  soc:-1, nat:-1, bio:"Jo√£o Am√¥edo, empres√°rio e fundador do Novo. Candidato liberal cl√°ssico que fez da privatiza√ß√£o e do Estado m√≠nimo seu programa de governo.", ideologia:"Liberalismo Cl√°ssico"},
            daciolo:    {name:"DACIOLO",   party:"PATRIOTA",  start:1,  money:5,  side:"D", color:"#336633", econ:0,  soc:-2, nat:2,  bio:"Cabo Daciolo, ex-bombeiro e pastor. Candidato que pregou contra a Nova Ordem Mundial nos debates, tornando-se meme mas atingindo a base militar-religiosa.", ideologia:"Conservadorismo Crist√£o"},
            meirelles:  {name:"MEIRELLES", party:"MDB",       start:2,  money:35, side:"C", color:"#006699", econ:2,  soc:0,  nat:-1, bio:"Henrique Meirelles, ex-ministro da Fazenda de Lula e FHC. Candidato t√©cnico e sem apelo emocional, n√£o conseguiu emplacar como candidato do establishment moderado.", ideologia:"Tecnocracia Liberal"}
        }
    },
    "1998": {
        title:"Elei√ß√µes 1998", year:"1998", emoji:"üìâ",
        desc:"FHC reelei√ß√£o. Crise asi√°tica e Lula vs Ciro.",
        available:true,
        newsHeader:"Folha de S. Pol√≠tica ‚Äî OUTUBRO 1998",
        endYear:"1998",
        partyPoolOverride: [
            {n:"PTB",   side:"C", owner:null},
            {n:"PMDB",  side:"C", owner:null},
            {n:"PPB",   side:"D", owner:null},
            {n:"PL",    side:"D", owner:null},
            {n:"PFL",   side:"D", owner:null},
            {n:"PDT",   side:"E", owner:null},
            {n:"PSB",   side:"E", owner:null},
            {n:"PCdoB", side:"E", owner:null},
        ],
        candidates: {
            fhc98:   {name:"FHC",   party:"PSDB", start:40, money:60, side:"D", color:"#3366ff", econ:2,  soc:0,  nat:-1, bio:"Fernando Henrique Cardoso buscava sua reelei√ß√£o com o Plano Real como trunfo central. Mesmo com a crise asi√°tica pressionando o real, venceu no 1¬∫ turno com 53,1%.", ideologia:"Social-Democracia Liberal"},
            lula98:  {name:"LULA",  party:"PT",   start:23, money:20, side:"E", color:"#ff3333", econ:-2, soc:2,  nat:1,  bio:"Lula em sua terceira candidatura presidencial. Critica a vulnerabilidade externa da economia e defende os trabalhadores, mas o Plano Real limita seu avan√ßo nas pesquisas.", ideologia:"Socialismo Democr√°tico"},
            ciro98:  {name:"CIRO",  party:"PPS",  start:11, money:25, side:"C", color:"#009900", econ:0,  soc:1,  nat:2,  bio:"Ciro Gomes, ex-governador do Cear√° e ex-ministro da Fazenda. Propunha uma terceira via soberanista entre FHC e Lula, com renegocia√ß√£o da d√≠vida externa.", ideologia:"Nacional-Desenvolvimentismo"},
            eneas98: {name:"EN√âAS", party:"PRONA",start:4,  money:5,  side:"X", color:"#555555", econ:-1, soc:-2, nat:2,  bio:"En√©as Carneiro em nova disputa, mantendo o bord√£o 'Meu nome √© En√©as!' e a defesa intransigente do programa nuclear nacional.", ideologia:"Nacionalismo Radical"}
        }
    },
    "2022": {
        title:"Elei√ß√µes 2022", year:"2022", emoji:"üó≥Ô∏è",
        desc:"Lula x Bolsonaro: a disputa mais polarizada.",
        available:true,
        newsHeader:"Folha de S. Pol√≠tica ‚Äî OUTUBRO 2022",
        endYear:"2022",
        partyPoolOverride: [
            {n:"PP",      side:"D", owner:null},
            {n:"PSD",     side:"C", owner:null},
            {n:"REPUBLICANOS", side:"D", owner:null},
            {n:"PCdoB",   side:"E", owner:null},
            {n:"PSOL",    side:"E", owner:null},
            {n:"AVANTE",  side:"C", owner:null},
            {n:"SOLIDARIEDADE", side:"C", owner:null},
        ],
        candidates: {
            bolsonaro22: {name:"BOLSONARO", party:"PL",     start:34, money:55, side:"D", color:"#22bb22", econ:2,  soc:-2, nat:2,  bio:"Jair Bolsonaro buscava a reelei√ß√£o como presidente incumbente. Atacado pela crise econ√¥mica, pandemia e pela guerra √†s urnas, manteve sua base fiel e quase venceu no 2T.", ideologia:"Conservadorismo Nacional-Populista"},
            lula22:      {name:"LULA",      party:"PT",     start:36, money:60, side:"E", color:"#ff3333", econ:-1, soc:2,  nat:1,  bio:"Luiz In√°cio Lula da Silva em sua sexta candidatura presidencial. Voltou da pris√£o, formou ampla coliga√ß√£o da esquerda ao centro e venceu Bolsonaro por 2,1% ‚Äî a margem mais apertada da hist√≥ria.", ideologia:"Social-Desenvolvimentismo"},
            tebet:       {name:"TEBET",     party:"MDB",    start:5,  money:25, side:"C", color:"#006699", econ:0,  soc:1,  nat:-1, bio:"Simone Tebet, senadora do Mato Grosso do Sul. Candidata da terceira via, surpreendeu nos debates com compet√™ncia t√©cnica. Seus 4,2% no 1T foram decisivos para Lula no 2T.", ideologia:"Centro-Democracia Liberal"},
            ciro22:      {name:"CIRO",      party:"PDT",    start:4,  money:18, side:"C", color:"#ff9900", econ:-1, soc:1,  nat:2,  bio:"Ciro Gomes em quarta tentativa. Amargurado com as pesquisas, atacou Lula e Bolsonaro com igual virul√™ncia, viajou √† Europa durante o 2T e decepcionou apoiadores.", ideologia:"Nacional-Desenvolvimentismo"},
            soraya:      {name:"SORAYA",    party:"UNI√ÉO",  start:2,  money:15, side:"D", color:"#cc6600", econ:1,  soc:-1, nat:1,  bio:"Soraya Thronicke, senadora do Mato Grosso do Sul. Candidata de direita com discurso firme contra corrup√ß√£o, mas sem espa√ßo numa elei√ß√£o de polariza√ß√£o extrema.", ideologia:"Direita Liberal Conservadora"},
            davila:      {name:"D'√ÅVILA",   party:"NOVO",   start:1,  money:10, side:"D", color:"#ff6600", econ:2,  soc:-1, nat:-1, bio:"Felipe D'√Åvila, representante do Novo. Candidato liberal cl√°ssico com programa de privatiza√ß√µes abrangente.", ideologia:"Liberalismo Cl√°ssico"},
            kelmon:      {name:"KELMON",    party:"PTB",    start:0.5,money:5,  side:"D", color:"#8b4500", econ:0,  soc:-2, nat:1,  bio:"Padre Kelmon, candidato bolsonarista infiltrado no PTB para atacar Lula nos debates. Tornou-se s√≠mbolo do debate televisionado de 2022 ao fazer ataques coordenados ao PT.", ideologia:"Conservadorismo Crist√£o"},
            pericles:    {name:"P√âRICLES",  party:"UP",     start:0.2,money:3,  side:"E", color:"#8b0000", econ:-2, soc:2,  nat:1,  bio:"L√©o P√©ricles, ativista e candidato da Unidade Popular. Representava a esquerda radical que recusou apoiar Lula no 1T, defendendo uma alternativa socialista.", ideologia:"Socialismo Revolucion√°rio"}
        }
    },
    "2010": {
        title:"Elei√ß√µes 2010", year:"2010", emoji:"üå±",
        desc:"Dilma estreia. Heran√ßa de Lula vs Serra.",
        available:true,
        newsHeader:"Folha de S. Pol√≠tica ‚Äî OUTUBRO 2010",
        endYear:"2010",
        partyPoolOverride: [
            {n:"PMDB",  side:"C", owner:null},
            {n:"PP",    side:"D", owner:null},
            {n:"PR",    side:"C", owner:null},
            {n:"PCdoB", side:"E", owner:null},
            {n:"PRB",   side:"D", owner:null},
            {n:"PSB",   side:"E", owner:null},
            {n:"PDT",   side:"E", owner:null},
        ],
        candidates: {
            dilma10:  {name:"DILMA",   party:"PT",   start:33, money:55, side:"E", color:"#cc0000", econ:-1, soc:2,  nat:1,  bio:"Dilma Rousseff, ex-ministra e candidata de Lula. Nunca antes disputara uma elei√ß√£o. Aprovada pela popularidade de Lula, venceu no 2T com 56% e tornou-se a primeira presidente mulher do Brasil.", ideologia:"Social-Desenvolvimentismo"},
            serra10:  {name:"SERRA",   party:"PSDB", start:28, money:50, side:"D", color:"#0044cc", econ:2,  soc:0,  nat:-1, bio:"Jos√© Serra, ex-governador de S√£o Paulo. Em sua segunda tentativa presidencial, foi incapaz de superar o capital pol√≠tico do governo Lula e perdeu para Dilma no 2T.", ideologia:"Social-Democracia Liberal"},
            marina10: {name:"MARINA",  party:"PV",   start:10, money:15, side:"C", color:"#33aa33", econ:0,  soc:1,  nat:0,  bio:"Marina Silva, ex-ministra e senadora. Com o discurso verde e de renova√ß√£o pol√≠tica, obteve hist√≥ricos 19,3% no 1T ‚Äî at√© ent√£o o maior resultado de um candidato de terceira via.", ideologia:"Ambientalismo Progressista"},
            plinio:   {name:"PL√çNIO",  party:"PSOL", start:2,  money:6,  side:"E", color:"#ff00aa", econ:-2, soc:2,  nat:1,  bio:"Pl√≠nio de Arruda Sampaio, advogado e te√≥logo. Representava a esquerda socialista que se recusou a compactuar com o 'PT de cal√ßas'.", ideologia:"Socialismo Crist√£o"},
            eymael10: {name:"EYMAEL",  party:"DC",   start:0.3,money:4,  side:"C", color:"#006633", econ:0,  soc:-1, nat:0,  bio:"Jos√© Maria Eymael, candidato veterano da Democracia Crist√£. Conhecido pelo jingle e pelo discurso humanista crist√£o em mais uma candidatura.", ideologia:"Democracia Crist√£"}
        }
    },
    "2026": {
        title:"Elei√ß√µes 2026", year:"2026", emoji:"üîÆ",
        desc:"O futuro em disputa. Lula x nova direita.",
        available:true,
        newsHeader:"Folha de S. Pol√≠tica ‚Äî OUTUBRO 2026",
        endYear:"2026",
        partyPoolOverride: [
            {n:"PP",        side:"D", owner:null},
            {n:"REPUBLICANOS", side:"D", owner:null},
            {n:"PCdoB",     side:"E", owner:null},
            {n:"PSOL",      side:"E", owner:null},
            {n:"AVANTE",    side:"C", owner:null},
            {n:"MDB",       side:"C", owner:null},
        ],
        candidates: {
            lula26:   {name:"LULA",    party:"PT",     start:31, money:60, side:"E", color:"#ff3333", econ:-1, soc:2,  nat:1,  bio:"Luiz In√°cio Lula da Silva em sua s√©tima candidatura presidencial. Presidente em exerc√≠cio, buscando reelei√ß√£o com o programa Fome Zero 2.0 e a retomada industrial.", ideologia:"Social-Desenvolvimentismo"},
            flavio:   {name:"FL√ÅVIO",  party:"PL",     start:27, money:50, side:"D", color:"#22bb22", econ:2,  soc:-2, nat:2,  bio:"Fl√°vio Bolsonaro, senador do Rio de Janeiro. Herdeiro direto do bolsonarismo, candidato com apoio do pai via grava√ß√µes dos EUA. Polariza com Lula a disputa principal.", ideologia:"Conservadorismo Nacional-Populista"},
            zema:     {name:"ZEMA",    party:"NOVO",   start:10, money:35, side:"D", color:"#ff6600", econ:2,  soc:-1, nat:-1, bio:"Romeu Zema, ex-governador de Minas Gerais. Candidato do Novo com proposta de Estado m√≠nimo, privatiza√ß√µes amplas e corte de impostos. Tenta ser a alternativa liberal √† polariza√ß√£o.", ideologia:"Liberalismo Cl√°ssico"},
            caiado:   {name:"CAIADO",  party:"PSD",    start:9,  money:30, side:"D", color:"#cc6600", econ:1,  soc:-1, nat:1,  bio:"Ronaldo Caiado, ex-governador de Goi√°s. Candidato da direita tradicional, com forte base ruralista e evang√©lica. Tenta distinguir-se do bolsonarismo sem perder a base.", ideologia:"Conservadorismo Ruralista"},
            renan:    {name:"RENAN S.", party:"MISS√ÉO", start:4, money:10, side:"D", color:"#8b0000", econ:1,  soc:-2, nat:2,  bio:"Renan Santos, l√≠der do movimento MBL e fundador do MISS√ÉO. Candidato jovem libert√°rio-crist√£o que mobiliza universit√°rios direitistas e evang√©licos nas redes sociais.", ideologia:"Libertarianismo Crist√£o"},
            aldo:     {name:"ALDO",    party:"DC",     start:1,  money:5,  side:"C", color:"#006633", econ:0,  soc:-1, nat:1,  bio:"Aldo Rebelo, ex-ministro e parlamentar hist√≥rico da esquerda que migrou para posi√ß√µes nacional-soberanistas. Candidato da Democracia Crist√£ no campo do centro-nacional.", ideologia:"Nacional-Democracia Crist√£"}
        }
    },
    "1934_i": {
        title:"Constituinte 1934", year:"1934", emoji:"üèõÔ∏è", indirect:true,
        desc:"Elei√ß√£o indireta pela Assembleia Constituinte. Get√∫lio Vargas x oposi√ß√£o.",
        available:true,
        context:"A Revolu√ß√£o de 1930 deu origem √† Constitui√ß√£o de 1934. O presidente ser√° escolhido pelos 254 deputados constituintes. Get√∫lio Vargas √© o candidato do governo. A oposi√ß√£o tenta articular alternativas.",
        totalVotes: 254,
        candidates: {
            getulio34: {name:"GET√öLIO VARGAS", party:"Sem Partido", start:140, color:"#cc0000", bio:"L√≠der da Revolu√ß√£o de 1930, presidente provis√≥rio. Controla a m√°quina do governo e tem apoio dos tenentes revolucion√°rios e de v√°rias bancadas estaduais.", ideologia:"Trabalhismo/Populismo"},
            borges:    {name:"BORGES DE MEDEIROS", party:"PRR", start:35, color:"#0044cc", bio:"Veterano pol√≠tico ga√∫cho, ex-aliado de Vargas. Representa a ala conservadora republicana do Rio Grande do Sul.", ideologia:"Republicanismo Conservador"},
            goes:      {name:"G√ìIS MONTEIRO", party:"Sem Partido", start:28, color:"#228800", bio:"General e l√≠der militar da Revolu√ß√£o de 1930. Tem apoio das For√ßas Armadas mas concorre contra seu pr√≥prio aliado.", ideologia:"Militarismo Revolucion√°rio"},
            protogenes:{name:"PROT√ìGENES", party:"Sem Partido", start:18, color:"#886600", bio:"Almirante e pol√≠tico, candidato de setores navais e da oposi√ß√£o moderada.", ideologia:"Moderatismo Naval"},
            plinio34:  {name:"PL√çNIO SALGADO", party:"AIB", start:9, color:"#008888", bio:"L√≠der integralista, o 'Anau√™'. Defensor de ideias fascistas adaptadas ao Brasil. Tem suporte de deputados conservadores antiliberais.", ideologia:"Integralismo"}
        },
        factions: [
            {name:"Bancada Tenentista", votes:52, leans:"getulio34", color:"#cc4444", desc:"Jovens oficiais da Revolu√ß√£o. Apoiam Vargas incondicionalmente."},
            {name:"Bancada Ga√∫cha", votes:28, leans:"borges", color:"#4444cc", desc:"Deputados do RS divididos entre Vargas e Borges."},
            {name:"Bancada Paulista", votes:35, leans:"protogenes", color:"#aa8800", desc:"Oposi√ß√£o ao centralismo varguista ap√≥s a Revolu√ß√£o Constitucionalista de 1932."},
            {name:"Bancada Militar", votes:30, leans:"goes", color:"#228800", desc:"Militares que acompanham G√≥is Monteiro."},
            {name:"Integralistas", votes:18, leans:"plinio34", color:"#008888", desc:"Deputados simp√°ticos ao sigma integralista de Pl√≠nio Salgado."},
            {name:"Indecisos", votes:91, leans:null, color:"#888888", desc:"Bancadas estaduais sem posi√ß√£o definida. Alvo principal das articula√ß√µes."}
        ],
        events: [
            {turn:2, t:"REVOLU√á√ÉO CONSTITUCIONALISTA", d:"Paulistas exigem constitui√ß√£o. Vargas concedeu ‚Äî a Constituinte est√° reunida. Mas a desconfian√ßa dos paulistas persiste. Como voc√™ se posiciona?", b:[{n:"Reconcilia√ß√£o com S√£o Paulo",f:()=>indirectShiftVotes('getulio34',8)},{n:"Ignorar; manter base do Norte/NE",f:()=>indirectShiftVotes('getulio34',4)}]},
            {turn:4, t:"MANIFESTO DOS TENENTES", d:"Os tenentes revolucion√°rios lan√ßam manifesto de apoio a Vargas. Deputados indecisos ficam com medo de desagradar os militares.", b:[{n:"Usar o manifesto politicamente",f:()=>indirectShiftVotes('getulio34',10)},{n:"Recusar o militarismo",f:()=>indirectShiftFaction('Indecisos',6,'getulio34')}]},
            {turn:6, t:"DEBATE SOBRE VOTO FEMININO", d:"A nova Constitui√ß√£o incluir√° voto feminino pela 1¬™ vez. Deputados progressistas e conservadores dividem opini√µes.", b:[{n:"Defender o voto feminino",f:()=>indirectShiftVotes('getulio34',5)},{n:"Manter tradi√ß√£o",f:()=>indirectShiftVotes('plinio34',4)}]},
            {turn:8, t:"ARTICULA√á√ÉO DOS ESTADOS", d:"Governadores dos estados do Norte e Nordeste re√∫nem bancadas em favor do candidato do governo federal.", b:[{n:"Confirmar compromissos regionais",f:()=>indirectShiftVotes('getulio34',12)},{n:"Propor autonomia estadual ampla",f:()=>indirectShiftFaction('Indecisos',8,'getulio34')}]}
        ]
    },
    "1964_i": {
        title:"Golpe de 1964", year:"1964", emoji:"‚öîÔ∏è", indirect:true,
        desc:"Ap√≥s o golpe, o Congresso escolhe o presidente. Militares controlam o processo.",
        available:true,
        context:"Jo√£o Goulart foi deposto em 1¬∫ de abril de 1964. O Congresso mutilado pelo AI-1 deve escolher um presidente. Os militares imp√µem Castelo Branco. A oposi√ß√£o tenta resistir mas est√° enfraquecida.",
        totalVotes: 326,
        candidates: {
            castelo:   {name:"CASTELO BRANCO", party:"Sem Partido", start:180, color:"#004488", bio:"General e l√≠der do golpe. Candidato dos militares 'linha dura'. Prometeu uma transi√ß√£o r√°pida, mas governou por 3 anos.", ideologia:"Militarismo Moderado"},
            tavora:    {name:"JU√ÅREZ T√ÅVORA", party:"PDC", start:80, color:"#338833", bio:"General rival de Castelo. Candidato de setores da oposi√ß√£o democr√°tico-crist√£ que tentou viabilizar uma alternativa civil-militar ao golpe.", ideologia:"Democracia Crist√£ Militar"},
            dutra:     {name:"DUTRA", party:"PSD", start:40, color:"#aa6600", bio:"Ex-presidente Eurico Gaspar Dutra, veterano do PSD. Representava a ala mais conservadora e fisiol√≥gica que queria manter influ√™ncia no novo regime.", ideologia:"Conservadorismo Fisiol√≥gico"}
        },
        factions: [
            {name:"Militares Linha Dura", votes:120, leans:"castelo", color:"#004488", desc:"Generais e coron√©is golpistas. Imp√µem Castelo como presidente."},
            {name:"Bloco da UDN", votes:90, leans:"castelo", color:"#0066aa", desc:"Uni√£o Democr√°tica Nacional. Principal partido apoiador do golpe."},
            {name:"PSD Conservador", votes:60, leans:"dutra", color:"#aa6600", desc:"Partido Social Democr√°tico. Fisiol√≥gico, apoia quem vencer."},
            {name:"PTB Resistente", votes:35, leans:"tavora", color:"#cc4400", desc:"Partido Trabalhista Brasileiro. Enfraquecido ap√≥s queda de Jango."},
            {name:"PDC e Aliados", votes:21, leans:"tavora", color:"#338833", desc:"Partido Democr√°tico Crist√£o e outros pequenos partidos."}
        ],
        events: [
            {turn:2, t:"AI-1: CASSA√á√ÉO DE MANDATOS", d:"O Ato Institucional N¬∫1 cassa mandatos de 40 parlamentares. O Congresso fica mais control√°vel pelos militares. Como voc√™ age?", b:[{n:"Apoiar as cassa√ß√µes",f:()=>indirectShiftVotes('castelo',15)},{n:"Protestar nos limites do permitido",f:()=>indirectShiftVotes('tavora',8)}]},
            {turn:3, t:"IP√äS E IBAD: FINANCIAMENTO DO GOLPE", d:"O Instituto de Pesquisas e Estudos Sociais revela que financiou a campanha antigolpista. O empresariado apoia os militares.", b:[{n:"Alinhar com o empresariado",f:()=>indirectShiftVotes('castelo',12)},{n:"Denunciar o financiamento",f:()=>indirectShiftVotes('tavora',5)}]},
            {turn:5, t:"PRESS√ÉO DOS GENERAIS", d:"Os generais reunidos pressionam o Congresso: votem em Castelo Branco ou sofrer√£o consequ√™ncias. Deputados com medo.", b:[{n:"Ceder √† press√£o",f:()=>indirectShiftFaction('PTB Resistente',15,'castelo')},{n:"Resistir simbolicamente",f:()=>indirectShiftVotes('tavora',4)}]},
            {turn:7, t:"JANGO NO EX√çLIO APELA AO CONGRESSO", d:"Jo√£o Goulart, do Uruguai, manda mensagem pedindo resist√™ncia constitucional. Poucos ousam seguir.", b:[{n:"Homenagem a Jango",f:()=>indirectShiftVotes('tavora',6)},{n:"Sil√™ncio pragm√°tico",f:()=>indirectShiftVotes('dutra',5)}]}
        ]
    },
    "1974_i": {
        title:"Col√©gio Eleitoral 1974", year:"1974", emoji:"üéñÔ∏è", indirect:true,
        desc:"ARENA vs MDB. Geisel deve ser eleito pelo Col√©gio Eleitoral.",
        available:true,
        context:"O regime militar est√° no auge. O presidente M√©dici escolheu Ernesto Geisel como seu sucessor. O Col√©gio Eleitoral, dominado pela ARENA, eleger√° o pr√≥ximo presidente. O MDB lan√ßa Ulysses como candidato simb√≥lico.",
        totalVotes: 503,
        candidates: {
            geisel:    {name:"GEISEL", party:"ARENA", start:310, color:"#004488", bio:"General ga√∫cho escolhido pelo presidente M√©dici. Prometeu uma abertura 'lenta, gradual e segura'. Acabou extinguindo o AI-5.", ideologia:"Militarismo Moderado ‚Äî Abertura"},
            ulysses74: {name:"ULYSSES", party:"MDB", start:140, color:"#cc2200", bio:"Ulysses Guimar√£es, presidente do MDB. Chamou sua candidatura de 'anticandidata', sabendo que perderia. Transformou a campanha em manifesto pela democracia.", ideologia:"Social-Democracia Oposicionista"}
        },
        factions: [
            {name:"ARENA Nacional", votes:240, leans:"geisel", color:"#0044cc", desc:"Partido do governo. Voto obrigat√≥rio em Geisel."},
            {name:"ARENA Dissidentes", votes:40, leans:"geisel", color:"#6688cc", desc:"Ala da ARENA que questionava a escolha de Geisel mas cedia √† disciplina partid√°ria."},
            {name:"MDB Oposi√ß√£o", votes:160, leans:"ulysses74", color:"#cc2200", desc:"Bancada do MDB. Vota em Ulysses por princ√≠pio, sem esperan√ßa de vit√≥ria."},
            {name:"Indecisos", votes:63, leans:null, color:"#888888", desc:"Senadores e deputados sem partido definido ou com lealdades cruzadas."}
        ],
        events: [
            {turn:2, t:"M√âDICI INDICA GEISEL OFICIALMENTE", d:"Presidente M√©dici anuncia Geisel como candidato da ARENA. Os parlamentares da ARENA recebem 'orienta√ß√µes' sobre o voto.", b:[{n:"Refor√ßar disciplina partid√°ria",f:()=>indirectShiftFaction('ARENA Dissidentes',15,'geisel')},{n:"Abrir espa√ßo para debate",f:()=>indirectShiftVotes('ulysses74',8)}]},
            {turn:3, t:"MILAGRE ECON√îMICO: CRESCIMENTO DE 11%", d:"O PIB cresceu 11% em 1973. O regime usa o crescimento como argumento para manter o poder.", b:[{n:"Celebrar o milagre",f:()=>indirectShiftVotes('geisel',15)},{n:"Denunciar: 'Milagre para quem?'",f:()=>indirectShiftVotes('ulysses74',10)}]},
            {turn:5, t:"CAMPANHA 'ANTICANDIDATA' DE ULYSSES", d:"Ulysses percorre o Brasil dizendo que vai perder mas quer mostrar que h√° oposi√ß√£o viva. Mobiliza a sociedade civil.", b:[{n:"Acompanhar Ulysses pelo Brasil",f:()=>indirectShiftVotes('ulysses74',12)},{n:"Boicotar a campanha opositora",f:()=>indirectShiftVotes('geisel',6)}]},
            {turn:7, t:"SNI MONITORA PARLAMENTARES", d:"O Servi√ßo Nacional de Informa√ß√µes monitora e intimida parlamentares da oposi√ß√£o. Clima de medo no Congresso.", b:[{n:"Resistir √† intimida√ß√£o",f:()=>indirectShiftVotes('ulysses74',8)},{n:"Ceder √† press√£o do regime",f:()=>indirectShiftFaction('Indecisos',20,'geisel')}]}
        ]
    },
    "1978_i": {
        title:"Col√©gio Eleitoral 1978", year:"1978", emoji:"üîì", indirect:true,
        desc:"√öltimo presidente do regime militar eleito pelo Col√©gio Eleitoral.",
        available:true,
        context:"Geisel conduz a abertura. O Col√©gio Eleitoral eleger√° o general Jo√£o Figueiredo, o √∫ltimo presidente militar. O MDB lan√ßa Euler Bentes Monteiro como candidato real, com alguma chance ‚Äî a abertura j√° permite mais debate.",
        totalVotes: 503,
        candidates: {
            figueiredo:{name:"FIGUEIREDO", party:"ARENA", start:300, color:"#334499", bio:"General do SNI, escolhido por Geisel como seu sucessor. Prometeu 'fazer desse pa√≠s uma democracia'. Governou at√© 1985, decretou a Anistia e a redemocratiza√ß√£o.", ideologia:"Militarismo Liberal ‚Äî Abertura"},
            euler:     {name:"EULER BENTES", party:"MDB", start:170, color:"#cc3300", bio:"General dissidente e candidato do MDB. Diferente de Ulysses em 1974, Euler tinha apoio real de setores militares descontentes com a escolha de Figueiredo.", ideologia:"Militarismo Democr√°tico ‚Äî Oposi√ß√£o"}
        },
        factions: [
            {name:"ARENA Governista", votes:220, leans:"figueiredo", color:"#334499", desc:"Bloco fiel ao candidato de Geisel."},
            {name:"ARENA Moderada", votes:60, leans:"figueiredo", color:"#6677bb", desc:"ARENA que simpatizava com a abertura mas votava no candidato oficial."},
            {name:"MDB Oposi√ß√£o", votes:170, leans:"euler", color:"#cc3300", desc:"Todo o MDB unido em torno de Euler Bentes."},
            {name:"Militares Dissidentes", votes:30, leans:"euler", color:"#8b2200", desc:"Generais que preferiam Euler a Figueiredo por quest√µes pessoais."},
            {name:"Indecisos", votes:23, leans:null, color:"#888888", desc:"Pequeno grupo de parlamentares sem posi√ß√£o definida."}
        ],
        events: [
            {turn:2, t:"PACOTE DE ABRIL: GEISEL AUMENTA PODER", d:"Geisel edita o 'Pacote de Abril' que altera a composi√ß√£o do Congresso para garantir maioria da ARENA.", b:[{n:"Denunciar o Pacote de Abril",f:()=>indirectShiftVotes('euler',15)},{n:"Aceitar como parte da abertura",f:()=>indirectShiftVotes('figueiredo',8)}]},
            {turn:3, t:"ANISTIA EM DEBATE", d:"O MDB pressiona por Anistia ampla e irrestrita. O governo quer uma anistia limitada. Ambos os candidatos se posicionam.", b:[{n:"Defender Anistia ampla",f:()=>indirectShiftVotes('euler',12)},{n:"Apoiar Anistia restrita governista",f:()=>indirectShiftVotes('figueiredo',8)}]},
            {turn:5, t:"MOVIMENTO GREVISTA DO ABC PAULISTA", d:"Lula e o sindicato dos metal√∫rgicos deflagam greve hist√≥rica. O governo usa a Lei de Seguran√ßa Nacional.", b:[{n:"Apoiar os trabalhadores em greve",f:()=>indirectShiftVotes('euler',10)},{n:"Defender a ordem",f:()=>indirectShiftVotes('figueiredo',6)}]},
            {turn:7, t:"FIGUEIREDO SOFRE PRESS√ÉO DOS DUROS", d:"A 'linha dura' militar questiona a abertura de Geisel/Figueiredo. Atentados terroristas de direita complicam o quadro.", b:[{n:"Recusar a linha dura",f:()=>indirectShiftVotes('euler',8)},{n:"Manter unidade militar",f:()=>indirectShiftFaction('ARENA Governista',10,'figueiredo')}]}
        ]
    },
    "1985_i": {
        title:"Diretas J√°! ‚Äî 1985", year:"1985", emoji:"üåü", indirect:true,
        desc:"Fim da ditadura. Tancredo x Maluf no Col√©gio Eleitoral.",
        available:true,
        context:"O Brasil inteiro saiu √†s ruas pedindo elei√ß√µes diretas ‚Äî mas a emenda Dante de Oliveira foi rejeitada. O Col√©gio Eleitoral decidir√°. Tancredo Neves, da PMDB, em alian√ßa com o PDS dissidente de Jos√© Sarney, enfrenta Paulo Maluf.",
        totalVotes: 686,
        candidates: {
            tancredo:  {name:"TANCREDO NEVES", party:"PMDB", start:360, color:"#009933", bio:"Mineiro moderado, ex-primeiro-ministro. S√≠mbolo da redemocratiza√ß√£o. Ganhou o Col√©gio Eleitoral mas adoeceu antes da posse ‚Äî nunca tomou posse como presidente. Morreu em 21 de abril de 1985.", ideologia:"Centro-Democr√°tico"},
            maluf85:   {name:"PAULO MALUF", party:"PDS", start:290, color:"#6600cc", bio:"Ex-governador de S√£o Paulo, o candidato do regime militar. 'Rouba mas faz'. Perdeu pela primeira vez na vida, mas negou at√© o fim.", ideologia:"Conservadorismo Fisiol√≥gico"}
        },
        factions: [
            {name:"PMDB + Alian√ßa Democr√°tica", votes:300, leans:"tancredo", color:"#009933", desc:"Grande base peemedebista e aliados da oposi√ß√£o democr√°tica."},
            {name:"PDS Dissidente (Frente Liberal)", votes:80, leans:"tancredo", color:"#55aa44", desc:"Ala do PDS que rompeu com Maluf e formou a Frente Liberal com Sarney como vice."},
            {name:"PDS Malufista", votes:240, leans:"maluf85", color:"#6600cc", desc:"A m√°quina do PDS leal a Maluf. Disciplinada mas j√° minoria."},
            {name:"Indecisos PDS", votes:50, leans:null, color:"#aa66cc", desc:"Parlamentares do PDS em d√∫vida entre a lealdade partid√°ria e a press√£o popular."},
            {name:"Pequenos Partidos", votes:16, leans:"tancredo", color:"#888888", desc:"PTB, PP e outros pequenos partidos que apoiaram Tancredo."}
        ],
        events: [
            {turn:2, t:"DIRETAS J√Å! ‚Äî MULTID√ïES NAS RUAS", d:"Mais de 1 milh√£o de pessoas na Candel√°ria e no Vale do Anhangaba√∫ pedem elei√ß√µes diretas. O Col√©gio Eleitoral sob press√£o moral.", b:[{n:"Capitalizar as Diretas para pressionar PDS",f:()=>indirectShiftFaction('Indecisos PDS',20,'tancredo')},{n:"Propor acordo de transi√ß√£o",f:()=>indirectShiftVotes('tancredo',15)}]},
            {turn:3, t:"SARNEY ROMPE COM MALUF E SE UNE A TANCREDO", d:"Jos√© Sarney, presidente do PDS, abandona Maluf e aceita ser vice de Tancredo. A Frente Liberal nasce. A m√°quina do PDS racha.", b:[{n:"Absorver o PDS dissidente",f:()=>indirectShiftFaction('PDS Dissidente (Frente Liberal)',15,'tancredo')},{n:"Garantir programa democr√°tico s√≥lido",f:()=>indirectShiftVotes('tancredo',12)}]},
            {turn:5, t:"FIGUEIREDO RECUSA TRANSMITIR A MALUF", d:"Figueiredo declara que prefere n√£o transmitir a faixa a Maluf. Sinal de que o regime n√£o apoia mais seu candidato.", b:[{n:"Usar declara√ß√£o para conquistar indecisos",f:()=>indirectShiftFaction('Indecisos PDS',25,'tancredo')},{n:"Pressionar Figueiredo a apoiar Tancredo",f:()=>indirectShiftVotes('tancredo',8)}]},
            {turn:7, t:"√öLTIMA HORA: MALUF TENTA BARGANHAS", d:"Maluf oferece minist√©rios e cargos em troca de votos. √öltima tentativa desesperada antes da vota√ß√£o.", b:[{n:"Denunciar a compra de votos",f:()=>indirectShiftVotes('tancredo',10)},{n:"Ceder √†s barganhas (jogo sujo)",f:()=>indirectShiftVotes('maluf85',15)}]},
            {turn:9, t:"VOTA√á√ÉO FINAL NO COL√âGIO", d:"15 de janeiro de 1985. O momento hist√≥rico. O Col√©gio vota. A democracia retorna?", b:[{n:"Discurso hist√≥rico pela democracia",f:()=>indirectShiftFaction('Indecisos PDS',18,'tancredo')},{n:"Garantir votos com articula√ß√£o final",f:()=>indirectShiftVotes('tancredo',20)}]}
        ]
    },
    "1938_nc": {
        title:"Elei√ß√µes 1938 (Cancelada)", year:"1938", emoji:"üö´", cancelled:true,
        desc:"Vargas deu golpe do Estado Novo e cancelou as elei√ß√µes.",
        available:true,
        newsHeader:"Folha de S. Pol√≠tica ‚Äî JANEIRO 1938",
        endYear:"1938",
        context:"As elei√ß√µes de 1938 foram canceladas quando Vargas decretou o Estado Novo em novembro de 1937, transformando o Brasil em ditadura. A simula√ß√£o reconstitui como teria sido a disputa.",
        partyPoolOverride: [
            {n:"PSP", side:"C", owner:null},
            {n:"PRR", side:"D", owner:null},
            {n:"PRC", side:"C", owner:null},
        ],
        candidates: {
            armando:  {name:"ARMANDO SALLES",  party:"UDB",           start:30, money:40, side:"D", color:"#0044cc", econ:1,  soc:-1, nat:0,  bio:"Armando de Salles Oliveira, ex-governador de SP. Candidato liberal-constitucionalista, maior amea√ßa ao getulismo. Foi exilado quando Vargas decretou o Estado Novo.", ideologia:"Liberalismo Constitucional"},
            jose_am:  {name:"JOS√â AM√âRICO",    party:"Sem Partido",   start:28, money:30, side:"C", color:"#cc6600", econ:-1, soc:1,  nat:1,  bio:"Jos√© Am√©rico de Almeida, ex-ministro e escritor nordestino. Candidato da situa√ß√£o que rompeu com Vargas. Sua censura pela imprensa getulista foi sinal do fim da democracia.", ideologia:"Populismo Nordestino"},
            plinio38: {name:"PL√çNIO SALGADO",  party:"AIB",           start:20, money:20, side:"X", color:"#008888", econ:0,  soc:-2, nat:2,  bio:"L√≠der integralista. Ap√≥s o Estado Novo, tentou um golpe integralista em 1938 e foi preso. O AIB foi o √∫nico movimento de massa de direita radical do Brasil.", ideologia:"Integralismo Fascista"}
        }
    },
    "1945": {
        title:"Elei√ß√µes 1945", year:"1945", emoji:"üïäÔ∏è",
        desc:"Redemocratiza√ß√£o. Dutra vs Eduardo Gomes.",
        available:true,
        newsHeader:"Folha de S. Pol√≠tica ‚Äî DEZEMBRO 1945",
        endYear:"1945",
        partyPoolOverride: [
            {n:"PTB", side:"C", owner:null},
            {n:"PSP", side:"C", owner:null},
            {n:"PST", side:"C", owner:null},
        ],
        candidates: {
            dutra:    {name:"DUTRA",          party:"PSD", start:35, money:45, side:"D", color:"#0044cc", econ:1,  soc:-1, nat:0,  bio:"General Eurico Gaspar Dutra, ex-ministro de Vargas. Apesar de ser do regime, venceu com apoio do PTB de Vargas. Governa de forma conservadora e alinha o Brasil com os EUA na Guerra Fria.", ideologia:"Conservadorismo Liberal"},
            eduardo45:{name:"EDUARDO GOMES",  party:"UDN", start:30, money:35, side:"D", color:"#cc3300", econ:2,  soc:-1, nat:-1, bio:"Brigadeiro Eduardo Gomes, her√≥i dos 18 do Forte. Candidato da UDN, partido dos liberais anti-Vargas. Derrotado por Dutra, ficou marcado pela frase ap√≥crifa 'n√£o preciso de votos de ot√°rios'.", ideologia:"Liberalismo Anti-getulista"},
            yedo:     {name:"YEDO FI√öZA",     party:"PCB", start:10, money:10, side:"E", color:"#cc0000", econ:-2, soc:2,  nat:1,  bio:"Yedo Fi√∫za, engenheiro. O candidato comunista obteve 9,7% ‚Äî o maior resultado do PCB na hist√≥ria. Foi logo cassado quando o PCB foi declarado ilegal em 1947.", ideologia:"Comunismo"}
        }
    },
    "1950": {
        title:"Elei√ß√µes 1950", year:"1950", emoji:"üî•",
        desc:"Vargas retorna pelo voto. 'Eu voltarei!'",
        available:true,
        newsHeader:"Folha de S. Pol√≠tica ‚Äî OUTUBRO 1950",
        endYear:"1950",
        partyPoolOverride: [
            {n:"PSD", side:"C", owner:null},
            {n:"PSP", side:"C", owner:null},
            {n:"PL",  side:"D", owner:null},
        ],
        candidates: {
            getulio50:{name:"GET√öLIO",    party:"PTB", start:40, money:50, side:"C", color:"#cc0000", econ:-1, soc:2,  nat:1,  bio:"Get√∫lio Vargas, o 'pai dos pobres'. Retornou ao poder pelo voto direto, cumpriu sua promessa. Governa at√© 1954, quando se suicida com carta-testamento hist√≥rica.", ideologia:"Trabalhismo Nacional-Populista"},
            ed_gomes: {name:"GOMES",      party:"UDN", start:28, money:35, side:"D", color:"#0044cc", econ:2,  soc:-1, nat:-1, bio:"Eduardo Gomes em sua segunda candidatura presidencial. A UDN perdeu novamente para Vargas, mantendo sua postura de oposi√ß√£o intransigente ao getulismo.", ideologia:"Liberalismo Conservador"},
            cristiano:{name:"CRISTIANO",  party:"PSD", start:18, money:25, side:"D", color:"#886600", econ:1,  soc:0,  nat:0,  bio:"Cristiano Machado, candidato do PSD que foi t√£o fraco que os pr√≥prios peeessedebistas votaram em Vargas ‚Äî fen√¥meno chamado de 'cristianiza√ß√£o'. Obteve apenas 10%.", ideologia:"Conservadorismo Fisiol√≥gico"}
        }
    },
    "1955": {
        title:"Elei√ß√µes 1955", year:"1955", emoji:"üöÇ",
        desc:"JK e Cinquenta Anos em Cinco.",
        available:true,
        newsHeader:"Folha de S. Pol√≠tica ‚Äî OUTUBRO 1955",
        endYear:"1955",
        partyPoolOverride: [
            {n:"PTB", side:"C", owner:null},
            {n:"PST", side:"C", owner:null},
            {n:"PL",  side:"D", owner:null},
        ],
        candidates: {
            jk:       {name:"JK",          party:"PSD",  start:33, money:50, side:"C", color:"#cc6600", econ:0,  soc:1,  nat:1,  bio:"Juscelino Kubitschek, ex-governador de Minas Gerais. Venceu com apenas 36% dos votos gra√ßas √† divis√£o da direita. Construiu Bras√≠lia, trouxe a ind√∫stria automobil√≠stica e governou com democracia.", ideologia:"Desenvolvimentismo Democr√°tico"},
            tavora55: {name:"T√ÅVORA",       party:"UDN",  start:28, money:40, side:"D", color:"#0044cc", econ:2,  soc:-1, nat:0,  bio:"Juarez T√°vora, o 'cabo eleitoral de Deus'. Candidato da UDN, perdeu para JK por diferen√ßa pequena. Apoiou a tentativa de golpe militar para impedir a posse de JK.", ideologia:"Militar Liberal"},
            adhemar55:{name:"ADHEMAR",      party:"PSP",  start:22, money:30, side:"C", color:"#8b0000", econ:-1, soc:1,  nat:1,  bio:"Adhemar de Barros, ex-governador de SP e pioneiro do populismo paulista. O slogan 'rouba mas faz' √© frequentemente associado a ele. Ficou em terceiro.", ideologia:"Populismo Paulista"},
            plinio55: {name:"PL√çNIO",       party:"PRP",  start:9,  money:15, side:"D", color:"#006666", econ:0,  soc:-2, nat:2,  bio:"Pl√≠nio Salgado, l√≠der integralista e fundador do Partido da Representa√ß√£o Popular. Candidato anticomunista ferrenho, recebeu 714 mil votos (8,3%) em sua √∫nica candidatura presidencial direta.", ideologia:"Integralismo"}
        }
    },
    "1960": {
        title:"Elei√ß√µes 1960", year:"1960", emoji:"üßπ",
        desc:"J√¢nio Quadros varre a corrup√ß√£o.",
        available:true,
        newsHeader:"Folha de S. Pol√≠tica ‚Äî OUTUBRO 1960",
        endYear:"1960",
        partyPoolOverride: [
            {n:"PTB", side:"C", owner:null},
            {n:"PDC", side:"C", owner:null},
            {n:"PRT", side:"E", owner:null},
        ],
        candidates: {
            janio:    {name:"J√ÇNIO",      party:"PTN",  start:40, money:45, side:"C", color:"#006600", econ:1,  soc:0,  nat:1,  bio:"J√¢nio Quadros, ex-governador de SP. Venceu com 48% usando a vassoura como s√≠mbolo de limpeza. Renunciou misteriosamente em agosto de 1961 ap√≥s apenas 7 meses de mandato.", ideologia:"Moralismo Liberal"},
            lott:     {name:"LOTT",       party:"PSD",  start:28, money:35, side:"C", color:"#0044cc", econ:0,  soc:1,  nat:0,  bio:"Henrique Teixeira Lott, general legalista. Candidato do PSD+PTB (JK+Jango). Perdeu para J√¢nio, mas como vice de Jango assumiu a presid√™ncia ap√≥s a ren√∫ncia de J√¢nio.", ideologia:"Militarismo Democr√°tico"},
            adhemar60:{name:"ADHEMAR",    party:"PSP",  start:18, money:25, side:"C", color:"#8b0000", econ:-1, soc:1,  nat:1,  bio:"Adhemar de Barros em terceiro lugar novamente. Sempre amea√ßa, nunca vence. O populismo paulista encontrava seus limites no plano nacional.", ideologia:"Populismo Paulista"}
        }
    },
    "1965_nc": {
        title:"Elei√ß√µes 1965 (Cancelada)", year:"1965", emoji:"üö´", cancelled:true,
        desc:"Elei√ß√µes canceladas pelo AI-2 ap√≥s o golpe de 1964.",
        available:true,
        newsHeader:"Folha de S. Pol√≠tica ‚Äî OUTUBRO 1965",
        endYear:"1965",
        context:"As elei√ß√µes presidenciais de 1965 nunca ocorreram. O golpe de 1964 e o AI-2 extinguiram os partidos pol√≠ticos e institu√≠ram o bipartidarismo ARENA x MDB. Esta simula√ß√£o reconstitui como teria sido a disputa.",
        partyPoolOverride: [
            {n:"PSB", side:"E", owner:null},
            {n:"PDC", side:"C", owner:null},
            {n:"PRT", side:"C", owner:null},
        ],
        candidates: {
            lacerda:  {name:"LACERDA",    party:"UDN",  start:25, money:40, side:"D", color:"#0044cc", econ:2,  soc:-1, nat:-1, bio:"Carlos Lacerda, jornalista e ex-governador do Rio. Apoiou o golpe de 1964 mas depois rompeu com os militares. Fundou a Frente Ampla com JK e Jango.", ideologia:"Liberalismo Anti-getulista"},
            janio65:  {name:"J√ÇNIO",      party:"PTN",  start:20, money:30, side:"C", color:"#006600", econ:1,  soc:0,  nat:1,  bio:"J√¢nio Quadros tentaria retornar √† presid√™ncia. Nunca conseguiu ‚Äî o golpe encerrou essa possibilidade, e sua ren√∫ncia de 1961 era uma mancha irrepar√°vel.", ideologia:"Moralismo Liberal"},
            jk65:     {name:"JK",         party:"PSD",  start:22, money:35, side:"C", color:"#cc6600", econ:0,  soc:1,  nat:1,  bio:"Juscelino Kubitschek, ex-presidente. Tinha o prest√≠gio de Bras√≠lia mas seu mandato de cassa√ß√£o pelo AI-1 o mantinha afastado da pol√≠tica. Nunca p√¥de disputar.", ideologia:"Desenvolvimentismo Democr√°tico"},
            brizola:  {name:"BRIZOLA",    party:"PTB",  start:18, money:20, side:"E", color:"#cc0000", econ:-1, soc:2,  nat:1,  bio:"Leonel Brizola, ex-governador do RS. Radical da esquerda trabalhista, cunhado de Jango. Foi um dos mais perseguidos pelo regime militar, exilado por anos.", ideologia:"Trabalhismo Radical"},
            arraes:   {name:"ARRAES",     party:"PST",  start:10, money:15, side:"E", color:"#aa0033", econ:-2, soc:2,  nat:1,  bio:"Miguel Arraes, governador de Pernambuco preso no golpe de 1964. Representava a esquerda nordestina e o movimento das Ligas Camponesas.", ideologia:"Socialismo Nordestino"}
        }
    },
    "1945_l": {title:"Elei√ß√µes 1938", year:"1938", emoji:"üîí", desc:"Estado Novo cancelou elei√ß√µes", available:false, desc_locked:"Adicionado ‚Äî ver aba Presidenciais"},
    // ============================================================
    // REP√öBLICA VELHA (1894‚Äì1930) ‚Äî integradas nas presidenciais BR
    // ============================================================
    "RV1894": {
        title:"Elei√ß√µes 1894", year:"1894", emoji:"‚òï",
        desc:"Prudente de Moraes vs Afonso Pena. 1¬™ elei√ß√£o civil da Rep√∫blica.",
        available:true, noSecondRound:true, isRepVelha:true,
        newsHeader:"Gazeta de Not√≠cias ‚Äî MAR√áO 1894",
        endYear:"1894",
        partyPoolOverride:[{n:"PRP",side:"D",owner:null},{n:"PRM",side:"D",owner:null}],
        candidates:{
            prudente: {name:"PRUDENTE",      party:"PRP", start:84, money:40, side:"D", color:"#cc6600", econ:1, soc:-1, nat:0, bio:"Prudente de Moraes, l√≠der republicano paulista. Primeiro presidente civil do Brasil. Venceu com 84% por ser o candidato da m√°quina republicana paulista.", ideologia:"Republicanismo Paulista"},
            afonso94: {name:"AFONSO PENA",   party:"PRM", start:10, money:20, side:"D", color:"#004488", econ:0, soc:0, nat:1, bio:"Afonso Pena, representante mineiro. Candidato da oposi√ß√£o simb√≥lica, ainda sem for√ßa eleitoral suficiente para rivalizar com o PRP.", ideologia:"Republicanismo Mineiro"}
        },
        regions:[
            {id:'SP', n:'S√£o Paulo',   x:55,y:70, p:25, econ:2, soc:-1, nat:0},
            {id:'MG', n:'Minas Gerais',x:60,y:55, p:20, econ:0, soc:0,  nat:0},
            {id:'RJ', n:'Rio de Janeiro',x:70,y:68,p:15,econ:0, soc:1,  nat:0},
            {id:'RS', n:'Rio G. do Sul',x:50,y:88, p:10, econ:0, soc:-1, nat:1},
            {id:'BA', n:'Bahia',       x:78,y:48, p:12, econ:-1,soc:0,  nat:0},
            {id:'PE', n:'Pernambuco',  x:88,y:33, p:8,  econ:-1,soc:1,  nat:0},
            {id:'OUTROS',n:'Demais Estados',x:30,y:35,p:10,econ:-1,soc:0,nat:1}
        ]
    },
    "RV1898": {
        title:"Elei√ß√µes 1898", year:"1898", emoji:"‚òï",
        desc:"Campos Sales vs Lauro Sodr√©. A pol√≠tica dos governadores toma forma.",
        available:true, noSecondRound:true, isRepVelha:true,
        newsHeader:"Jornal do Brasil ‚Äî MAR√áO 1898",
        endYear:"1898",
        partyPoolOverride:[{n:"PRP",side:"D",owner:null},{n:"PRF",side:"D",owner:null}],
        candidates:{
            camposSales: {name:"CAMPOS SALES", party:"PRP", start:90, money:50, side:"D", color:"#cc6600", econ:2, soc:-1, nat:-1, bio:"Manuel Ferraz de Campos Sales, paulista. Venceu com cerca de 90%. Seu governo seria marcado pela 'pol√≠tica dos governadores', consolidando o poder das oligarquias estaduais.", ideologia:"Oligarquismo Paulista"},
            lauro98:     {name:"LAURO SODR√â",  party:"PRF", start:8,  money:20, side:"D", color:"#004488", econ:-1, soc:1, nat:1, bio:"Lauro Sodr√©, governador do Par√°. Candidato dissidente da oposi√ß√£o republicana federal, representava os estados do Norte.", ideologia:"Republicanismo Federal"}
        },
        regions:[
            {id:'SP', n:'S√£o Paulo',   x:55,y:70, p:25, econ:2, soc:-1, nat:0},
            {id:'MG', n:'Minas Gerais',x:60,y:55, p:20, econ:0, soc:0,  nat:0},
            {id:'RJ', n:'Rio de Janeiro',x:70,y:68,p:15,econ:0, soc:1,  nat:0},
            {id:'RS', n:'Rio G. do Sul',x:50,y:88, p:10, econ:0, soc:-1, nat:1},
            {id:'BA', n:'Bahia',       x:78,y:48, p:12, econ:-1,soc:0,  nat:0},
            {id:'PE', n:'Pernambuco',  x:88,y:33, p:8,  econ:-1,soc:1,  nat:0},
            {id:'OUTROS',n:'Demais Estados',x:30,y:35,p:10,econ:-1,soc:0,nat:1}
        ]
    },
    "RV1902": {
        title:"Elei√ß√µes 1902", year:"1902", emoji:"‚òï",
        desc:"Rodrigues Alves vs Quintino Bocai√∫va. O Brasil na Belle √âpoque.",
        available:true, noSecondRound:true, isRepVelha:true,
        newsHeader:"O Pa√≠s ‚Äî MAR√áO 1902",
        endYear:"1902",
        partyPoolOverride:[{n:"PRP",side:"D",owner:null},{n:"PRC",side:"D",owner:null}],
        candidates:{
            rodriguesAlves: {name:"RODRIGUES ALVES", party:"PRP", start:91, money:55, side:"D", color:"#cc6600", econ:2, soc:-1, nat:0, bio:"Francisco de Paula Rodrigues Alves, paulista. Presidente 1902-1906. Seu governo promoveu a moderniza√ß√£o do Rio de Janeiro (Pereira Passos) e o combate √† febre amarela (Oswaldo Cruz).", ideologia:"Liberalismo Olig√°rquico"},
            quintino:       {name:"QUINTINO BOCAI√öVA",party:"PRC", start:7,  money:20, side:"D", color:"#004488", econ:0, soc:1, nat:1, bio:"Quintino Bocai√∫va, jornalista e um dos fundadores da Rep√∫blica. Candidato do Partido Republicano Conservador, representava dissid√™ncia olig√°rquica.", ideologia:"Republicanismo Conservador"}
        },
        regions:[
            {id:'SP', n:'S√£o Paulo',   x:55,y:70, p:25, econ:2, soc:-1, nat:0},
            {id:'MG', n:'Minas Gerais',x:60,y:55, p:20, econ:0, soc:0,  nat:0},
            {id:'RJ', n:'Rio de Janeiro',x:70,y:68,p:15,econ:0, soc:1,  nat:0},
            {id:'RS', n:'Rio G. do Sul',x:50,y:88, p:10, econ:0, soc:-1, nat:1},
            {id:'BA', n:'Bahia',       x:78,y:48, p:12, econ:-1,soc:0,  nat:0},
            {id:'PE', n:'Pernambuco',  x:88,y:33, p:8,  econ:-1,soc:1,  nat:0},
            {id:'OUTROS',n:'Demais Estados',x:30,y:35,p:10,econ:-1,soc:0,nat:1}
        ]
    },
    "RV1906": {
        title:"Elei√ß√µes 1906", year:"1906", emoji:"‚òï",
        desc:"Afonso Pena vs Lauro Sodr√©. Caf√©-com-leite se consolida.",
        available:true, noSecondRound:true, isRepVelha:true,
        newsHeader:"O Estado de S. Paulo ‚Äî MAR√áO 1906",
        endYear:"1906",
        partyPoolOverride:[{n:"PRM",side:"D",owner:null},{n:"PRF",side:"D",owner:null}],
        candidates:{
            afonso06: {name:"AFONSO PENA", party:"PRM", start:97, money:50, side:"D", color:"#cc6600", econ:1, soc:0, nat:0, bio:"Afonso Pena, mineiro, presidente 1906-1909. Beneficiou-se do acordo olig√°rquico caf√©-com-leite entre SP e MG. Praticamente candidato √∫nico, venceu com esmagadora maioria.", ideologia:"Oligarquismo Mineiro"},
            lauro06:  {name:"LAURO SODR√â", party:"PRF", start:2,  money:15, side:"D", color:"#004488", econ:-1,soc:1, nat:1, bio:"Lauro Sodr√©, segundo candidato do Par√°. Oposi√ß√£o simb√≥lica ao dom√≠nio caf√©-com-leite.", ideologia:"Republicanismo Federal"}
        },
        regions:[
            {id:'SP', n:'S√£o Paulo',   x:55,y:70, p:25, econ:2, soc:-1, nat:0},
            {id:'MG', n:'Minas Gerais',x:60,y:55, p:20, econ:0, soc:0,  nat:0},
            {id:'RJ', n:'Rio de Janeiro',x:70,y:68,p:15,econ:0, soc:1,  nat:0},
            {id:'RS', n:'Rio G. do Sul',x:50,y:88, p:10, econ:0, soc:-1, nat:1},
            {id:'BA', n:'Bahia',       x:78,y:48, p:12, econ:-1,soc:0,  nat:0},
            {id:'PE', n:'Pernambuco',  x:88,y:33, p:8,  econ:-1,soc:1,  nat:0},
            {id:'OUTROS',n:'Demais Estados',x:30,y:35,p:10,econ:-1,soc:0,nat:1}
        ]
    },
    "RV1910": {
        title:"Elei√ß√µes 1910", year:"1910", emoji:"‚öîÔ∏è",
        desc:"Hermes da Fonseca vs Rui Barbosa ‚Äî a Campanha Civilista.",
        available:true, noSecondRound:true, isRepVelha:true,
        newsHeader:"Correio da Manh√£ ‚Äî MAR√áO 1910",
        endYear:"1910",
        partyPoolOverride:[{n:"PRC",side:"D",owner:null},{n:"PRP",side:"D",owner:null}],
        candidates:{
            hermes10: {name:"HERMES",      party:"PRC", start:57, money:45, side:"D", color:"#004488", econ:0, soc:-1,nat:2, bio:"Marechal Hermes da Fonseca. Apoiado pelas oligarquias ga√∫cha e nordestinas, venceu com 57%. Candidato militar-conservador contra o civilismo de Rui.", ideologia:"Militarismo Republicano"},
            rui10:    {name:"RUI BARBOSA", party:"PRP", start:42, money:40, side:"D", color:"#cc6600", econ:2, soc:0, nat:-1,bio:"Rui Barbosa, jurista e parlamentar baiano. Candidato da 'Campanha Civilista' em defesa do governo civil e do liberalismo. A mais vibrante campanha da Rep√∫blica Velha.", ideologia:"Liberalismo Civilista"}
        },
        regions:[
            {id:'SP', n:'S√£o Paulo',   x:55,y:70, p:25, econ:2, soc:-1, nat:0},
            {id:'MG', n:'Minas Gerais',x:60,y:55, p:20, econ:0, soc:0,  nat:0},
            {id:'RJ', n:'Rio de Janeiro',x:70,y:68,p:15,econ:0, soc:1,  nat:0},
            {id:'RS', n:'Rio G. do Sul',x:50,y:88, p:10, econ:0, soc:-1, nat:2},
            {id:'BA', n:'Bahia',       x:78,y:48, p:12, econ:-1,soc:1,  nat:0},
            {id:'NE', n:'Nordeste',    x:85,y:30, p:10, econ:-2,soc:1,  nat:1},
            {id:'OUTROS',n:'Demais Estados',x:30,y:35,p:8,econ:-1,soc:0,nat:1}
        ]
    },
    "RV1914": {
        title:"Elei√ß√µes 1914", year:"1914", emoji:"üìú",
        desc:"Venceslau Br√°s vs Rui Barbosa. A Grande Guerra come√ßa.",
        available:true, noSecondRound:true, isRepVelha:true,
        newsHeader:"Gazeta de Not√≠cias ‚Äî MAR√áO 1914",
        endYear:"1914",
        partyPoolOverride:[{n:"PRM",side:"D",owner:null},{n:"PRL",side:"D",owner:null}],
        candidates:{
            venceslau: {name:"VENCESLAU BR√ÅS",party:"PRM", start:91, money:50, side:"D", color:"#004488", econ:0, soc:0, nat:0, bio:"Venceslau Br√°s, mineiro. Venceu com esmagadora maioria, fruto do acordo olig√°rquico. Seu governo enfrentou os anos da Primeira Guerra Mundial.", ideologia:"Oligarquismo Mineiro"},
            rui14:     {name:"RUI BARBOSA",  party:"PRL", start:8,  money:35, side:"D", color:"#cc6600", econ:2, soc:0, nat:-1,bio:"Rui Barbosa, na sua terceira candidatura presidencial. Representava o Partido Republicano Liberal, continuando sua bandeira civilista e liberal.", ideologia:"Liberalismo Civilista"}
        },
        regions:[
            {id:'SP', n:'S√£o Paulo',   x:55,y:70, p:25, econ:2, soc:-1, nat:0},
            {id:'MG', n:'Minas Gerais',x:60,y:55, p:20, econ:0, soc:0,  nat:0},
            {id:'RJ', n:'Rio de Janeiro',x:70,y:68,p:15,econ:0, soc:1,  nat:0},
            {id:'RS', n:'Rio G. do Sul',x:50,y:88, p:10, econ:0, soc:-1, nat:1},
            {id:'BA', n:'Bahia',       x:78,y:48, p:12, econ:-1,soc:0,  nat:0},
            {id:'NE', n:'Nordeste',    x:85,y:30, p:10, econ:-2,soc:1,  nat:1},
            {id:'OUTROS',n:'Demais Estados',x:30,y:35,p:8,econ:-1,soc:0,nat:1}
        ]
    },
    "RV1918": {
        title:"Elei√ß√µes 1918", year:"1918", emoji:"üåê",
        desc:"Rodrigues Alves vs Nilo Pe√ßanha. Gripe espanhola muda tudo.",
        available:true, noSecondRound:true, isRepVelha:true,
        newsHeader:"O Pa√≠s ‚Äî MAR√áO 1918",
        endYear:"1918",
        partyPoolOverride:[{n:"PRP",side:"D",owner:null},{n:"PRF",side:"D",owner:null}],
        candidates:{
            rodrigues18:{name:"RODRIGUES ALVES",party:"PRP", start:99, money:50, side:"D", color:"#cc6600", econ:2, soc:-1, nat:0, bio:"Rodrigues Alves, paulista, eleito pela segunda vez. Morreu antes de tomar posse, v√≠tima da gripe espanhola em 1919 ‚Äî a maior pandemia do s√©culo XX. Delfim Moreira assumiu interinamente.", ideologia:"Liberalismo Olig√°rquico"},
            nilo18:     {name:"NILO PE√áANHA",  party:"PRF", start:0.5,money:15, side:"D", color:"#004488", econ:-1,soc:1, nat:1, bio:"Nilo Pe√ßanha, fluminense. Oposi√ß√£o quase inexistente nessa elei√ß√£o ‚Äî Rodrigues Alves venceu com quase 99% dos votos computados.", ideologia:"Republicanismo Federal"}
        },
        regions:[
            {id:'SP', n:'S√£o Paulo',   x:55,y:70, p:25, econ:2, soc:-1, nat:0},
            {id:'MG', n:'Minas Gerais',x:60,y:55, p:20, econ:0, soc:0,  nat:0},
            {id:'RJ', n:'Rio de Janeiro',x:70,y:68,p:15,econ:0, soc:1,  nat:0},
            {id:'RS', n:'Rio G. do Sul',x:50,y:88, p:10, econ:0, soc:-1, nat:1},
            {id:'BA', n:'Bahia',       x:78,y:48, p:12, econ:-1,soc:0,  nat:0},
            {id:'NE', n:'Nordeste',    x:85,y:30, p:10, econ:-2,soc:1,  nat:1},
            {id:'OUTROS',n:'Demais Estados',x:30,y:35,p:8,econ:-1,soc:0,nat:1}
        ]
    },
    "RV1919": {
        title:"Elei√ß√µes 1919", year:"1919", emoji:"üåø",
        desc:"Epit√°cio Pessoa vs Rui Barbosa. O velho liberal tenta pela √∫ltima vez.",
        available:true, noSecondRound:true, isRepVelha:true,
        newsHeader:"Correio da Manh√£ ‚Äî ABRIL 1919",
        endYear:"1919",
        partyPoolOverride:[{n:"PRM",side:"D",owner:null},{n:"PRP",side:"D",owner:null}],
        candidates:{
            epitacio19:{name:"EPIT√ÅCIO PESSOA",party:"PRM", start:73, money:50, side:"D", color:"#004488", econ:0, soc:0, nat:0, bio:"Epit√°cio Pessoa, paraibano. Eleito com 73% numa elei√ß√£o suplementar ap√≥s a morte de Rodrigues Alves. Chefiou a delega√ß√£o brasileira em Versalhes.", ideologia:"Oligarquismo Nordestino"},
            rui19:     {name:"RUI BARBOSA",    party:"PRP", start:26, money:40, side:"D", color:"#cc6600", econ:2, soc:0, nat:-1,bio:"Rui Barbosa, na sua √∫ltima candidatura presidencial. Com 69 anos, ainda mobilizava multid√µes com seu liberalismo refinado. Perdeu, mas com vota√ß√£o digna.", ideologia:"Liberalismo Civilista"}
        },
        regions:[
            {id:'SP', n:'S√£o Paulo',   x:55,y:70, p:25, econ:2, soc:-1, nat:0},
            {id:'MG', n:'Minas Gerais',x:60,y:55, p:20, econ:0, soc:0,  nat:0},
            {id:'RJ', n:'Rio de Janeiro',x:70,y:68,p:15,econ:0, soc:1,  nat:0},
            {id:'RS', n:'Rio G. do Sul',x:50,y:88, p:10, econ:0, soc:-1, nat:1},
            {id:'NE', n:'Nordeste',    x:85,y:30, p:15, econ:-2,soc:1,  nat:1},
            {id:'OUTROS',n:'Demais Estados',x:30,y:35,p:10,econ:-1,soc:0,nat:1}
        ]
    },
    "RV1922": {
        title:"Elei√ß√µes 1922", year:"1922", emoji:"üéñÔ∏è",
        desc:"Artur Bernardes vs Nilo Pe√ßanha. Rea√ß√£o Republicana e tenentismo.",
        available:true, noSecondRound:true, isRepVelha:true,
        newsHeader:"A Noite ‚Äî MAR√áO 1922",
        endYear:"1922",
        partyPoolOverride:[{n:"PRM",side:"D",owner:null},{n:"PRF",side:"D",owner:null}],
        candidates:{
            bernardes: {name:"ARTUR BERNARDES",party:"PRM", start:56, money:50, side:"D", color:"#cc6600", econ:0, soc:-1, nat:0, bio:"Artur Bernardes, mineiro. Eleito com 56%, mas sua elei√ß√£o foi contestada. Governou em estado de s√≠tio quase permanente diante do Tenentismo de 1922 e 1924.", ideologia:"Oligarquismo Mineiro"},
            nilo22:    {name:"NILO PE√áANHA",   party:"PRF", start:42, money:35, side:"D", color:"#004488", econ:-1,soc:1, nat:1, bio:"Nilo Pe√ßanha, candidato da Rea√ß√£o Republicana ‚Äî coliga√ß√£o de dissidentes que questionou o dom√≠nio SP-MG e a fraude eleitoral. Representava RS, BA, RJ e PE.", ideologia:"Republicanismo Dissidente"}
        },
        regions:[
            {id:'SP', n:'S√£o Paulo',   x:55,y:70, p:25, econ:2, soc:-1, nat:0},
            {id:'MG', n:'Minas Gerais',x:60,y:55, p:20, econ:0, soc:0,  nat:0},
            {id:'RJ', n:'Rio de Janeiro',x:70,y:68,p:15,econ:0, soc:1,  nat:0},
            {id:'RS', n:'Rio G. do Sul',x:50,y:88, p:10, econ:0, soc:-1, nat:1},
            {id:'NE', n:'Nordeste',    x:85,y:30, p:15, econ:-2,soc:1,  nat:1},
            {id:'OUTROS',n:'Demais Estados',x:30,y:35,p:15,econ:-1,soc:0,nat:1}
        ]
    },
    "RV1926": {
        title:"Elei√ß√µes 1926", year:"1926", emoji:"üèõÔ∏è",
        desc:"Washington Lu√≠s vs Assis Brasil. Os √∫ltimos anos do caf√©-com-leite.",
        available:true, noSecondRound:true, isRepVelha:true,
        newsHeader:"Correio da Manh√£ ‚Äî MAR√áO 1926",
        endYear:"1926",
        partyPoolOverride:[{n:"PRP",side:"D",owner:null},{n:"PL",side:"D",owner:null}],
        candidates:{
            washington:{name:"WASHINGTON LU√çS",party:"PRP", start:98, money:55, side:"D", color:"#cc6600", econ:2, soc:-1, nat:0, bio:"Washington Lu√≠s, paulista. Eleito com 98% num pleito sem oposi√ß√£o efetiva. Seria o √∫ltimo presidente da Rep√∫blica Velha ‚Äî deposto pela Revolu√ß√£o de 1930 antes do fim do mandato.", ideologia:"Oligarquismo Paulista"},
            assis:     {name:"ASSIS BRASIL",    party:"PL",  start:1.5,money:20, side:"D", color:"#004488", econ:0, soc:1, nat:1, bio:"Joaquim Francisco de Assis Brasil, ga√∫cho. Fundador do Partido Libertador, lutou por voto secreto e representa√ß√£o proporcional. Candidatura quase simb√≥lica.", ideologia:"Republicanismo Liberal"}
        },
        regions:[
            {id:'SP', n:'S√£o Paulo',   x:55,y:70, p:25, econ:2, soc:-1, nat:0},
            {id:'MG', n:'Minas Gerais',x:60,y:55, p:20, econ:0, soc:0,  nat:0},
            {id:'RJ', n:'Rio de Janeiro',x:70,y:68,p:15,econ:0, soc:1,  nat:0},
            {id:'RS', n:'Rio G. do Sul',x:50,y:88, p:10, econ:0, soc:-1, nat:1},
            {id:'BA', n:'Bahia',       x:78,y:48, p:12, econ:-1,soc:0,  nat:0},
            {id:'NE', n:'Nordeste',    x:85,y:30, p:10, econ:-2,soc:1,  nat:1},
            {id:'OUTROS',n:'Demais Estados',x:30,y:35,p:8,econ:-1,soc:0,nat:1}
        ]
    },
    "RV1930": {
        title:"Elei√ß√µes 1930", year:"1930", emoji:"üî´",
        desc:"J√∫lio Prestes vs Get√∫lio Vargas ‚Äî a √∫ltima da Velha Rep√∫blica.",
        available:true, noSecondRound:true, isRepVelha:true,
        newsHeader:"Correio da Manh√£ ‚Äî MAR√áO 1930",
        endYear:"1930",
        partyPoolOverride:[{n:"PRP",side:"D",owner:null},{n:"AL",side:"D",owner:null}],
        candidates:{
            prestes30:{name:"J√öLIO PRESTES",party:"PRP", start:57, money:55, side:"D", color:"#004488", econ:1, soc:-1,nat:0, bio:"J√∫lio Prestes, governador de SP. Venceu oficialmente as elei√ß√µes com 57%, mas nunca tomou posse: a Revolu√ß√£o de 1930 de Get√∫lio Vargas impediu sua chegada ao poder.", ideologia:"Oligarquismo Paulista"},
            getulio:  {name:"GET√öLIO VARGAS",party:"AL",  start:42, money:40, side:"D", color:"#cc0000", econ:-1, soc:1, nat:2, bio:"Get√∫lio Vargas, governador ga√∫cho e candidato da Alian√ßa Liberal. Perdeu as elei√ß√µes oficialmente, mas liderou a Revolu√ß√£o de 1930 que o levou ao poder, encerrando a Rep√∫blica Velha.", ideologia:"Trabalhismo Nascente"}
        },
        regions:[
            {id:'SP', n:'S√£o Paulo',   x:55,y:70, p:25, econ:2, soc:-1, nat:0},
            {id:'MG', n:'Minas Gerais',x:60,y:55, p:20, econ:0, soc:0,  nat:0},
            {id:'RJ', n:'Rio de Janeiro',x:70,y:68,p:15,econ:0, soc:1,  nat:0},
            {id:'RS', n:'Rio G. do Sul',x:50,y:88, p:10, econ:-1,soc:1,  nat:2},
            {id:'NE', n:'Nordeste',    x:85,y:30, p:15, econ:-2,soc:1,  nat:1},
            {id:'OUTROS',n:'Demais Estados',x:30,y:35,p:15,econ:-1,soc:0,nat:1}
        ]
    },
};

// ============================================================
// REP√öBLICA VELHA ‚Äî Elei√ß√µes 1894‚Äì1930
// ============================================================
// Rep√∫blica Velha agora est√° integrada ao scenariosData como elei√ß√µes presidenciais BR normais (ver abaixo)
// Este objeto vazio mantido por compatibilidade com c√≥digo legado
const repvelhaData = {};

// ============================================================
// ELEI√á√ïES INTERNACIONAIS ‚Äî EUA 2024
// ============================================================
const internationalData = {
    "USA2024": {
        title:"U.S. Presidential Election 2024", year:"2024", emoji:"üá∫üá∏",
        country:"usa",
        desc:"Trump vs Harris. Electoral College showdown.",
        available:true,
        isElectoralCollege:true,
        newsHeader:"The Washington Post ‚Äî NOVEMBER 2024",
        endYear:"2024",
        partyPoolOverride:[{n:"LIBERTARIAN",side:"C",owner:null},{n:"GREEN",side:"E",owner:null}],
        candidates:{
            trump:  {name:"TRUMP",  party:"GOP",  start:49, money:70, side:"D", color:"#cc0000", econ:2, soc:-2, nat:2, bio:"Donald J. Trump, 45th President, running for a historic second non-consecutive term. Led MAGA movement. Won the 2024 election with 312 electoral votes.", ideologia:"National Populism / MAGA"},
            harris: {name:"HARRIS", party:"DEM",  start:48, money:75, side:"E", color:"#3355cc", econ:-1, soc:2, nat:-1,bio:"Kamala Harris, Vice President under Biden. First woman and Black/South Asian person to be nominated by a major party. Lost the Electoral College 226-312.", ideologia:"Progressive Liberalism"},
            stein:  {name:"STEIN",  party:"GREEN",start:1,  money:10, side:"E", color:"#00aa00", econ:-2,soc:2, nat:0, bio:"Jill Stein, Green Party candidate.", ideologia:"Green Politics"},
            oliver: {name:"OLIVER", party:"LIB",  start:1,  money:8,  side:"C", color:"#ffaa00", econ:2, soc:1, nat:-2,bio:"Chase Oliver, Libertarian Party candidate.", ideologia:"Libertarianism"}
        },
        // US States with electoral votes
        electoralStates:[
            {id:'AL', n:'Alabama',     x:72,y:52, ev:9,  lean:'R', econ:0, soc:-2, nat:1},
            {id:'AK', n:'Alaska',      x:5, y:10, ev:3,  lean:'R', econ:0, soc:-1, nat:2},
            {id:'AZ', n:'Arizona',     x:15,y:45, ev:11, lean:'S', econ:1, soc:0,  nat:1},
            {id:'AR', n:'Arkansas',    x:62,y:48, ev:6,  lean:'R', econ:-1,soc:-2, nat:1},
            {id:'CA', n:'California',  x:5, y:38, ev:54, lean:'D', econ:2, soc:2,  nat:-1},
            {id:'CO', n:'Colorado',    x:25,y:38, ev:10, lean:'D', econ:1, soc:1,  nat:0},
            {id:'CT', n:'Connecticut', x:90,y:28, ev:7,  lean:'D', econ:2, soc:2,  nat:-1},
            {id:'DE', n:'Delaware',    x:88,y:35, ev:3,  lean:'D', econ:1, soc:1,  nat:0},
            {id:'FL', n:'Florida',     x:78,y:65, ev:30, lean:'R', econ:1, soc:-1, nat:1},
            {id:'GA', n:'Georgia',     x:76,y:55, ev:16, lean:'S', econ:1, soc:-1, nat:0},
            {id:'HI', n:'Hawaii',      x:2, y:75, ev:4,  lean:'D', econ:0, soc:2,  nat:0},
            {id:'ID', n:'Idaho',       x:15,y:25, ev:4,  lean:'R', econ:0, soc:-2, nat:2},
            {id:'IL', n:'Illinois',    x:65,y:35, ev:19, lean:'D', econ:1, soc:1,  nat:0},
            {id:'IN', n:'Indiana',     x:70,y:38, ev:11, lean:'R', econ:0, soc:-1, nat:1},
            {id:'IA', n:'Iowa',        x:60,y:32, ev:6,  lean:'R', econ:0, soc:-1, nat:1},
            {id:'KS', n:'Kansas',      x:50,y:42, ev:6,  lean:'R', econ:0, soc:-1, nat:1},
            {id:'KY', n:'Kentucky',    x:72,y:42, ev:8,  lean:'R', econ:-1,soc:-2, nat:1},
            {id:'LA', n:'Louisiana',   x:62,y:60, ev:8,  lean:'R', econ:-1,soc:-1, nat:1},
            {id:'ME', n:'Maine',       x:92,y:15, ev:4,  lean:'D', econ:0, soc:1,  nat:0},
            {id:'MD', n:'Maryland',    x:85,y:38, ev:10, lean:'D', econ:1, soc:2,  nat:-1},
            {id:'MA', n:'Massachusetts',x:92,y:28,ev:11,lean:'D', econ:2, soc:2,  nat:-1},
            {id:'MI', n:'Michigan',    x:70,y:28, ev:15, lean:'S', econ:0, soc:0,  nat:0},
            {id:'MN', n:'Minnesota',   x:58,y:22, ev:10, lean:'D', econ:0, soc:1,  nat:0},
            {id:'MS', n:'Mississippi', x:68,y:58, ev:6,  lean:'R', econ:-1,soc:-2, nat:1},
            {id:'MO', n:'Missouri',    x:60,y:42, ev:10, lean:'R', econ:0, soc:-1, nat:1},
            {id:'MT', n:'Montana',     x:22,y:20, ev:4,  lean:'R', econ:0, soc:-1, nat:2},
            {id:'NE', n:'Nebraska',    x:48,y:35, ev:5,  lean:'R', econ:0, soc:-1, nat:1},
            {id:'NV', n:'Nevada',      x:10,y:38, ev:6,  lean:'S', econ:0, soc:1,  nat:0},
            {id:'NH', n:'New Hampshire',x:90,y:22,ev:4,  lean:'D', econ:1, soc:1,  nat:0},
            {id:'NJ', n:'New Jersey',  x:87,y:33, ev:14, lean:'D', econ:2, soc:1,  nat:-1},
            {id:'NM', n:'New Mexico',  x:25,y:52, ev:5,  lean:'D', econ:-1,soc:1,  nat:0},
            {id:'NY', n:'New York',    x:88,y:30, ev:28, lean:'D', econ:2, soc:2,  nat:-1},
            {id:'NC', n:'N. Carolina', x:80,y:48, ev:16, lean:'S', econ:1, soc:-1, nat:0},
            {id:'ND', n:'N. Dakota',   x:45,y:18, ev:3,  lean:'R', econ:0, soc:-2, nat:2},
            {id:'OH', n:'Ohio',        x:75,y:36, ev:17, lean:'R', econ:0, soc:-1, nat:1},
            {id:'OK', n:'Oklahoma',    x:50,y:52, ev:7,  lean:'R', econ:0, soc:-2, nat:2},
            {id:'OR', n:'Oregon',      x:7, y:25, ev:8,  lean:'D', econ:1, soc:2,  nat:0},
            {id:'PA', n:'Pennsylvania',x:83,y:32, ev:19, lean:'S', econ:0, soc:0,  nat:0},
            {id:'RI', n:'Rhode Island',x:92,y:30, ev:4,  lean:'D', econ:1, soc:2,  nat:-1},
            {id:'SC', n:'S. Carolina', x:78,y:52, ev:9,  lean:'R', econ:0, soc:-2, nat:1},
            {id:'SD', n:'S. Dakota',   x:45,y:25, ev:3,  lean:'R', econ:0, soc:-2, nat:2},
            {id:'TN', n:'Tennessee',   x:70,y:48, ev:11, lean:'R', econ:0, soc:-2, nat:1},
            {id:'TX', n:'Texas',       x:45,y:60, ev:40, lean:'R', econ:2, soc:-1, nat:2},
            {id:'UT', n:'Utah',        x:20,y:40, ev:6,  lean:'R', econ:1, soc:-1, nat:1},
            {id:'VT', n:'Vermont',     x:90,y:20, ev:3,  lean:'D', econ:0, soc:2,  nat:0},
            {id:'VA', n:'Virginia',    x:83,y:42, ev:13, lean:'D', econ:1, soc:1,  nat:0},
            {id:'WA', n:'Washington',  x:8, y:18, ev:12, lean:'D', econ:2, soc:2,  nat:0},
            {id:'WV', n:'W. Virginia', x:78,y:40, ev:4,  lean:'R', econ:-2,soc:-2, nat:1},
            {id:'WI', n:'Wisconsin',   x:63,y:28, ev:10, lean:'S', econ:0, soc:0,  nat:0},
            {id:'WY', n:'Wyoming',     x:28,y:30, ev:3,  lean:'R', econ:0, soc:-2, nat:2},
            {id:'DC', n:'D.C.',        x:84,y:39, ev:3,  lean:'D', econ:2, soc:2,  nat:-2}
        ]
    },
    "RUS2024": {
        title:"Elei√ß√µes Russas 2024", year:"2024", emoji:"üá∑üá∫",
        country:"russia",
        desc:"Putin vs oposi√ß√£o simb√≥lica. Autocracia em forma de elei√ß√£o.",
        available:true,
        isRepVelha:false,
        noSecondRound:false,
        newsHeader:"Folha de S. Pol√≠tica ‚Äî MAR√áO 2024",
        endYear:"2024",
        partyPoolOverride:[{n:"PCRF",side:"E",owner:null},{n:"LDPR",side:"D",owner:null}],
        candidates:{
            putin:      {name:"PUTIN",      party:"Ind.",  start:87, money:80, side:"D", color:"#cc0000", econ:1, soc:-2, nat:2, bio:"Vladimir Putin, presidente desde 2000 (com intervalo 2008-2012). Venceu com 87% em elei√ß√£o com candidatos de oposi√ß√£o real bloqueados ou presos. Quarta elei√ß√£o como presidente.", ideologia:"Nacionalismo Autorit√°rio"},
            kharitonov: {name:"KHARITONOV", party:"PCRF",  start:4,  money:15, side:"E", color:"#8b0000", econ:-2, soc:0, nat:1, bio:"Nikolay Kharitonov, candidato do Partido Comunista Russo. Figura de oposi√ß√£o leal ao Kremlin, permitida participar como alternativa cosm√©tica.", ideologia:"Comunismo Russo"},
            davankov:   {name:"DAVANKOV",   party:"NL",    start:4,  money:10, side:"C", color:"#0044cc", econ:1, soc:0, nat:0, bio:"Vladislav Davankov, do partido Novas Pessoas. Candidato mais jovem, com discurso ligeiramente liberal dentro do permitido pelo sistema. Terminou em segundo lugar com 3,8%.", ideologia:"Liberalismo Moderado"},
            slutsky:    {name:"SLUTSKY",    party:"LDPR",  start:3,  money:12, side:"D", color:"#ff6600", econ:0, soc:-1, nat:2, bio:"Leonid Slutsky, l√≠der do Partido Liberal Democr√°tico Russo. Ap√≥s a morte de Zhirinovsky em 2022, assumiu o partido ultranacionalista que, paradoxalmente, apoia Putin.", ideologia:"Ultranacionalismo"}
        },
        regions:[
            {id:'MSC', n:'Moscou',        x:55,y:38, p:20, econ:2, soc:0,  nat:1},
            {id:'SPB', n:'S√£o Petersburgo',x:48,y:22, p:10, econ:1, soc:1,  nat:1},
            {id:'URG', n:'Ural/Sib√©ria',  x:72,y:30, p:15, econ:0, soc:-1, nat:2},
            {id:'SUL', n:'Sul da R√∫ssia', x:52,y:55, p:12, econ:0, soc:-1, nat:2},
            {id:'VLG', n:'Volga/Kazan',   x:63,y:42, p:10, econ:-1,soc:0,  nat:1},
            {id:'SIBE',n:'Sib√©ria Oriental',x:85,y:25,p:8, econ:-1,soc:-1, nat:2},
            {id:'NORTE',n:'Regi√µes do Norte',x:60,y:15,p:5,econ:-1,soc:-1, nat:2},
            {id:'CAUC',n:'C√°ucaso Norte',  x:55,y:62, p:6, econ:-2,soc:-1, nat:2},
            {id:'OUTROS',n:'Demais Regi√µes',x:35,y:42,p:14,econ:-1,soc:-1, nat:2}
        ]
    }
};

// ============================================================
// SISTEMA DE CONQUISTAS
// ============================================================
let achievements = JSON.parse(localStorage.getItem('sim_achievements') || '{}');
const achievementDefs = [
    {id:'first_win',       name:'Primeira Vit√≥ria',        emoji:'üèÜ', desc:'Ven√ßa qualquer elei√ß√£o pela primeira vez.'},
    {id:'first_round',     name:'Primeiro Turno!',         emoji:'‚ö°', desc:'Ven√ßa no primeiro turno com mais de 50%.'},
    {id:'underdog',        name:'Azar√£o',                  emoji:'üê∂', desc:'Ven√ßa come√ßando com menos de 15% nas pesquisas.'},
    {id:'coalition',       name:'Arquiteto do Poder',      emoji:'ü§ù', desc:'Monte uma coliga√ß√£o de 5+ partidos.'},
    {id:'repvelha_win',    name:'Filho da Velha Rep√∫blica',emoji:'üìú', desc:'Ven√ßa uma elei√ß√£o da Rep√∫blica Velha.'},
    {id:'usa_win',         name:'Presidente dos EUA',      emoji:'üá∫üá∏', desc:'Ven√ßa as elei√ß√µes americanas de 2024.'},
    {id:'russia_win',      name:'Camarada Putin',          emoji:'üá∑üá∫', desc:'Ven√ßa as elei√ß√µes russas de 2024.'},
    {id:'scandal_survive', name:'Sobrevivente',            emoji:'üí•', desc:'Ven√ßa com n√≠vel de esc√¢ndalo 5+.'},
    {id:'all_states',      name:'Brasil Total',            emoji:'üó∫Ô∏è', desc:'Ven√ßa todos os 27 estados numa elei√ß√£o presidencial.'},
    {id:'historic_1930',   name:'Alian√ßa Liberal',         emoji:'üî´', desc:'Ven√ßa como Get√∫lio Vargas em 1930.'},
    {id:'historic_1955',   name:'50 Anos em 5',            emoji:'üöÇ', desc:'Ven√ßa como JK em 1955.'},
    {id:'governor_win',    name:'Governador!',             emoji:'üó∫Ô∏è', desc:'Ven√ßa qualquer elei√ß√£o estadual.'},
    {id:'landslide',       name:'Avalanche',               emoji:'üåä', desc:'Ven√ßa com mais de 65% dos votos.'},
    {id:'historic_1989',   name:'Ca√ßador de Maraj√°s',      emoji:'ü¶Ö', desc:'Ven√ßa como Collor em 1989.'},
    {id:'historic_1994',   name:'Real Power',              emoji:'üí∞', desc:'Ven√ßa como FHC em 1994.'},
    {id:'historic_2002',   name:'Lula L√°',                emoji:'‚≠ê', desc:'Ven√ßa como Lula em 2002.'},
    {id:'historic_2022',   name:'Ele Voltou',              emoji:'üîÑ', desc:'Ven√ßa como Lula em 2022.'},
    {id:'municipal_win',   name:'Prefeito!',               emoji:'üèôÔ∏è', desc:'Ven√ßa uma elei√ß√£o municipal.'},
    {id:'rui_barbosa',     name:'A √Åguia de Haia',         emoji:'ü¶Ö', desc:'Ven√ßa como Rui Barbosa numa elei√ß√£o da Rep√∫blica Velha.'},
    {id:'come_from_behind',name:'Virada √âpica',            emoji:'üîÉ', desc:'Ven√ßa ap√≥s estar em 3¬∫ ou abaixo no turno 5.'},
    {id:'no_money',        name:'Campanha Pobre',          emoji:'üí∏', desc:'Ven√ßa com menos de R$5M no caixa.'},
    {id:'domination',      name:'Sem Rival',               emoji:'üëë', desc:'Ven√ßa com mais de 70% dos votos.'},
    {id:'survivor',        name:'√öltimo a Cair',           emoji:'üßü', desc:'Ven√ßa ap√≥s ter menos de 10% nas pesquisas no turno 3.'},
];

function checkAchievements(winnerId, winnerVotes, scenario) {
    let earned = [];
    if(!achievements['first_win']) { achievements['first_win'] = true; earned.push('first_win'); }
    if(game.fase===1 && winnerVotes>50 && !achievements['first_round']) { achievements['first_round']=true; earned.push('first_round'); }
    let startVotes = candidatesData[winnerId]?.start||0;
    if(startVotes<15 && !achievements['underdog']) { achievements['underdog']=true; earned.push('underdog'); }
    let coalLen = game.coalition.filter(p=>!p.includes('_seat')).length;
    if(coalLen>=5 && !achievements['coalition']) { achievements['coalition']=true; earned.push('coalition'); }
    if(game.isRepVelha && !achievements['repvelha_win']) { achievements['repvelha_win']=true; earned.push('repvelha_win'); }
    if(scenario==='USA2024' && !achievements['usa_win']) { achievements['usa_win']=true; earned.push('usa_win'); }
    if(scenario==='RUS2024' && !achievements['russia_win']) { achievements['russia_win']=true; earned.push('russia_win'); }
    if((game.scandalLevels[winnerId]||0)>=5 && !achievements['scandal_survive']) { achievements['scandal_survive']=true; earned.push('scandal_survive'); }
    if(game.isGovernor && !achievements['governor_win']) { achievements['governor_win']=true; earned.push('governor_win'); }
    if(governorData[game.scenario]?.isMunicipal && !achievements['municipal_win']) { achievements['municipal_win']=true; earned.push('municipal_win'); }
    if(winnerVotes>65 && !achievements['landslide']) { achievements['landslide']=true; earned.push('landslide'); }
    if(winnerVotes>70 && !achievements['domination']) { achievements['domination']=true; earned.push('domination'); }
    if(game.money<5 && !achievements['no_money']) { achievements['no_money']=true; earned.push('no_money'); }
    if(scenario==='RV1930' && winnerId==='getulio' && !achievements['historic_1930']) { achievements['historic_1930']=true; earned.push('historic_1930'); }
    if(scenario==='1955' && winnerId==='jk' && !achievements['historic_1955']) { achievements['historic_1955']=true; earned.push('historic_1955'); }
    if(scenario==='1989' && winnerId==='collor' && !achievements['historic_1989']) { achievements['historic_1989']=true; earned.push('historic_1989'); }
    if(scenario==='1994' && winnerId==='fhc' && !achievements['historic_1994']) { achievements['historic_1994']=true; earned.push('historic_1994'); }
    if(scenario==='2002' && winnerId==='lula' && !achievements['historic_2002']) { achievements['historic_2002']=true; earned.push('historic_2002'); }
    if(scenario==='2022' && winnerId==='lula22' && !achievements['historic_2022']) { achievements['historic_2022']=true; earned.push('historic_2022'); }
    // Rui Barbosa wins
    if(game.isRepVelha && (winnerId==='rui10'||winnerId==='rui14'||winnerId==='rui19') && !achievements['rui_barbosa']) { achievements['rui_barbosa']=true; earned.push('rui_barbosa'); }
    // Come from behind: check pollHistory at turn 5
    if(game.pollHistory.length >= 5) {
        let snap5 = game.pollHistory[Math.min(4, game.pollHistory.length-1)];
        let playerVotes5 = snap5?.votes[winnerId] || 100;
        let ranked5 = Object.entries(snap5?.votes||{}).sort((a,b)=>b[1]-a[1]).findIndex(([id])=>id===winnerId);
        if(ranked5 >= 2 && !achievements['come_from_behind']) { achievements['come_from_behind']=true; earned.push('come_from_behind'); }
        if(playerVotes5 < 10 && !achievements['survivor']) { achievements['survivor']=true; earned.push('survivor'); }
    }
    // Check all states
    if(!game.isGovernor && !game.isRepVelha && !achievements['all_states']) {
        let statesWon = allStates.filter(s => {
            let v = Object.entries(game.stateVotes[s.id]||{}).sort((a,b)=>b[1]-a[1]);
            return v.length>0 && v[0][0]===winnerId;
        }).length;
        if(statesWon>=27) { achievements['all_states']=true; earned.push('all_states'); }
    }
    try { localStorage.setItem('sim_achievements', JSON.stringify(achievements)); } catch(e) {}
    if(earned.length>0) {
        setTimeout(()=>{
            let html = earned.map(id=>{
                let def = achievementDefs.find(d=>d.id===id);
                return def ? `<div style="padding:8px;border:2px solid var(--gold);background:#fffde8;margin:4px 0"><b>${def.emoji} ${def.name}</b><br><small>${def.desc}</small></div>` : '';
            }).join('');
            showModal('üèÜ CONQUISTAS DESBLOQUEADAS!', html, `<button class="btn" onclick="closeModal()">Excelente!</button>`);
        }, 1000);
    }
}

// ============================================================
// DADOS DE ELEI√á√ïES ESTADUAIS (GOVERNADORES)
// ============================================================
const governorData = {
    "RJ2022": {
        title:"Rio de Janeiro 2022", state:"RJ", year:"2022", emoji:"üèñÔ∏è",
        desc:"Castro vs Freixo. Direita x Esquerda no RJ.",
        available:true,
        newsHeader:"O Globo ‚Äî OUTUBRO 2022",
        stateFullName:"Rio de Janeiro",
        partyPoolOverride:[
            {n:"PP",side:"D",owner:null},{n:"PSOL",side:"E",owner:null},{n:"PDT",side:"C",owner:null},{n:"AVANTE",side:"C",owner:null}
        ],
        candidates:{
            castro22: {name:"CASTRO",   party:"PL",   start:42, money:55, side:"D", color:"#22bb22", econ:1,  soc:-2, nat:2,  bio:"Cl√°udio Castro, governador incumbente. Herdeiro pol√≠tico de Wilson Witzel. Venceu no 2¬∫ turno com 59% contra Freixo. Apoiado por Bolsonaro.", ideologia:"Conservadorismo Bolsonarista"},
            freixo22: {name:"FREIXO",   party:"PSB",  start:30, money:45, side:"E", color:"#cc0000", econ:-1, soc:2,  nat:1,  bio:"Marcelo Freixo, deputado federal e cineasta. Ex-PSOL, foi para PSB com apoio de Lula. Perdeu para Castro no 2T por ampla margem.", ideologia:"Social-Democracia"},
            rodrigues:{name:"RODRIGUES",party:"NOVO", start:11, money:20, side:"D", color:"#ff6600", econ:2,  soc:-1, nat:0,  bio:"Eduardo Serra Rodrigues, candidato do Novo. Representou o voto liberal-conservador que n√£o queria votar em Castro.", ideologia:"Liberalismo Cl√°ssico"},
            lindber:  {name:"LINDBERGH",party:"PT",   start:10, money:15, side:"E", color:"#ff3333", econ:-2, soc:2,  nat:1,  bio:"Lindbergh Farias, ex-senador e vereador carioca. Candidato da esquerda petista no estado.", ideologia:"Social-Desenvolvimentismo"},
            cyro22:   {name:"CYRO",     party:"PDT",  start:6,  money:10, side:"C", color:"#996600", econ:0,  soc:1,  nat:0,  bio:"Cyro Garcia, candidato do PDT, esquerda brizolista hist√≥rica.", ideologia:"Trabalhismo"}
        },
        regions:[
            {id:'METRO', n:'Capital (Rio)',      x:60,y:65, p:35, econ:0, soc:1,  nat:0},
            {id:'BAIXADA',n:'Baixada Fluminense',x:50,y:62, p:22, econ:-1,soc:0,  nat:1},
            {id:'NITEROI',n:'Niter√≥i/SG',        x:68,y:65, p:10, econ:1, soc:1,  nat:0},
            {id:'NORTE',  n:'Norte Fluminense',  x:72,y:28, p:8,  econ:-1,soc:0,  nat:1},
            {id:'SERRANA',n:'Regi√£o Serrana',    x:60,y:42, p:7,  econ:0, soc:-1, nat:1},
            {id:'LAGOS',  n:'Regi√£o dos Lagos',  x:78,y:55, p:5,  econ:0, soc:0,  nat:0},
            {id:'MEDIO',  n:'M√©dio Para√≠ba',     x:45,y:52, p:7,  econ:1, soc:-1, nat:0},
            {id:'SERTOEZ',n:'Noroeste',          x:35,y:38, p:3,  econ:-1,soc:-1, nat:1},
            {id:'COSTAV', n:'Costa Verde',       x:42,y:68, p:3,  econ:0, soc:0,  nat:0}
        ]
    },
    "SP2024MUN": {
        title:"S√£o Paulo Municipal 2024", state:"SP", year:"2024", emoji:"üèôÔ∏è",
        desc:"Nunes vs Boulos. Prefeitura da maior cidade.",
        available:true,
        newsHeader:"Folha de S. Paulo ‚Äî OUTUBRO 2024",
        stateFullName:"S√£o Paulo (Municipal)",
        isMunicipal:true,
        partyPoolOverride:[
            {n:"PP",side:"D",owner:null},{n:"PSB",side:"E",owner:null},{n:"PCdoB",side:"E",owner:null},{n:"AVANTE",side:"C",owner:null}
        ],
        candidates:{
            nunes24:  {name:"NUNES",    party:"MDB",  start:40, money:55, side:"D", color:"#0044cc", econ:1,  soc:-1, nat:0,  bio:"Ricardo Nunes, prefeito incumbente. Venceu o 2¬∫ turno contra Boulos com 59%. Apoiado por Bolsonaro e Tarc√≠sio. Candidato da direita paulistana.", ideologia:"Centro-Direita"},
            boulos:   {name:"BOULOS",   party:"PSOL", start:28, money:45, side:"E", color:"#cc0000", econ:-2, soc:2,  nat:1,  bio:"Guilherme Boulos, l√≠der do MTST e deputado federal. Candidato apoiado por Lula e Marta Suplicy. Perdeu para Nunes no 2T com 41%.", ideologia:"Socialismo Democr√°tico"},
            datena:   {name:"DATENA",   party:"PSDB", start:16, money:25, side:"C", color:"#0066aa", econ:0,  soc:0,  nat:0,  bio:"Jos√© Luiz Datena, apresentador de TV. Candidatura conturbada, tentou desistir v√°rias vezes, ganhou notoriedade por dar cadeirada em Pablo Mar√ßal durante debate.", ideologia:"Centrismo Midi√°tico"},
            tabata:   {name:"TABATA",   party:"PSB",  start:8,  money:20, side:"E", color:"#996600", econ:0,  soc:1,  nat:0,  bio:"Tabata Amaral, deputada federal. Candidata centro-esquerda progressista, ficou em 4¬∫ lugar.", ideologia:"Progressismo Liberal"},
            marcal:   {name:"MAR√áAL",   party:"NOVO", start:6,  money:15, side:"D", color:"#ff6600", econ:2,  soc:-2, nat:2,  bio:"Pablo Mar√ßal, coach e influenciador. Candidato bolsonarista radical, ficou em 3¬∫ e causou confus√£o no debate. Infernizou a campanha de Nunes.", ideologia:"Ultra-Conservadorismo"},
            marina24: {name:"MARINA",   party:"REDE", start:2,  money:8,  side:"E", color:"#006600", econ:0,  soc:2,  nat:0,  bio:"Marina Helou, candidata da Rede Sustentabilidade. Presen√ßa ambiental no debate.", ideologia:"Ecologismo"}
        },
        regions:[
            {id:'CENTRO', n:'Centro/Oeste',      x:40,y:55, p:12, econ:2, soc:1,  nat:0},
            {id:'LESTE1', n:'Zona Leste I',       x:65,y:52, p:18, econ:-1,soc:1,  nat:1},
            {id:'LESTE2', n:'Zona Leste II',      x:75,y:55, p:12, econ:-2,soc:1,  nat:1},
            {id:'NORTE',  n:'Zona Norte',         x:50,y:38, p:14, econ:0, soc:0,  nat:1},
            {id:'SUL',    n:'Zona Sul',           x:45,y:72, p:15, econ:0, soc:0,  nat:0},
            {id:'SUDSUL', n:'Santo Amaro/ABC',    x:55,y:78, p:10, econ:1, soc:-1, nat:0},
            {id:'PENHA',  n:'Penha/Tatuap√©',      x:60,y:48, p:8,  econ:0, soc:0,  nat:0},
            {id:'PINHEIROS',n:'Pinheiros/Ibirapuera',x:38,y:60,p:7,econ:2,soc:2,  nat:-1},
            {id:'CAMPO',  n:'Campo Limpo/M\'boi', x:38,y:75, p:4,  econ:-2,soc:1,  nat:1}
        ]
    },
    "MG2022": {
        title:"Minas Gerais 2022", state:"MG", year:"2022", emoji:"‚õèÔ∏è",
        desc:"Zema tenta reelei√ß√£o em MG. Kalil desafia.",
        available:true,
        newsHeader:"Folha de Minas ‚Äî OUTUBRO 2022",
        stateFullName:"Minas Gerais",
        partyPoolOverride:[
            {n:"AVANTE",side:"C",owner:null},{n:"PSB",side:"E",owner:null},{n:"PCdoB",side:"E",owner:null},{n:"SOLIDARIEDADE",side:"C",owner:null}
        ],
        candidates:{
            zema22:   {name:"ZEMA",     party:"NOVO",  start:45, money:50, side:"D", color:"#ff6600", econ:2,  soc:-1, nat:0,  bio:"Romeu Zema, governador incumbente de MG. Liberal, anti-PT. Venceu a reelei√ß√£o no 1¬∫ turno com 56%, quebrando uma tradi√ß√£o de 2¬∫ turno no estado.", ideologia:"Liberalismo Cl√°ssico"},
            kalil22:  {name:"KALIL",    party:"PSD",   start:32, money:45, side:"E", color:"#cc0000", econ:-1, soc:1,  nat:0,  bio:"Alexandre Kalil, ex-prefeito de BH. Candidato apoiado por Lula, ex-PSD, ex-Avante. Perdeu para Zema no 1¬∫ turno por larga margem.", ideologia:"Centro-Esquerda"},
            viana22:  {name:"VIANA",    party:"PL",    start:12, money:25, side:"D", color:"#22bb22", econ:1,  soc:-2, nat:2,  bio:"Carlos Viana, senador bolsonarista. Esperava capitalizar o bolsonarismo em MG mas ficou em terceiro, abaixo das expectativas.", ideologia:"Conservadorismo Bolsonarista"},
            pestana:  {name:"PESTANA",  party:"PSDB",  start:6,  money:15, side:"D", color:"#0044cc", econ:1,  soc:0,  nat:-1, bio:"Marcus Pestana, deputado federal tucano. O PSDB entrou em colapso em MG assim como no plano nacional, obtendo vota√ß√£o irris√≥ria.", ideologia:"Social-Democracia"}
        },
        regions:[
            {id:'BH',      n:'Belo Horizonte',   x:62,y:50, p:14, econ:1,  soc:0, nat:0},
            {id:'TRI',     n:'Tri√¢ngulo Mineiro', x:30,y:38, p:10, econ:2,  soc:-1,nat:1},
            {id:'ZNORTE',  n:'Zona Norte',        x:68,y:22, p:9,  econ:-1, soc:1, nat:0},
            {id:'VALE',    n:'Vale do Rio Doce',  x:82,y:38, p:8,  econ:-1, soc:0, nat:1},
            {id:'MATA',    n:'Zona da Mata',      x:80,y:58, p:7,  econ:0,  soc:0, nat:0},
            {id:'SUL',     n:'Sul de Minas',      x:55,y:72, p:11, econ:1,  soc:-1,nat:0},
            {id:'CENTRO',  n:'Centro-Oeste MG',   x:45,y:50, p:8,  econ:1,  soc:-1,nat:0},
            {id:'NOROESTE',n:'Noroeste',           x:22,y:30, p:5,  econ:0,  soc:-1,nat:1},
            {id:'JEQUI',   n:'Jequitinhonha',     x:78,y:28, p:6,  econ:-2, soc:2, nat:0},
            {id:'METRO',   n:'Colar Metropolitano',x:58,y:56, p:12, econ:0,  soc:1, nat:0},
            {id:'ALTO',    n:'Alto Parana√≠ba',    x:35,y:42, p:5,  econ:1,  soc:-1,nat:1},
            {id:'LESTE',   n:'Leste Mineiro',     x:78,y:46, p:5,  econ:0,  soc:0, nat:0}
        ]
    },
    "SP2022": {
        title:"S√£o Paulo 2022", state:"SP", year:"2022", emoji:"üèôÔ∏è",
        desc:"Tarc√≠sio estreia. Haddad tenta voltar.",
        available:true,
        newsHeader:"Folha de SP ‚Äî OUTUBRO 2022",
        stateFullName:"S√£o Paulo",
        partyPoolOverride:[
            {n:"MDB",side:"C",owner:null},{n:"PSB",side:"E",owner:null},{n:"PCdoB",side:"E",owner:null},{n:"PSDB",side:"D",owner:null}
        ],
        candidates:{
            tarcisio: {name:"TARC√çSIO",  party:"REPUBLICANOS", start:35, money:55, side:"D", color:"#0044cc", econ:2,  soc:-2, nat:1,  bio:"Tarc√≠sio de Freitas, ex-ministro de Bolsonaro. Venceu o 2¬∫ turno contra Haddad com 57%. Ex-federal sem ra√≠zes em SP, tornou-se o nome mais forte da direita nacional.", ideologia:"Conservadorismo Bolsonarista"},
            haddad22: {name:"HADDAD",    party:"PT",           start:28, money:50, side:"E", color:"#cc0000", econ:-1, soc:2,  nat:1,  bio:"Fernando Haddad, ex-prefeito de SP e candidato presidencial 2018. Perdeu para Tarc√≠sio no 2T, mas fez campanha competitiva em SP.", ideologia:"Social-Desenvolvimentismo"},
            poit:     {name:"POIT",      party:"NOVO",         start:10, money:20, side:"D", color:"#ff6600", econ:2,  soc:-1, nat:0,  bio:"Vinicius Poit, candidato do Novo. Liberal cl√°ssico, ficou em terceiro. O Novo foi relevante em SP como espa√ßo para o voto antissistema de direita.", ideologia:"Liberalismo Cl√°ssico"},
            elvis:    {name:"ELVIS",     party:"PDT",          start:8,  money:15, side:"C", color:"#996600", econ:0,  soc:1,  nat:0,  bio:"Elvis Cezar, prefeito de Santo Andr√©. Candidato do PDT, tentou ocupar o centro-esquerda moderado mas ficou sem espa√ßo numa elei√ß√£o polarizada.", ideologia:"Social-Democracia Trabalhista"},
            colombo:  {name:"COLOMBO",   party:"PCB",          start:1,  money:5,  side:"E", color:"#8b0000", econ:-2, soc:2,  nat:1,  bio:"Gabriel Colombo, candidato comunista. Presen√ßa simb√≥lica da esquerda radical em SP.", ideologia:"Comunismo"}
        },
        regions:[
            {id:'GRAN',    n:'Grande S√£o Paulo',  x:58,y:62, p:28, econ:1,  soc:0, nat:0},
            {id:'INT_N',   n:'Interior Norte',    x:55,y:30, p:12, econ:2,  soc:-1,nat:1},
            {id:'INT_O',   n:'Interior Oeste',    x:30,y:45, p:10, econ:2,  soc:-2,nat:1},
            {id:'INT_L',   n:'Interior Leste',    x:75,y:45, p:9,  econ:1,  soc:0, nat:0},
            {id:'VALE_P',  n:'Vale do Para√≠ba',   x:78,y:65, p:8,  econ:1,  soc:-1,nat:0},
            {id:'SOROCABA',n:'Sorocaba',           x:45,y:68, p:7,  econ:1,  soc:-1,nat:0},
            {id:'CAMPINAS',n:'Campinas',           x:48,y:52, p:11, econ:2,  soc:0, nat:-1},
            {id:'LITORAL', n:'Baixada Santista',  x:55,y:80, p:5,  econ:0,  soc:0, nat:0},
            {id:'ARA√áAT',  n:'Ara√ßatuba',         x:25,y:35, p:4,  econ:2,  soc:-2,nat:1},
            {id:'RIBEIRAP',n:'Ribeir√£o Preto',    x:60,y:40, p:6,  econ:2,  soc:-1,nat:0}
        ]
    }
};

let currentGovernorKey = null;
let partyPool = [];
let currentScenario = "1994";

let game = {
    player: "", turn: 1, money: 0, points: 2, fase: 1, difficulty: 2, mode: "historico",
    scenario: "1994",
    energy: 100, // 0-100, fadiga de campanha
    candidates: [], coalition: [], availableParties: [],
    stateVotes: {}, news: [], defeatedCandidates: [],
    pollHistory: [],
    scandalLevels: {},
    approvals: {},
    momentumTracker: {},
    congressSeats: {},
    firedHistoricalEvents: []
};

let currentEvents = [];

function playSound(f, d=100) {
    try {
        const ctx = new (window.AudioContext || window.webkitAudioContext)();
        const osc = ctx.createOscillator();
        const g = ctx.createGain();
        osc.connect(g); g.connect(ctx.destination);
        osc.frequency.value = f; osc.start();
        g.gain.exponentialRampToValueAtTime(0.00001, ctx.currentTime + d/1000);
        setTimeout(() => ctx.close(), d + 100);
    } catch(e) {}
}

function init() {
    renderScenarios();
}

let currentScenarioTab = 'pres';

function switchScenarioTab(tab) {
    currentScenarioTab = tab;
    ['pres','gov','mun','ind','pais','conq'].forEach(t => {
        const btn = document.getElementById('tab-btn-'+t);
        if(btn) btn.style.background = t===tab ? '#000080' : '';
        if(btn) btn.style.color = t===tab ? 'white' : '';
    });
    renderScenarios();
}

function renderScenarios() {
    const list = document.getElementById("scenario-list");
    list.innerHTML = "";

    if(currentScenarioTab === 'pres') {
        renderPresidentialScenarios(list);
    } else if(currentScenarioTab === 'gov') {
        renderGovernorScenarios(list);
    } else if(currentScenarioTab === 'mun') {
        renderMunicipalScenarios(list);
    } else if(currentScenarioTab === 'ind') {
        renderIndirectScenarios(list);
    } else if(currentScenarioTab === 'pais') {
        renderCountryScenarios(list);
    } else if(currentScenarioTab === 'conq') {
        renderAchievements(list);
    }
}

function renderPresidentialScenarios(list) {
    list.style.display = 'grid';
    list.style.gridTemplateColumns = 'repeat(3,1fr)';
    list.style.gap = '8px';

    const available = [];
    const cancelled = [];
    const repvelha = [];
    Object.entries(scenariosData).forEach(([key, sc]) => {
        if(!sc.available || sc.indirect) return;
        if(sc.isRepVelha) { repvelha.push([key,sc]); return; }
        if(sc.cancelled) cancelled.push([key,sc]);
        else available.push([key,sc]);
    });

    list.innerHTML += `<div style="grid-column:1/-1;font-size:10px;font-weight:bold;color:#000080;padding:2px 0;border-bottom:1px solid #aaa;margin-bottom:4px">üó≥Ô∏è ELEI√á√ïES DIRETAS PRESIDENCIAIS (1945‚Äì2026)</div>`;
    available.forEach(([key, sc]) => {
        list.innerHTML += `<div class="scenario-card" onclick="selectScenarioSound('${key}')">
            <div class="year">${sc.emoji} ${sc.year}</div>
            <h3>${sc.title}</h3>
            <div class="desc">${sc.desc}</div>
        </div>`;
    });

    if(cancelled.length) {
        list.innerHTML += `<div style="grid-column:1/-1;font-size:10px;font-weight:bold;color:#8b0000;padding:4px 0 2px;border-bottom:1px solid #cc9999;margin-top:8px;margin-bottom:4px">üö´ ELEI√á√ïES QUE N√ÉO OCORRERAM (Simuladas)</div>`;
        cancelled.forEach(([key, sc]) => {
            list.innerHTML += `<div class="scenario-card" style="background:#fff5f5;border-color:#cc8888;" onclick="selectScenarioSound('${key}')">
                <div class="year" style="color:#8b0000;font-size:16px">${sc.emoji} ${sc.year}</div>
                <h3>${sc.title}</h3>
                <div class="desc" style="color:#663333">${sc.desc}</div>
                <div style="font-size:9px;color:#aa0000;margin-top:2px">‚ö†Ô∏è Elei√ß√£o cancelada/n√£o realizada</div>
            </div>`;
        });
    }

    if(repvelha.length) {
        list.innerHTML += `<div style="grid-column:1/-1;font-size:10px;font-weight:bold;color:#8b4513;padding:4px 0 2px;border-bottom:2px solid #8b4513;margin-top:10px;margin-bottom:4px">üìú REP√öBLICA VELHA (1894‚Äì1930) ‚Äî Sem 2¬∫ turno ¬∑ Apenas jornais, r√°dio e com√≠cios</div>`;
        repvelha.forEach(([key, sc]) => {
            list.innerHTML += `<div class="scenario-card" style="background:#fff9f0;border-color:#8b4513" onclick="selectRepVelhaScenario('${key}')">
                <div class="year" style="color:#8b4513">${sc.emoji} ${sc.year}</div>
                <h3>${sc.title}</h3>
                <div class="desc">${sc.desc}</div>
                <div style="font-size:9px;color:#8b4513;margin-top:2px">üìú Rep. Velha ‚Äî Sem 2¬∫ turno</div>
            </div>`;
        });
    }
}

function renderMunicipalScenarios(list) {
    list.style.display = 'block';
    list.innerHTML = '';
    // SP2024MUN
    const mun = {'SP2024MUN': governorData['SP2024MUN']};
    list.innerHTML += `<div style="margin-bottom:12px;">
        <div style="font-size:11px;font-weight:bold;color:#000080;padding:4px 6px;background:#d4d0c8;border-left:4px solid #000080;margin-bottom:6px">üèôÔ∏è S√£o Paulo</div>
        <div style="display:grid;grid-template-columns:repeat(3,1fr);gap:8px;">
        ${Object.entries(mun).map(([key, g]) => `
            <div class="scenario-card" onclick="selectGovernorScenario('${key}')">
                <div class="year" style="font-size:18px">${g.emoji} ${g.year}</div>
                <h3>${g.title}</h3>
                <div class="desc">${g.desc}</div>
                <div style="font-size:9px;color:#884400;margin-top:2px">üèôÔ∏è Elei√ß√£o Municipal</div>
            </div>`).join('')}
        </div>
    </div>
    <div style="background:#f0f0f0;border:1px solid #ccc;padding:8px;margin-top:8px">
        <b style="font-size:10px;color:#666">üîí Municipais planejadas:</b><br>
        <small style="color:#888">RJ 2024 (Paes vs Ramagem) ¬∑ BH 2024 ¬∑ Salvador 2024 ¬∑ Recife 2024 ¬∑ Fortaleza 2024 ¬∑ SP 2020 ¬∑ RJ 2020 ¬∑ e mais...</small>
    </div>`;
}

function renderGovernorScenarios(list) {
    list.style.display = 'block';
    list.style.gridTemplateColumns = '';

    // Group by state, exclude municipals
    const byState = {};
    Object.entries(governorData).forEach(([key, g]) => {
        if(g.isMunicipal) return; // municipais ficam na aba pr√≥pria
        if(!byState[g.stateFullName]) byState[g.stateFullName] = [];
        byState[g.stateFullName].push([key, g]);
    });

    list.innerHTML = '';
    Object.entries(byState).forEach(([stateName, elections]) => {
        list.innerHTML += `<div style="margin-bottom:12px;">
            <div style="font-size:11px;font-weight:bold;color:#000080;padding:4px 6px;background:#d4d0c8;border-left:4px solid #000080;margin-bottom:6px">
                üó∫Ô∏è ${stateName}
            </div>
            <div style="display:grid;grid-template-columns:repeat(3,1fr);gap:8px;">
            ${elections.map(([key, g]) => `
                <div class="scenario-card" onclick="selectGovernorScenario('${key}')">
                    <div class="year" style="font-size:18px">${g.emoji} ${g.year}</div>
                    <h3>${g.title}</h3>
                    <div class="desc">${g.desc}</div>
                    <div style="font-size:9px;color:#006600;margin-top:2px">üó∫Ô∏è Elei√ß√£o Estadual</div>
                </div>`).join('')}
            </div>
        </div>`;
    });
}

function renderIndirectScenarios(list) {
    list.style.display = 'grid';
    list.style.gridTemplateColumns = 'repeat(3,1fr)';
    list.style.gap = '8px';

    const indirect = [];
    const lockedInd = [];
    Object.entries(scenariosData).forEach(([key, sc]) => {
        if(sc.available && sc.indirect) indirect.push([key,sc]);
        else if(!sc.available && (key.endsWith('_i') || (sc.indirect))) lockedInd.push([key,sc]);
    });

    list.innerHTML += `<div style="grid-column:1/-1;font-size:10px;font-weight:bold;color:#8b0000;padding:2px 0;border-bottom:1px solid #cc9999;margin-bottom:4px">üèõÔ∏è COL√âGIOS ELEITORAIS & ELEI√á√ïES INDIRETAS</div>`;
    indirect.forEach(([key, sc]) => {
        list.innerHTML += `<div class="scenario-card indirect" onclick="selectScenarioSound('${key}')">
            <div class="year" style="color:#8b0000;font-size:18px">${sc.emoji} ${sc.year}</div>
            <h3>${sc.title}</h3>
            <div class="desc" style="color:#663333">${sc.desc}</div>
            <div style="font-size:9px;color:#8b4513;margin-top:3px;background:#ffeedd;padding:2px;border-radius:2px">üèõÔ∏è Sistema especial de vota√ß√£o</div>
        </div>`;
    });
    if(lockedInd.length) {
        list.innerHTML += `<div style="grid-column:1/-1;font-size:10px;font-weight:bold;color:#666;padding:4px 0;border-bottom:1px solid #ccc;margin-top:8px;margin-bottom:4px">üîí EM DESENVOLVIMENTO</div>`;
        lockedInd.forEach(([key,sc]) => {
            list.innerHTML += `<div class="scenario-card locked">
                <div class="year" style="font-size:14px">üîí ${sc.year}</div>
                <h3>${sc.title || key}</h3>
                <div class="desc">${sc.desc_locked||'Em desenvolvimento'}</div>
            </div>`;
        });
    }
}


function renderRepVelhaScenarios(list) {
    list.style.display = 'grid';
    list.style.gridTemplateColumns = 'repeat(3,1fr)';
    list.style.gap = '8px';
    list.innerHTML = `<div style="grid-column:1/-1;font-size:10px;font-weight:bold;color:#8b4513;padding:2px 0;border-bottom:2px solid #8b4513;margin-bottom:4px">üìú REP√öBLICA VELHA (1894‚Äì1930) ‚Äî Elei√ß√µes diretas sem 2¬∫ turno</div>`;
    Object.entries(repvelhaData).forEach(([key, sc]) => {
        list.innerHTML += `<div class="scenario-card" style="background:#fff9f0;border-color:#8b4513" onclick="selectRepVelhaScenario('${key}')">
            <div class="year" style="color:#8b4513">${sc.emoji} ${sc.year}</div>
            <h3>${sc.title}</h3>
            <div class="desc">${sc.desc}</div>
            <div style="font-size:9px;color:#8b4513;margin-top:2px">üìú Rep. Velha ‚Äî Sem 2¬∫ turno</div>
        </div>`;
    });
}

function renderCountryScenarios(list) {
    list.style.display = 'block';
    list.innerHTML = '';
    list.innerHTML += `<div style="margin-bottom:12px">
        <div style="font-size:11px;font-weight:bold;color:#000080;padding:4px 6px;background:#d4d0c8;border-left:4px solid #cc0000;margin-bottom:6px">üá∫üá∏ Estados Unidos</div>
        <div style="display:grid;grid-template-columns:repeat(3,1fr);gap:8px">
            <div class="scenario-card" onclick="selectInternationalScenario('USA2024')">
                <div class="year" style="color:#cc0000">üá∫üá∏ 2024</div>
                <h3>Elei√ß√£o Presidencial EUA</h3>
                <div class="desc">Trump vs Harris ‚Äî Col√©gio Eleitoral</div>
                <div style="font-size:9px;color:#000080;margin-top:2px">üèõÔ∏è Col√©gio Eleitoral ‚Äî 270 votos necess√°rios</div>
            </div>
        </div>
    </div>
    <div style="margin-bottom:12px">
        <div style="font-size:11px;font-weight:bold;color:#000080;padding:4px 6px;background:#d4d0c8;border-left:4px solid #cc0000;margin-bottom:6px">üá∑üá∫ R√∫ssia</div>
        <div style="display:grid;grid-template-columns:repeat(3,1fr);gap:8px">
            <div class="scenario-card" onclick="selectInternationalScenario('RUS2024')" style="background:#fff5f5;border-color:#cc2222">
                <div class="year" style="color:#cc0000">üá∑üá∫ 2024</div>
                <h3>Elei√ß√µes Russas 2024</h3>
                <div class="desc">Putin vs oposi√ß√£o simb√≥lica</div>
                <div style="font-size:9px;color:#8b0000;margin-top:2px">‚ö†Ô∏è Elei√ß√£o em contexto autorit√°rio</div>
            </div>
        </div>
    </div>`;
    const locked = [
        {flag:'üá©üá™',name:'Alemanha'},  {flag:'üá´üá∑',name:'Fran√ßa'},
        {flag:'üá¶üá∑',name:'Argentina'}, {flag:'üáÆüáπ',name:'It√°lia'},
        {flag:'üáµüáπ',name:'Portugal'},  {flag:'üá™üá∏',name:'Espanha'},
        {flag:'üá¨üáß',name:'Reino Unido'},{flag:'üá≤üáΩ',name:'M√©xico'},
        {flag:'üá®üá¶',name:'Canad√°'},    {flag:'üáØüáµ',name:'Jap√£o'},
        {flag:'üáÆüá≥',name:'√çndia'},     {flag:'üáªüá™',name:'Venezuela'},
    ];
    list.innerHTML += `<div style="margin-bottom:8px">
        <div style="font-size:11px;font-weight:bold;color:#666;padding:4px 6px;background:#d4d0c8;border-left:4px solid #888;margin-bottom:6px">üîí EM DESENVOLVIMENTO</div>
        <div style="display:grid;grid-template-columns:repeat(3,1fr);gap:8px">
        ${locked.map(c=>`<div class="scenario-card locked">
            <div class="year" style="font-size:18px">${c.flag} üîí</div>
            <h3>${c.name}</h3>
            <div class="desc">Em desenvolvimento</div>
        </div>`).join('')}
        </div>
    </div>`;
}

function renderAchievements(list) {
    list.style.display = 'block';
    list.innerHTML = `<div style="font-size:11px;font-weight:bold;color:#000080;padding:4px 6px;background:#d4d0c8;border-left:4px solid gold;margin-bottom:8px">üèÜ CONQUISTAS ‚Äî ${Object.keys(achievements).length}/${achievementDefs.length} desbloqueadas</div>
    <div style="display:grid;grid-template-columns:repeat(3,1fr);gap:8px">
    ${achievementDefs.map(def=>{
        let earned = achievements[def.id];
        return '<div style="padding:10px;background:'+(earned?'#fffde8':'#eee')+';border:2px solid '+(earned?'var(--gold)':'#ccc')+';text-align:center;border-radius:2px"><div style="font-size:24px">'+(earned?def.emoji:'üîí')+'</div><b style="font-size:11px;color:'+(earned?'#000':'#888')+'">'+def.name+'</b><br><small style="color:#555">'+def.desc+'</small></div>';
    }).join('')}
    </div>
    <div style="margin-top:12px;padding:8px;background:#fff8e8;border:1px solid #cc9900"><b>üìä ESTAT√çSTICAS</b><br><small>Conquistas desbloqueadas: <b>${Object.keys(achievements).length}/${achievementDefs.length}</b></small></div>`;
}

function selectRepVelhaScenario(key) {
    playSound(523, 80);
    setTimeout(() => playSound(659, 80), 90);
    setTimeout(() => playSound(784, 120), 180);
    const sc = scenariosData[key];
    currentScenario = key;
    game.isRepVelha = true;
    game.isGovernor = false;
    game.isElectoralCollege = false;
    candidatesData = JSON.parse(JSON.stringify(sc.candidates));
    partyPool = sc.partyPoolOverride ? JSON.parse(JSON.stringify(sc.partyPoolOverride)) : [];
    document.getElementById("scenario-screen").classList.remove("active");
    document.getElementById("setup-screen").classList.add("active");
    document.getElementById("setup-title").innerHTML = `<h2 style="margin:5px 0">${sc.emoji} ${sc.title.toUpperCase()}</h2><p style="font-size:11px;color:#8b4513;margin:2px 0">üìú Rep√∫blica Velha ‚Äî Sem segundo turno</p>`;
    document.getElementById("news-date").innerText = sc.newsHeader || sc.year;
    const setup = document.getElementById("setup-candidates");
    setup.innerHTML = "";
    for(let k in candidatesData) {
        setup.innerHTML += `<div class="card" style="text-align:center;padding:5px;"><b>${candidatesData[k].name}</b><br><small>${candidatesData[k].party}</small><br><small style="color:#666">${candidatesData[k].ideologia}</small><br><button class="btn" onclick="startRepVelhaGame('${k}','${key}')">ESCOLHER</button></div>`;
    }
}

function startRepVelhaGame(id, scKey) {
    const sc = scenariosData[scKey];
    game.player = id; game.scenario = scKey;
    game.isGovernor = false; game.isRepVelha = true; game.isElectoralCollege = false;
    game.difficulty = parseInt(document.getElementById("difficulty-level").value);
    game.mode = document.getElementById("game-mode").value;
    game.money = candidatesData[id].money;
    game.points = game.difficulty === 1 ? 6 : (game.difficulty === 3 ? 2 : 4);
    game.energy = 100; game.firedHistoricalEvents = [];
    game.availableParties = JSON.parse(JSON.stringify(partyPool));
    game.coalition = []; game.news = []; game.scandalLevels = {};
    game.approvals = {}; game.momentumTracker = {}; game.congressSeats = {};
    game.stateVotes = {}; game.pollHistory = []; game.defeatedCandidates = [];
    game.fase = 1; game.turn = 1;
    game.candidates = Object.keys(candidatesData).map(k => ({id: k, ...candidatesData[k], votes: candidatesData[k].start}));
    game.candidates.forEach(c => {
        game.scandalLevels[c.id] = 0;
        game.approvals[c.id] = {app: c.votes * 1.1, rej: Math.max(5, 50 - c.votes)};
        game.momentumTracker[c.id] = [];
    });
    sc.regions.forEach(r => {
        game.stateVotes[r.id] = {};
        game.candidates.forEach(c => {
            let cd = candidatesData[c.id];
            let ideoDiff = Math.abs((cd.econ||0)-(r.econ||0)) + Math.abs((cd.soc||0)-(r.soc||0));
            game.stateVotes[r.id][c.id] = Math.max(1, c.votes + (4-ideoDiff)*1.5 + (Math.random()*6-3));
        });
        let sum = Object.values(game.stateVotes[r.id]).reduce((a,b)=>a+b,0);
        game.candidates.forEach(c => game.stateVotes[r.id][c.id] = (game.stateVotes[r.id][c.id]/sum)*100);
    });
    game.pollHistory = []; recordPollSnapshot();
    document.getElementById("setup-screen").classList.remove("active");
    document.getElementById("game-screen").classList.add("active");
    addNews(`ELEI√á√ïES ${sc.year} ‚Äî REP√öBLICA VELHA`, sc.desc);
    renderRegionalMap(sc.regions, '#3a2200');
    renderCampaignActions(); updateUI(); playSound(440);
}

function selectInternationalScenario(key) {
    playSound(523, 80);
    setTimeout(() => playSound(659, 80), 90);
    setTimeout(() => playSound(784, 120), 180);
    const sc = internationalData[key];
    currentScenario = key; game.isGovernor = false; game.isRepVelha = false;
    game.isElectoralCollege = sc.isElectoralCollege || false;
    candidatesData = JSON.parse(JSON.stringify(sc.candidates));
    partyPool = sc.partyPoolOverride ? JSON.parse(JSON.stringify(sc.partyPoolOverride)) : [];
    document.getElementById("scenario-screen").classList.remove("active");
    document.getElementById("setup-screen").classList.add("active");
    let subtitle = sc.isElectoralCollege 
        ? `<p style="font-size:11px;color:#000080;margin:2px 0">üèõÔ∏è Col√©gio Eleitoral ‚Äî 270 votos necess√°rios para vencer</p>`
        : `<p style="font-size:11px;color:#cc0000;margin:2px 0">üåç Elei√ß√£o Internacional ‚Äî Ven√ßa por maioria</p>`;
    document.getElementById("setup-title").innerHTML = `<h2 style="margin:5px 0">${sc.emoji} ${sc.title.toUpperCase()}</h2>${subtitle}`;
    document.getElementById("news-date").innerText = sc.newsHeader || sc.year;
    const setup = document.getElementById("setup-candidates");
    setup.innerHTML = "";
    for(let k in candidatesData) {
        setup.innerHTML += `<div class="card" style="text-align:center;padding:5px;"><b>${candidatesData[k].name}</b><br><small>${candidatesData[k].party}</small><br><small style="color:#666">${candidatesData[k].ideologia}</small><br><button class="btn" onclick="startInternationalGame('${k}','${key}')">ESCOLHER</button></div>`;
    }
}

function startInternationalGame(id, scKey) {
    const sc = internationalData[scKey];
    game.player = id; game.scenario = scKey;
    game.isGovernor = false; game.isRepVelha = false;
    game.isElectoralCollege = sc.isElectoralCollege || false;
    game.difficulty = parseInt(document.getElementById("difficulty-level").value);
    game.mode = document.getElementById("game-mode").value;
    game.money = candidatesData[id].money;
    game.points = game.difficulty === 1 ? 6 : (game.difficulty === 3 ? 2 : 4);
    game.energy = 100; game.firedHistoricalEvents = [];
    game.availableParties = JSON.parse(JSON.stringify(partyPool));
    game.coalition = []; game.news = []; game.scandalLevels = {};
    game.approvals = {}; game.momentumTracker = {}; game.congressSeats = {};
    game.stateVotes = {}; game.pollHistory = []; game.defeatedCandidates = [];
    game.fase = 1; game.turn = 1;
    game.candidates = Object.keys(candidatesData).map(k => ({id: k, ...candidatesData[k], votes: candidatesData[k].start}));
    game.candidates.forEach(c => {
        game.scandalLevels[c.id] = 0;
        game.approvals[c.id] = {app: c.votes * 1.1, rej: Math.max(5, 50 - c.votes)};
        game.momentumTracker[c.id] = [];
    });
    if(sc.isElectoralCollege && sc.electoralStates) {
        sc.electoralStates.forEach(s => {
            game.stateVotes[s.id] = {};
            game.candidates.forEach(c => {
                let cd = candidatesData[c.id];
                let leanBonus = s.lean==='R' ? (c.id==='trump'?10:-10) : s.lean==='D' ? (c.id==='harris'?10:-10) : 0;
                let ideoDiff = Math.abs((cd.econ||0)-(s.econ||0)) + Math.abs((cd.soc||0)-(s.soc||0));
                game.stateVotes[s.id][c.id] = Math.max(1, c.votes + leanBonus + (4-ideoDiff)*1.5 + (Math.random()*8-4));
            });
            let sum = Object.values(game.stateVotes[s.id]).reduce((a,b)=>a+b,0);
            game.candidates.forEach(c => game.stateVotes[s.id][c.id] = (game.stateVotes[s.id][c.id]/sum)*100);
        });
    } else if(sc.regions) {
        sc.regions.forEach(r => {
            game.stateVotes[r.id] = {};
            game.candidates.forEach(c => {
                let cd = candidatesData[c.id];
                let ideoDiff = Math.abs((cd.econ||0)-(r.econ||0)) + Math.abs((cd.soc||0)-(r.soc||0));
                game.stateVotes[r.id][c.id] = Math.max(1, c.votes + (4-ideoDiff)*1.5 + (Math.random()*6-3));
            });
            let sum = Object.values(game.stateVotes[r.id]).reduce((a,b)=>a+b,0);
            game.candidates.forEach(c => game.stateVotes[r.id][c.id] = (game.stateVotes[r.id][c.id]/sum)*100);
        });
    }
    game.pollHistory = []; recordPollSnapshot();
    document.getElementById("setup-screen").classList.remove("active");
    document.getElementById("game-screen").classList.add("active");
    addNews(`ELEI√á√ÉO: ${sc.title.toUpperCase()}`, sc.desc);
    if(sc.isElectoralCollege) {
        renderECMap(sc);
    } else if(sc.regions) {
        renderRegionalMap(sc.regions, '#1a2040');
    }
    renderCampaignActions(); updateUI(); playSound(440);
}

function renderRegionalMap(regions, bgColor) {
    const container = document.getElementById("map-container");
    container.innerHTML = '';
    container.style.background = bgColor || '#004d00';
    regions.forEach(r => {
        const node = document.createElement('div');
        node.id = 'node-'+r.id; node.className = 'state-node';
        node.style.left = r.x+'%'; node.style.top = r.y+'%';
        node.style.width = '36px'; node.style.height = '18px'; node.style.fontSize = '7px';
        node.textContent = r.id; node.title = r.n;
        node.onclick = () => showRegionDetail(r);
        container.appendChild(node);
    });
    updateRegionalMap(regions);
}

function updateRegionalMap(regions) {
    if(!regions) {
        if(game.isRepVelha && scenariosData[game.scenario]) regions = scenariosData[game.scenario].regions;
        else if(game.isGovernor && governorData[currentGovernorKey]) regions = governorData[currentGovernorKey].regions;
        else if(internationalData[game.scenario] && internationalData[game.scenario].regions) regions = internationalData[game.scenario].regions;
        else return;
    }
    regions.forEach(r => {
        let votes = game.stateVotes[r.id];
        if(!votes) return;
        let sorted = Object.entries(votes).sort((a,b)=>b[1]-a[1]);
        const node = document.getElementById('node-'+r.id);
        if(node && sorted.length && candidatesData[sorted[0][0]]) {
            node.style.backgroundColor = candidatesData[sorted[0][0]].color;
        }
    });
}

function renderECMap(sc) {
    const container = document.getElementById("map-container");
    container.innerHTML = ''; container.style.background = '#1a2040';
    sc.electoralStates.forEach(s => {
        const node = document.createElement('div');
        node.id = 'node-'+s.id; node.className = 'state-node';
        node.style.left = s.x+'%'; node.style.top = s.y+'%';
        node.style.width = '18px'; node.style.height = '13px'; node.style.fontSize = '6px';
        node.style.color = 'white';
        node.textContent = s.id; node.title = `${s.n} (${s.ev} EV)`;
        node.onclick = () => {
            let votes = game.stateVotes[s.id];
            if(!votes) return;
            let sorted = Object.entries(votes).sort((a,b)=>b[1]-a[1]);
            let html = `<b>${s.n}</b> ‚Äî ${s.ev} Electoral Votes<br>`;
            sorted.forEach(([cid,v])=>{
                let c = candidatesData[cid];
                if(c) html += `<span style="color:${c.color}">‚ñ†</span> ${c.name}: ${v.toFixed(1)}% &nbsp;`;
            });
            document.getElementById("state-details").innerHTML = html +
                `<br><button class="btn" style="width:auto;font-size:10px" onclick="campaignEC('${s.id}',${s.ev})">Fazer Campanha (3p, $5M)</button>`;
        };
        container.appendChild(node);
    });
    updateECMapColors(sc);
}

function updateECMapColors(sc) {
    if(!sc) sc = internationalData[game.scenario];
    if(!sc) return;
    sc.electoralStates.forEach(s => {
        let votes = game.stateVotes[s.id];
        if(!votes) return;
        let sorted = Object.entries(votes).sort((a,b)=>b[1]-a[1]);
        const node = document.getElementById('node-'+s.id);
        if(node && sorted.length && candidatesData[sorted[0][0]]) {
            node.style.backgroundColor = candidatesData[sorted[0][0]].color;
        }
    });
}

function campaignEC(sid, evWeight) {
    if(game.points < 3 || game.money < 5) { log("Not enough points or money."); return; }
    game.points -= 3; game.money -= 5;
    let mult = energyMultiplier();
    game.stateVotes[sid][game.player] = (game.stateVotes[sid][game.player]||50) + evWeight * 1.5;
    updateNationalVotes(game.player, evWeight * 0.15 * mult);
    spendEnergy(10);
    log(`Campaign in ${sid} (${evWeight} EV). Good outreach!`);
    updateUI();
}

function getEVCounts() {
    const sc = internationalData[game.scenario];
    if(!sc) return {};
    let evCounts = {};
    game.candidates.forEach(c => evCounts[c.id] = 0);
    sc.electoralStates.forEach(s => {
        let votes = game.stateVotes[s.id];
        if(!votes) return;
        let sorted = Object.entries(votes).sort((a,b)=>b[1]-a[1]);
        if(sorted.length) evCounts[sorted[0][0]] = (evCounts[sorted[0][0]]||0) + s.ev;
    });
    return evCounts;
}

function selectGovernorScenario(key) {
    playSound(523, 80);
    setTimeout(() => playSound(659, 80), 90);
    setTimeout(() => playSound(784, 120), 180);
    currentGovernorKey = key;
    const g = governorData[key];
    candidatesData = JSON.parse(JSON.stringify(g.candidates));
    partyPool = g.partyPoolOverride ? JSON.parse(JSON.stringify(g.partyPoolOverride)) : [];

    document.getElementById("scenario-screen").classList.remove("active");
    document.getElementById("setup-screen").classList.add("active");
    document.getElementById("setup-title").innerHTML = `<h2 style="margin:5px 0">${g.emoji} ${g.title.toUpperCase()}</h2><p style="font-size:11px;color:#555;margin:2px 0">üó∫Ô∏è Elei√ß√£o Estadual ‚Äî ${g.stateFullName}</p>`;
    document.getElementById("news-date").innerText = g.newsHeader || g.year;

    const setup = document.getElementById("setup-candidates");
    setup.innerHTML = "";
    for(let k in candidatesData) {
        setup.innerHTML += `<div class="card" style="text-align:center;padding:5px;">
            <b>${candidatesData[k].name}</b><br><small>${candidatesData[k].party}</small><br>
            <small style="color:#666">${candidatesData[k].ideologia}</small><br>
            <button class="btn" onclick="startGovernorGame('${k}')">ESCOLHER</button>
        </div>`;
    }
}

function startGovernorGame(id) {
    playSound(440);
    const g = governorData[currentGovernorKey];
    game.player = id;
    game.scenario = currentGovernorKey;
    game.isGovernor = true;
    game.difficulty = parseInt(document.getElementById("difficulty-level").value);
    game.mode = document.getElementById("game-mode").value;
    game.money = candidatesData[id].money;
    game.points = game.difficulty === 1 ? 6 : (game.difficulty === 3 ? 2 : 4);
    game.energy = 100;
    game.firedHistoricalEvents = [];
    game.availableParties = JSON.parse(JSON.stringify(partyPool));
    game.coalition = [];
    game.news = [];
    game.scandalLevels = {};
    game.approvals = {};
    game.momentumTracker = {};
    game.congressSeats = {};
    game.pollHistory = [];
    game.defeatedCandidates = [];
    game.fase = 1;
    game.turn = 1;

    game.candidates = Object.keys(candidatesData).map(k => ({
        id: k, ...candidatesData[k], votes: candidatesData[k].start
    }));

    game.candidates.forEach(c => {
        game.scandalLevels[c.id] = 0;
        game.approvals[c.id] = {app: c.votes * 1.1, rej: Math.max(5, 50 - c.votes)};
        game.momentumTracker[c.id] = [];
    });

    // Use governor regions instead of states
    game.stateVotes = {};
    const regions = g.regions;
    regions.forEach(r => {
        game.stateVotes[r.id] = {};
        game.candidates.forEach(c => {
            let cd = candidatesData[c.id];
            let ideoDiff = Math.abs((cd.econ||0)-(r.econ||0)) + Math.abs((cd.soc||0)-(r.soc||0));
            let ideoBonus = (4 - ideoDiff) * 1.5;
            game.stateVotes[r.id][c.id] = Math.max(1, c.votes + ideoBonus + (Math.random()*6-3));
        });
        let sum = Object.values(game.stateVotes[r.id]).reduce((a,b)=>a+b,0);
        game.candidates.forEach(c => game.stateVotes[r.id][c.id] = (game.stateVotes[r.id][c.id]/sum)*100);
    });

    game.pollHistory = [];
    recordPollSnapshot();

    document.getElementById("setup-screen").classList.remove("active");
    document.getElementById("game-screen").classList.add("active");
    addNews(`ELEI√á√ïES ${g.year} ‚Äî ${g.stateFullName.toUpperCase()}`, g.desc);

    // Override map rendering for governor game
    renderGovernorMap();
    renderCampaignActions();
    updateUI();
}

function renderGovernorMap() {
    const g = governorData[currentGovernorKey];
    if(!g) return;
    const container = document.getElementById("map-container");
    container.innerHTML = '';
    container.style.background = '#004d00';

    g.regions.forEach(r => {
        const node = document.createElement('div');
        node.id = 'node-'+r.id;
        node.className = 'state-node';
        node.style.left = r.x+'%';
        node.style.top = r.y+'%';
        node.style.width = '32px';
        node.style.height = '18px';
        node.style.fontSize = '7px';
        node.textContent = r.id;
        node.title = r.n;
        node.onclick = () => showRegionDetail(r);
        container.appendChild(node);
    });
    updateGovernorMap();
}

function updateGovernorMap() {
    const g = governorData[currentGovernorKey];
    if(!g) return;
    g.regions.forEach(r => {
        let votes = game.stateVotes[r.id];
        if(!votes) return;
        let sorted = Object.entries(votes).sort((a,b)=>b[1]-a[1]);
        if(sorted.length && candidatesData[sorted[0][0]]) {
            const node = document.getElementById('node-'+r.id);
            if(node) node.style.backgroundColor = candidatesData[sorted[0][0]].color;
        }
    });
}

function showRegionDetail(r) {
    let votes = game.stateVotes[r.id];
    if(!votes) return;
    let sorted = Object.entries(votes).sort((a,b)=>b[1]-a[1]);
    let html = `<b>${r.n}</b> | Pop. rel.: ${r.p}%<br>`;
    sorted.forEach(([id, v]) => {
        let c = candidatesData[id];
        if(c) html += `<span style="color:${c.color}">‚ñ†</span> ${c.name}: ${v.toFixed(1)}% &nbsp;`;
    });
    document.getElementById("state-details").innerHTML = html;
}

function selectScenarioSound(key) {
    playSound(523, 80);
    setTimeout(() => playSound(659, 80), 90);
    setTimeout(() => playSound(784, 120), 180);
    const sc = scenariosData[key];
    if(sc && sc.indirect) {
        startIndirectGame(key);
    } else {
        selectScenario(key);
    }
}

function selectScenario(key) {
    currentScenario = key;
    const sc = scenariosData[key];
    candidatesData = JSON.parse(JSON.stringify(sc.candidates));
    partyPool = sc.partyPoolOverride ? JSON.parse(JSON.stringify(sc.partyPoolOverride)) : [];
    
    document.getElementById("scenario-screen").classList.remove("active");
    document.getElementById("setup-screen").classList.add("active");
    document.getElementById("setup-title").innerHTML = `<h2 style="margin:5px 0">${sc.emoji} ${sc.title.toUpperCase()}</h2>`;
    document.getElementById("news-date").innerText = sc.newsHeader || sc.year;
    
    const setup = document.getElementById("setup-candidates");
    setup.innerHTML = "";
    for(let k in candidatesData) {
        setup.innerHTML += `<div class="card" style="text-align:center; padding: 5px;">
            <b>${candidatesData[k].name}</b><br><small>${candidatesData[k].party}</small><br>
            <small style="color:#666">${candidatesData[k].ideologia}</small><br>
            <button class="btn" onclick="startGame('${k}')">ESCOLHER</button>
        </div>`;
    }
}

function goToScenarios() {
    document.getElementById("setup-screen").classList.remove("active");
    document.getElementById("indirect-screen").classList.remove("active");
    document.getElementById("scenario-screen").classList.add("active");
}

function startCustomGame() {
    const name = document.getElementById("custom-name").value || "Voc√™";
    const partySelect = document.getElementById("custom-party");
    const party = partySelect.value;
    const side = (party === 'PSTU' || party === 'PV') ? 'E' : 'D';
    candidatesData['custom'] = {name: name.toUpperCase(), party: party, start: 5, money: 30, side: side, color: "#8b4513", econ: side==='E'?-1:1, soc: side==='E'?1:-1, nat: 0, bio: "Um candidato independente que desafiou as estruturas tradicionais. Com uma proposta focada em renova√ß√£o, conseguiu mobilizar setores descontentes da sociedade civil.", ideologia: "Independente"};
    startGame('custom');
}

function startGame(id) {
    playSound(440);
    game.player = id;
    game.scenario = currentScenario;
    game.isGovernor = false;
    game.isRepVelha = false;
    game.isElectoralCollege = false;
    game.difficulty = parseInt(document.getElementById("difficulty-level").value);
    game.mode = document.getElementById("game-mode").value;
    game.money = candidatesData[id].money;
    game.points = game.difficulty === 1 ? 6 : (game.difficulty === 3 ? 2 : 4);
    game.energy = 100;
    game.firedHistoricalEvents = [];
    game.availableParties = JSON.parse(JSON.stringify(partyPool));
    game.coalition = [];
    game.news = [];
    game.scandalLevels = {};
    game.approvals = {};
    game.momentumTracker = {};
    game.congressSeats = {};
    game.stateVotes = {};
    game.pollHistory = [];
    game.defeatedCandidates = [];
    game.fase = 1;
    game.turn = 1;
    
    game.candidates = Object.keys(candidatesData).map(k => ({
        id: k, ...candidatesData[k], votes: candidatesData[k].start
    }));

    if(game.mode === 'caotico') {
        game.candidates.forEach(c => { c.votes = 10 + Math.random() * 25; });
        let s = game.candidates.reduce((a,b) => a + b.votes, 0);
        game.candidates.forEach(c => c.votes = (c.votes/s)*100);
    }
    
    game.candidates.forEach(c => {
        game.scandalLevels[c.id] = 0;
        game.approvals[c.id] = {app: c.votes * 1.1, rej: Math.max(5, 50 - c.votes)};
        game.momentumTracker[c.id] = [];
    });

    allStates.forEach(s => {
        game.stateVotes[s.id] = {};
        game.candidates.forEach(c => {
            let cd = candidatesData[c.id];
            let ideoDiff = Math.abs((cd.econ||0) - (s.econ||0)) + Math.abs((cd.soc||0) - (s.soc||0)) + Math.abs((cd.nat||0) - (s.nat||0));
            let ideoBonus = (6 - ideoDiff) * 1.5;
            game.stateVotes[s.id][c.id] = Math.max(1, c.votes + ideoBonus + (Math.random()*6 - 3));
        });
        let stateSum = Object.values(game.stateVotes[s.id]).reduce((a,b)=>a+b, 0);
        game.candidates.forEach(c => game.stateVotes[s.id][c.id] = (game.stateVotes[s.id][c.id]/stateSum)*100);
    });

    game.pollHistory = [];
    recordPollSnapshot();

    document.getElementById("setup-screen").classList.remove("active");
    document.getElementById("game-screen").classList.add("active");
    let sc = scenariosData[currentScenario];
    addNews(`ELEI√á√ïES ${sc.year}`, `Inicia-se a corrida eleitoral. ${sc.desc}`);
    renderMap(); renderCampaignActions(); updateUI();
}

function showTab(t) {
    playSound(400, 50);
    ['campanha', 'estrategia', 'regioes', 'jornal', 'opcoes'].forEach(tab => {
        const el = document.getElementById('tab-' + tab);
        if(el) el.style.display = tab === t ? 'block' : 'none';
    });
    if(t === 'campanha') renderCampaignActions();
    if(t === 'estrategia') renderAdversaries();
    if(t === 'regioes') renderRegions();
    if(t === 'jornal') renderNews();
}

function renderCampaignActions() {
    const div = document.getElementById('tab-campanha');
    if(!div) return;
    let year = parseInt(game.scenario) || 2000;
    let isOld = game.isRepVelha || year < 1960;
    let isMid = !isOld && year < 1990;
    let isModern = year >= 2010;
    let isUS = game.isElectoralCollege;

    let html = `<div style="font-size:10px;margin-bottom:4px"><b>ENERGIA:</b> <span id="fatigue-label">${game.energy}%</span>
    <div class="fatigue-bar"><div class="fatigue-pointer" id="fatigue-ptr" style="left:${100-game.energy}%"></div></div></div>`;

    html += `<b>COMUNICA√á√ÉO</b>`;
    if(isOld) {
        html += `<button class="btn" onclick="actionJornal()">üì∞ An√∫ncio em Jornal (2p, R$5M) ‚≠ê</button>
                 <button class="btn" onclick="actionRadio()">üìª Inser√ß√µes de R√°dio (3p, R$6M)</button>
                 <button class="btn" onclick="actionComicioPra√ßa()">üé∫ Com√≠cio na Pra√ßa (3p, R$4M)</button>`;
    } else if(isMid) {
        html += `<button class="btn" onclick="actionTV()">üì∫ Hor√°rio Eleitoral (6p, R$12M)</button>
                 <button class="btn" onclick="actionRadio()">üìª Inser√ß√µes de R√°dio (3p, R$6M)</button>
                 <button class="btn" onclick="actionJornal()">üì∞ An√∫ncio em Jornal (2p, R$5M)</button>
                 <button class="btn" onclick="actionEntrevista()">üéôÔ∏è Entrevista em Rede (4p)</button>`;
    } else if(isModern) {
        html += `<button class="btn" onclick="actionTV()">üì∫ Hor√°rio Eleitoral (6p, R$12M)</button>
                 <button class="btn" onclick="actionRadio()">üìª Inser√ß√µes de R√°dio (3p, R$6M)</button>
                 <button class="btn" onclick="actionEntrevista()">üéôÔ∏è Entrevista em Rede (4p)</button>
                 <button class="btn" onclick="actionRedesSociais()">üì± Redes Sociais (2p, R$4M)</button>`;
    } else if(isUS) {
        html += `<button class="btn" onclick="actionTV()">üì∫ An√∫ncios de TV Nacional (6p, $12M)</button>
                 <button class="btn" onclick="actionRadio()">üìª Spots de R√°dio (3p, $6M)</button>
                 <button class="btn" onclick="actionRedesSociais()">üì± Redes Sociais (2p, $4M)</button>
                 <button class="btn" onclick="actionEntrevista()">üéôÔ∏è Entrevista em Rede Nacional (4p)</button>`;
    } else {
        html += `<button class="btn" onclick="actionTV()">üì∫ Hor√°rio Eleitoral Nacional (6p, R$12M)</button>
                 <button class="btn" onclick="actionRadio()">üìª Inser√ß√µes de R√°dio (3p, R$6M)</button>
                 <button class="btn" onclick="actionEntrevista()">üéôÔ∏è Entrevista em Rede (4p)</button>`;
    }

    html += `<b>FINANCEIRO</b>
    <button class="btn" onclick="actionCaixaEmpresarial()">üè≠ Arrecadar: Empres√°rios (2p, risco)</button>
    <button class="btn" onclick="actionCaixaSindical()">‚öíÔ∏è Arrecadar: Sindicatos (2p)</button>
    <button class="btn" onclick="actionCaixaPopular()">üèòÔ∏è Arrecadar: Vaquinha (1p)</button>
    <b>ESTRAT√âGIA</b>
    <button class="btn" id="btn-alliance" onclick="openAllianceMenu()">ü§ù Negociar Alian√ßas (4p)</button>
    <button class="btn" style="background:#ffe0e0" onclick="actionInvestigar()">üîç Investigar Rival (4p)</button>
    <button class="btn" style="background:#e0ffe0" onclick="actionAbafar()">ü§´ Abafar Esc√¢ndalo (R$15M)</button>
    <button class="btn" onclick="actionDescansar()">üò¥ Descansar (1p)</button>
    <button class="btn" style="background:#eee" onclick="showTab('estrategia')">‚öîÔ∏è Ataque & Apoio</button>`;

    div.innerHTML = html;
}

function addNews(title, text) {
    game.news.unshift({title: title.toUpperCase(), text: text});
    if(game.news.length > 15) game.news.pop();
}

// Twitter-style accounts for social media feed
const twitterAccounts = {
    // Perfis de Esquerda
    E: [
        {handle:'@lulaforever13', name:'Petista Raiz ü¶ï', type:'f√£'},
        {handle:'@progressista_br', name:'Cidad√£ Progressista', type:'normal'},
        {handle:'@stf_f√£_oficial', name:'Defensor da Democracia', type:'normal'},
        {handle:'@mst.landless', name:'Movimento dos Sem Terra', type:'org'},
        {handle:'@esquerda.memes', name:'Memes da Resist√™ncia üí™', type:'meme'},
        {handle:'@votolula22', name:'Volunt√°rio da Campanha', type:'ativista'},
        {handle:'@brizola.filho', name:'Trabalhista Hist√≥rico', type:'normal'},
        {handle:'@quilombo.digital', name:'Quilombo Digital', type:'org'},
    ],
    // Perfis de Direita
    D: [
        {handle:'@bolsonaro.mito', name:'Mito Eterno üáßüá∑', type:'f√£'},
        {handle:'@liberal.cl√°ssico', name:'Liberal Cl√°ssico üìö', type:'normal'},
        {handle:'@conservador.br', name:'Conservador Raiz', type:'normal'},
        {handle:'@agro.√©.pop', name:'AgroPOP üåæ', type:'normal'},
        {handle:'@direita.memes', name:'Memes da Direita üòÇ', type:'meme'},
        {handle:'@militares.hist√≥rico', name:'Patriota Hist√≥rico', type:'normal'},
        {handle:'@b√≠blia.pol√≠tica', name:'Fam√≠lia Brasil üôè', type:'org'},
        {handle:'@tarcisiof√£clube', name:'F√£ Clube Tarc√≠sio', type:'f√£'},
    ],
    // Perfis de Centro / Neutros / Not√≠cias
    C: [
        {handle:'@g1.pol', name:'G1 Pol√≠tica', type:'not√≠cia'},
        {handle:'@folha_pol', name:'Folha de S.Paulo', type:'not√≠cia'},
        {handle:'@uol_noticias', name:'UOL Not√≠cias', type:'not√≠cia'},
        {handle:'@datafolha_real', name:'Datafolha', type:'pesquisa'},
        {handle:'@estad√£o_digital', name:'Estad√£o Digital', type:'not√≠cia'},
        {handle:'@bbc_brasil', name:'BBC Brasil', type:'not√≠cia'},
        {handle:'@eleicoes.hoje', name:'Elei√ß√µes Hoje üó≥Ô∏è', type:'an√°lise'},
        {handle:'@eleicoes.memes', name:'Memes das Elei√ß√µes üòÇ', type:'meme'},
        {handle:'@z√©.eleitor', name:'Z√© da Padaria', type:'normal'},
        {handle:'@maria.pol√≠tica', name:'Maria Curiosa', type:'normal'},
        {handle:'@vitor.neutro', name:'Vitor Imparcial ü§∑', type:'normal'},
    ]
};

// Meme templates
const memeTemplates = [
    (cand) => `BREAKING: ${cand} saiu para fazer campanha e encontrou um cachorro abandonado. Adotou na hora. J√° tem 2 milh√µes de curtidas. A oposi√ß√£o t√° em p√¢nico üò≠`,
    (cand) => `Meu tio que nunca falava de pol√≠tica foi jantar hoje e ficou 2 horas falando de ${cand}. Estamos perdidos üíÄ`,
    (cand) => `${cand}: [fala algo] | M√≠dia mainstream: üî¥URGENTEüî¥ | Redes sociais: BEM-VINDO AO BRASIL 2024 üò≠`,
    (cand) => `POV: Voc√™ √© o ${cand} e acabou de abrir o Twitter üíÄüíÄüíÄ`,
    (cand) => `Se ${cand} ganhar: ‚úÖ Meu tio fica calado no churrasco ‚úÖ Minha av√≥ para de mandar correntes ‚úÖ O pa√≠s melhora`,
    (cand) => `Quantos seguidores o ${cand} vai ter depois dessa entrevista: [gr√°fico exponencial subindo] üìà`,
    () => `As pesquisas: [candidatos empatados] | Os eleitores nas redes sociais: NOSSA LADO T√Å GANHANDO F√ÅCIL`,
    () => `Debate pol√≠tico no Twitter em 2024: Eu > Voc√™ > Seu candidato > A pol√≠tica em geral > A humanidade`,
    () => `Lembrei que tenho que votar daqui alguns meses e ainda nem sei em quem. Algu√©m me explica o que t√° acontecendo? üò≠`,
    () => `Essa elei√ß√£o me deixou t√£o estressado que fui dormir √†s 22h. Acordei √†s 3h pra checar as pesquisas. N√£o to bem.`,
    () => `Minha vizinha botou bandeira do candidato dela. Minha m√£e botou bandeira do candidato dela. Eu to de mudan√ßa.`,
    () => `[Pesquisa saiu] Esquerda: VAMOS GANHAR!! Direita: A PESQUISA √â FAKE!! | [Outro resultado] Direita: VAMOS GANHAR!! Esquerda: A PESQUISA √â FAKE!!`,
];

const normalTweets = [
    (news) => `${news.title.toLowerCase()} aconteceu e minha timeline t√° um caos absoluto. Bom dia.`,
    (news) => `N√£o acredito que preciso comentar sobre ${news.title.toLowerCase()} no meu domingo de folga`,
    (news) => `Esses neg√≥cios de ${news.title.toLowerCase()} t√£o me deixando doido. Quem votou nisso se manifeste`,
    (news) => `Todo mundo falando de pol√≠tica e eu aqui s√≥ querendo saber se vai ter jogo hoje`,
    () => `Gente, parem de me perguntar em quem vou votar. N√ÉO SEI. A mesma pessoa de sempre? Sei l√°.`,
    () => `Del√≠cia de domingo at√© abrir o Twitter e lembrar que elei√ß√£o t√° chegando`,
    () => `Minha timeline √©: pol√≠tica, meme de pol√≠tica, pesquisa, mais meme, gato, pol√≠tica de novo`,
    () => `N√£o existe "voto √∫til". Existe voto estrat√©gico. Existe voto ideol√≥gico. Existe voto "minha m√£e me mandou votar nisso".`,
];

function generateTweet(newsItem) {
    let cands = game.candidates;
    let playerC = candidatesData[game.player];
    let roll = Math.random();
    
    // Choose account pool
    let pool;
    if(roll < 0.35) pool = twitterAccounts.C;
    else if(roll < 0.6) pool = twitterAccounts[playerC?.side||'C'];
    else pool = twitterAccounts.D;
    
    let account = pool[Math.floor(Math.random()*pool.length)];
    let likes = Math.floor(Math.random() * 25000) + 100;
    let comments = Math.floor(Math.random() * 3000) + 20;
    let reposts = Math.floor(Math.random() * 8000) + 30;
    
    // Choose tweet content
    let tweetText;
    let isMeme = account.type === 'meme' || Math.random() > 0.65;
    let isNormal = account.type === 'normal' || account.type === 'f√£' || account.type === 'ativista';
    let isNews = account.type === 'not√≠cia' || account.type === 'pesquisa' || account.type === 'an√°lise';
    
    if(isNews) {
        tweetText = `${newsItem.title}: ${newsItem.text}`;
    } else if(isMeme) {
        let meme = memeTemplates[Math.floor(Math.random()*memeTemplates.length)];
        let candNames = Object.values(candidatesData).map(c=>c.name);
        let randCand = candNames[Math.floor(Math.random()*candNames.length)];
        tweetText = meme(randCand);
    } else {
        let normalTweet = normalTweets[Math.floor(Math.random()*normalTweets.length)];
        tweetText = normalTweet(newsItem);
    }
    
    let verifiedBadge = (account.type==='not√≠cia'||account.type==='org') ? ' ‚úì' : '';
    let bgColor = account.type==='meme' ? '#fff8e1' : account.type==='not√≠cia' ? '#f8f8ff' : 'white';
    
    return `<div style="border:1px solid #e0e0e0;padding:8px;margin:4px 0;background:${bgColor};border-radius:4px;font-family:Arial;font-size:11px">
        <div style="display:flex;align-items:center;gap:6px;margin-bottom:4px">
            <div style="width:28px;height:28px;border-radius:50%;background:${account.type==='meme'?'#ffcc00':account.type==='not√≠cia'?'#000080':'#888'};display:flex;align-items:center;justify-content:center;color:white;font-size:10px;font-weight:bold">${account.name[0]}</div>
            <div><b style="color:#000;font-size:11px">${account.name}${verifiedBadge}</b><br><span style="color:#888;font-size:10px">${account.handle}</span></div>
        </div>
        <div style="margin:4px 0;color:#222;line-height:1.3">${tweetText}</div>
        <div style="color:#888;font-size:10px;margin-top:4px">‚ù§Ô∏è ${likes.toLocaleString('pt-BR')} &nbsp; üí¨ ${comments.toLocaleString('pt-BR')} &nbsp; üîÅ ${reposts.toLocaleString('pt-BR')}</div>
    </div>`;
}

function renderNews() {
    let year = parseInt(game.scenario) || 2000;
    const feed = document.getElementById("news-feed");
    const header = document.getElementById("tab-jornal").querySelector('.news-header');
    
    if(year >= 2010 && !game.isRepVelha) {
        // Social media style
        if(header) header.innerHTML = `<div style="background:#1a8cd8;color:white;padding:8px;border-radius:4px;margin-bottom:8px;font-family:Arial">
            <b>ùïè FeedPol√≠tico</b> <small style="opacity:0.8">‚Äî elei√ß√µes ${year}</small>
        </div>`;
        feed.innerHTML = game.news.map(n => generateTweet(n)).join('');
    } else if(game.isRepVelha || year < 1950) {
        // Old newspaper style
        if(header) header.innerHTML = `<div class="news-header"><h1>Gazeta de Not√≠cias</h1><small>EDI√á√ÉO ESPECIAL</small></div>`;
        feed.innerHTML = game.news.map(n => `<div class="news-entry" style="font-family:'Times New Roman';font-size:13px">
            <b style="font-size:15px;text-transform:uppercase">${n.title}</b>
            <span style="display:block;margin-top:4px">${n.text}</span>
        </div>`).join('');
    } else {
        // Standard newspaper
        if(header) header.innerHTML = `<div class="news-header"><h1>Folha de S. Pol√≠tica</h1><small>EDI√á√ÉO NACIONAL ‚Äî <span id="news-date">${game.scenario}</span></small></div>`;
        feed.innerHTML = game.news.map(n => `<div class="news-entry"><b>${n.title}</b><span>${n.text}</span></div>`).join('');
    }
}

function renderRegions() {
    const container = document.getElementById("region-list");
    container.innerHTML = "";
    if(game.isGovernor || game.isRepVelha || game.isElectoralCollege) {
        Object.keys(game.stateVotes).forEach(rid => {
            let votes = game.stateVotes[rid];
            if(!votes) return;
            let sorted = Object.entries(votes).sort((a,b)=>b[1]-a[1]);
            let leaderId = sorted[0][0];
            if(candidatesData[leaderId]) {
                let evInfo = '';
                if(game.isElectoralCollege) {
                    let sc = internationalData[game.scenario];
                    let es = sc && sc.electoralStates.find(s=>s.id===rid);
                    if(es) evInfo = ` (${es.ev} EV)`;
                }
                container.innerHTML += `<div class="region-card"><b>${rid}${evInfo}</b>: <span style="color:${candidatesData[leaderId].color}">${candidatesData[leaderId].name}</span> est√° na frente.</div>`;
            }
        });
    } else {
        ["Norte", "Nordeste", "Sudeste", "Sul", "Centro-Oeste"].forEach(reg => {
            let states = allStates.filter(s => s.r === reg);
            let regionalScores = {};
            game.candidates.forEach(c => regionalScores[c.id] = 0);
            states.forEach(s => { if(game.stateVotes[s.id]) game.candidates.forEach(c => regionalScores[c.id] += (game.stateVotes[s.id][c.id]||0)); });
            let leaderId = Object.entries(regionalScores).sort((a,b) => b[1] - a[1])[0][0];
            if(candidatesData[leaderId]) container.innerHTML += `<div class="region-card"><b>${reg}</b>: <span style="color:${candidatesData[leaderId].color}">${candidatesData[leaderId].name}</span> est√° na frente.</div>`;
        });
    }
}

function updateStateVotesRealTime() {
    // Use the keys already present in stateVotes (works for both national states and governor regions)
    const regionKeys = Object.keys(game.stateVotes);
    regionKeys.forEach(sid => {
        if(!game.stateVotes[sid]) return;
        game.candidates.forEach(c => {
            let target = c.votes;
            let current = game.stateVotes[sid][c.id];
            if(current === undefined) return;
            let shift = (target - current) * 0.3 + (Math.random() * 2 - 1);
            game.stateVotes[sid][c.id] = Math.max(0.1, current + shift);
        });
        // Normaliza votos da regi√£o para 100%
        let stateSum = Object.values(game.stateVotes[sid]).reduce((a,b)=>a+b, 0);
        if(stateSum > 0) game.candidates.forEach(c => { if(game.stateVotes[sid][c.id] !== undefined) game.stateVotes[sid][c.id] = (game.stateVotes[sid][c.id]/stateSum)*100; });
    });
}

function nextTurn() {
    playSound(200, 100);
    game.turn++;
    // Pontos por turno (influenciados pela coaliza√ß√£o)
    let pGain = Math.max(1, (4 - game.difficulty) + Math.floor(game.coalition.filter(p=>!p.includes('_seat')).length / 1));
    game.points += pGain;
    
    // Recupera√ß√£o natural de energia por turno
    game.energy = Math.min(100, game.energy + 5);

    // IA Estrat√©gica de Verdade
    aiStrategicTurn();

    updateStateVotesRealTime();
    updateApprovalRejection();

    // Esc√¢ndalos causam perda cont√≠nua
    game.candidates.forEach(c => {
        if((game.scandalLevels[c.id]||0) >= 5) {
            updateNationalVotes(c.id, -0.8);
        }
    });

    // Modo Hist√≥rico: FHC beneficia do Plano Real em 1994
    if(game.mode === 'historico' && game.scenario === '1994' && game.turn < 8) {
        let fhcC = game.candidates.find(c=>c.id==='fhc');
        if(fhcC) updateNationalVotes('fhc', 0.5);
    }

    // Modo Hist√≥rico 1989: Collor tem vantagem inicial
    if(game.mode === 'historico' && game.scenario === '1989' && game.turn < 6) {
        let collor = game.candidates.find(c=>c.id==='collor');
        if(collor) updateNationalVotes('collor', 0.4);
    }

    // Modo Hist√≥rico 1998: FHC reelei√ß√£o com Plano Real; crise asi√°tica pesa no meio
    if(game.mode === 'historico' && game.scenario === '1998') {
        let fhc = game.candidates.find(c=>c.id==='fhc98');
        if(fhc && game.turn <= 5) updateNationalVotes('fhc98', 0.6);
        if(fhc && game.turn >= 6 && game.turn <= 10) updateNationalVotes('fhc98', -0.2); // crise asi√°tica
    }

    // Modo Hist√≥rico 2002: Lula com momentum crescente; Ciro e Garotinho disputam 2¬∫ lugar
    if(game.mode === 'historico' && game.scenario === '2002') {
        let lula = game.candidates.find(c=>c.id==='lula02');
        if(lula) updateNationalVotes('lula02', 0.35);
        let ciro = game.candidates.find(c=>c.id==='ciro02');
        let garoto = game.candidates.find(c=>c.id==='garotinho');
        if(ciro && game.turn >= 3 && game.turn <= 8) updateNationalVotes('ciro02', 0.2);
        if(garoto && game.turn >= 3 && game.turn <= 8) updateNationalVotes('garotinho', 0.2);
        // Gafe do "espi√£o Rosa" implode Ciro no final
        if(ciro && game.turn >= 9) updateNationalVotes('ciro02', -0.4);
    }

    // Modo Hist√≥rico 2006: Mensal√£o pesa no in√≠cio, Bolsa Fam√≠lia garante no final
    if(game.mode === 'historico' && game.scenario === '2006') {
        let lula = game.candidates.find(c=>c.id==='lula06');
        if(lula && game.turn <= 4) updateNationalVotes('lula06', -0.3); // mensal√£o
        if(lula && game.turn >= 5) updateNationalVotes('lula06', 0.4);  // Bolsa Fam√≠lia
        let heloisa = game.candidates.find(c=>c.id==='heloisa');
        if(heloisa && game.turn >= 3 && game.turn <= 8) updateNationalVotes('heloisa', 0.2);
    }

    // Modo Hist√≥rico 2014: Dilma tem vantagem incumbente mas Marina sobe nos turnos m√©dios
    if(game.mode === 'historico' && game.scenario === '2014') {
        let dilma = game.candidates.find(c=>c.id==='dilma');
        let marina = game.candidates.find(c=>c.id==='marina');
        if(dilma && game.turn < 5) updateNationalVotes('dilma', 0.3);
        if(marina && game.turn >= 4 && game.turn <= 8) updateNationalVotes('marina', 0.5); // fen√¥meno Marina
    }

    // Modo Hist√≥rico 2010: Dilma cresce com heran√ßa de Lula; Marina fen√¥meno no final
    if(game.mode === 'historico' && game.scenario === '2010') {
        let dilma = game.candidates.find(c=>c.id==='dilma10');
        let marina = game.candidates.find(c=>c.id==='marina10');
        if(dilma) updateNationalVotes('dilma10', 0.3);
        if(marina && game.turn >= 5 && game.turn <= 12) updateNationalVotes('marina10', 0.3);
    }

    // Modo Hist√≥rico 2018: Bolsonaro dispara; Haddad cresce ap√≥s substitui√ß√£o de Lula
    if(game.mode === 'historico' && game.scenario === '2018') {
        let bolsonaro = game.candidates.find(c=>c.id==='bolsonaro');
        let haddad = game.candidates.find(c=>c.id==='haddad');
        if(bolsonaro && game.turn <= 10) updateNationalVotes('bolsonaro', 0.4);
        if(haddad && game.turn >= 5) updateNationalVotes('haddad', 0.3);
        let alckmin = game.candidates.find(c=>c.id==='alckmin18');
        if(alckmin && game.turn >= 6) updateNationalVotes('alckmin18', -0.3); // voto √∫til
    }

    // Modo Hist√≥rico 2022: Extrema polariza√ß√£o; Tebet e Ciro no meio
    if(game.mode === 'historico' && game.scenario === '2022') {
        let lula = game.candidates.find(c=>c.id==='lula22');
        let bolso = game.candidates.find(c=>c.id==='bolsonaro22');
        if(lula && game.turn < 8) updateNationalVotes('lula22', 0.2);
        if(bolso && game.turn >= 6) updateNationalVotes('bolsonaro22', 0.3); // surpreende pesquisas
        let tebet = game.candidates.find(c=>c.id==='tebet');
        if(tebet && game.turn >= 7) updateNationalVotes('tebet', 0.15);
    }

    // Modo Hist√≥rico 2026: Polariza√ß√£o Lula x Fl√°vio; centro fragmentado
    if(game.mode === 'historico' && game.scenario === '2026') {
        let lula = game.candidates.find(c=>c.id==='lula26');
        let flavio = game.candidates.find(c=>c.id==='flavio');
        if(lula && game.turn < 6) updateNationalVotes('lula26', 0.2);
        if(flavio) updateNationalVotes('flavio', 0.3);
    }

    // Eventos hist√≥ricos reais
    checkHistoricalEvents();

    let eventChance = game.mode === 'caotico' ? 0.3 : 0.4;
    let hideRand = document.getElementById('hide-rand-events');
    let hideDebate = document.getElementById('hide-debates');
    let showRand = !spectatorMode && (!hideRand || hideRand.checked);
    let showDebate = !spectatorMode && (!hideDebate || hideDebate.checked);

    if(Math.random() > 0.5) {
        let randomNews = newsArchive[Math.floor(Math.random() * newsArchive.length)];
        addNews(randomNews.t, randomNews.d);
    }

    // Debate ao vivo a cada 4 turnos
    if(showDebate && game.turn % 4 === 0 && Math.random() > 0.3) {
        triggerDebate();
    } else if(showRand && Math.random() > eventChance) {
        triggerRandomEvent();
    }

    recordPollSnapshot();
    checkMomentum();
    generateDynamicNews();

    let maxTurns = game.fase === 2 ? 3 : 15;
    if(game.turn > maxTurns) {
        processElection();
    } else {
        document.getElementById("turn-display").innerText = game.turn;
        document.getElementById("turn-max-display").innerText = maxTurns;
        log(`${game.fase === 2 ? '2¬∫ TURNO ‚Äî Rodada' : 'Dia'} ${game.turn}/${maxTurns}. Energia: ${game.energy}%.`);
        updateUI();
    }
}

function openAllianceMenu() {
    if(game.fase === 1) {
        let html = game.availableParties.map(p => {
            let status = p.owner ? ` (Apoia ${candidatesData[p.owner].name})` : "";
            let disabled = p.owner ? "disabled" : "";
            return `<button class="btn" ${disabled} onclick="openCargoModal('${p.n}', '${p.side}')">Negociar com ${p.n}${status}</button>`;
        }).join("");
        showModal("MESA DE NEGOCIA√á√ÉO", "Partidos d√£o pontos extras por turno. Ofere√ßa cargos para garantir apoio!", html + `<button class="btn" onclick="closeModal()">Sair</button>`);
    } else {
        let html = game.defeatedCandidates.map(c => {
            return `<button class="btn" onclick="convinceCandidate('${c.id}')">Pedir apoio de ${c.name} (${c.party})</button>`;
        }).join("");
        showModal("ALIAN√áAS DE 2¬∫ TURNO", "Tente convencer quem saiu da disputa.", html + `<button class="btn" onclick="closeModal()">Sair</button>`);
    }
}

function openCargoModal(partyName, side) {
    closeModal();
    let html = `
        <b>Ofere√ßa um cargo ao ${partyName}:</b><hr>
        <button class="btn" onclick="signAllianceWithCargo('${partyName}','${side}','fazenda')">üí∞ Minist√©rio da Fazenda (+2 econ, custa R$5M)</button>
        <button class="btn" onclick="signAllianceWithCargo('${partyName}','${side}','vice')">üéñÔ∏è Vice-Presid√™ncia (mais votos, inst√°vel)</button>
        <button class="btn" onclick="signAllianceWithCargo('${partyName}','${side}','congresso')">üèõÔ∏è Espa√ßo no Congresso (+pontos/turno)</button>
        <button class="btn" onclick="signAlliance('${partyName}','${side}')">ü§ù Sem cargo (chance menor)</button>
        <button class="btn" onclick="closeModal()">Cancelar</button>
    `;
    showModal(`NEGOCIAR: ${partyName}`, "Custo: 4 pontos.", html);
}

function signAllianceWithCargo(name, side, cargo) {
    if(game.points < 4) return;
    let playerSide = candidatesData[game.player].side;
    let compatible = (side === playerSide || side === 'C' || playerSide === 'C');
    if(!compatible && cargo !== 'vice') {
        showModal("REJEITADO", `O ${name} rejeitou mesmo com cargo. Diferen√ßa ideol√≥gica intranspon√≠vel.`, `<button class="btn" onclick="closeModal()">Entendido</button>`);
        return;
    }
    game.points -= 4;
    let p = game.availableParties.find(x => x.n === name);
    p.owner = game.player;
    game.coalition.push(name);
    let bonus = 3;
    let msg = "";
    if(cargo === 'fazenda') { 
        game.money -= 5; bonus = 4; 
        msg = "Minist√©rio da Fazenda concedido. +Estabilidade econ√¥mica na campanha."; 
        updateNationalVotes(game.player, 3);
    } else if(cargo === 'vice') { 
        bonus = 5; 
        msg = "Vice-Presid√™ncia prometida. Alta visibilidade, mas poss√≠vel trai√ß√£o no 2¬∫ turno.";
        updateNationalVotes(game.player, 4);
    } else if(cargo === 'congresso') { 
        bonus = 2;
        game.coalition.push(name+"_seat"); // sinal de cadeira extra
        msg = "Espa√ßo garantido no Congresso. Pontos extras por turno.";
        updateNationalVotes(game.player, 2);
    }
    document.getElementById("my-coalition").innerHTML += `<span class="party-tag">${name} (${cargo})</span>`;
    showModal("ALIAN√áA FIRMADA!", msg, `<button class="btn" onclick="closeModal()">Excelente!</button>`);
    updateUI();
}

function signAlliance(name, side) {
    if(game.points < 4) return;
    game.points -= 4;
    let playerSide = candidatesData[game.player].side;
    let compatible = (side === playerSide || side === 'C' || playerSide === 'C');
    
    if(!compatible) {
        showModal("REJEITADO", `O ${name} rejeitou a alian√ßa. "Nossas ideologias s√£o incompat√≠veis para um projeto nacional", declarou o partido.`, `<button class="btn" onclick="closeModal()">Entendido</button>`);
        return;
    }
    
    let p = game.availableParties.find(x => x.n === name);
    p.owner = game.player;
    game.coalition.push(name);
    updateNationalVotes(game.player, 2.5);
    document.getElementById("my-coalition").innerHTML += `<span class="party-tag">${name}</span>`;
    
    showModal("ACEITO!", `O ${name} aceitou entrar na coliga√ß√£o! Sua campanha ganha tempo de TV e influ√™ncia regional.`, `<button class="btn" onclick="closeModal()">Excelente!</button>`);
    updateUI();
}

function convinceCandidate(cid) {
    if(game.points < 5) return;
    game.points -= 5;
    let cand = candidatesData[cid];
    let rand = Math.random();
    
    let resultTitle, resultText;

    if(rand > 0.6) {
        updateNationalVotes(game.player, 5);
        addNews("Apoio de Peso", `${cand.name} declara voto em ${candidatesData[game.player].name}!`);
        resultTitle = "APOIO CONQUISTADO!";
        resultText = `<b style="color:green">${cand.name} aceitou apoiar voc√™!</b><br>Os eleitores dele agora tendem a migrar para sua candidatura.`;
    } else if (rand > 0.3) {
        addNews("Neutralidade", `${cand.name} prefere se manter neutro no 2¬∫ turno.`);
        resultTitle = "NEUTRALIDADE";
        resultText = `<b style="color:gray">${cand.name} decidiu n√£o apoiar ningu√©m.</b><br>"Meus eleitores s√£o livres", declarou o candidato.`;
    } else {
        let rival = game.candidates.find(c => c.id !== game.player);
        updateNationalVotes(rival.id, 4);
        addNews("Trai√ß√£o!", `${cand.name} decidiu apoiar ${rival.name}!`);
        resultTitle = "REJEI√á√ÉO E TRAI√á√ÉO";
        resultText = `<b style="color:red">${cand.name} n√£o s√≥ recusou voc√™ como apoiar√° seu rival!</b><br>Isso ter√° um impacto negativo nas urnas.`;
    }
    
    game.defeatedCandidates = game.defeatedCandidates.filter(x => x.id !== cid);
    showModal(resultTitle, resultText, `<button class="btn" onclick="closeModal()">Entendido</button>`);
    updateUI();
}

function triggerRandomEvent() {
    const events = [
        {t: "DEBATE NA GLOBO", d: "O clima esquentou no debate nacional.", b: [{n: "Atacar Favorito", f: () => updateNationalVotes(game.player, 3)}, {n: "Apresentar Planos", f: () => updateNationalVotes(game.player, 2)}]},
        {t: "INFLA√á√ÉO CAI DRASTICAMENTE", d: "A infla√ß√£o caiu drasticamente este m√™s.", b: [{n: "Elogiar Plano", f: () => updateNationalVotes(game.player, 2)}, {n: "Criticar Social", f: () => game.points += 4}]},
        {t: "DEN√öNCIA", d: "Surgiram boatos sobre seu passado.", b: [{n: "Processar (-R$10M)", f: () => game.money -= 10}, {n: "Ignorar (-Votos)", f: () => updateNationalVotes(game.player, -2)}]},
        {t: "APOIO EMPRESARIAL", d: "Setor industrial oferece fundos.", b: [{n: "Aceitar (+R$25M)", f: () => game.money += 25}, {n: "Recusar (+Moral)", f: () => updateNationalVotes(game.player, 1)}]}
    ];
    let evIdx = Math.floor(Math.random() * events.length);
    let ev = events[evIdx];
    currentEvents = events;

    let btns = ev.b.map((btn, btnIdx) => 
        `<button class="btn" onclick="executeEvent(${evIdx}, ${btnIdx})">${btn.n}</button>`
    ).join("");
    
    showModal(ev.t, ev.d, btns);
}

function executeEvent(eIdx, bIdx) {
    currentEvents[eIdx].b[bIdx].f();
    closeModal();
    updateUI();
}

function processElection() {
    let sorted = [...game.candidates].sort((a,b) => b.votes - a.votes);
    let winner = sorted[0];

    // Check noSecondRound flag (Rep√∫blica Velha, some old scenarios)
    let sc = scenariosData[game.scenario] || internationalData[game.scenario];
    let noSecond = game.isRepVelha || (sc && sc.noSecondRound);
    let year = parseInt(game.scenario) || 2000;
    // Elections before 1965 in Brazil had no second round system
    if(!noSecond && !game.isElectoralCollege && year >= 1945 && year <= 1964) noSecond = true;

    // --- REP√öBLICA VELHA / ELEI√á√ïES SEM 2¬∫ TURNO ---
    if(noSecond && !game.isElectoralCollege) {
        finishGame(winner, "Vencedor por maioria simples ‚Äî sem segundo turno.");
        return;
    }

    // --- ELECTORAL COLLEGE ---
    if(game.isElectoralCollege) {
        let evCounts = getEVCounts();
        let evSorted = Object.entries(evCounts).sort((a,b)=>b[1]-a[1]);
        let winnerEV = evSorted[0];
        let winnerCand = game.candidates.find(c=>c.id===winnerEV[0]) || winner;
        let evMsg = `Col√©gio Eleitoral: ${winnerEV[1]} votos (270 necess√°rios)`;
        if(winnerEV[1] < 270) evMsg = `Sem maioria! ${winnerEV[1]} EV ‚Äî Elei√ß√£o contestada!`;
        finishGame(winnerCand, evMsg);
        return;
    }

    // --- INTERNATIONAL WITHOUT EC (Russia etc.) ---
    if(internationalData[game.scenario] && !game.isElectoralCollege) {
        finishGame(winner, "Vencedor por maioria absoluta.");
        return;
    }

    if(game.fase === 1) {
        // --- VIT√ìRIA NO 1¬∫ TURNO ---
        if(winner.votes > 50) {
            finishGame(winner, "Eleito no Primeiro Turno!");
            return;
        }

        let top2 = [sorted[0], sorted[1]];
        let isPlayerIn = top2.some(c => c.id === game.player);
        let eliminated = game.candidates.filter(c => c.id !== sorted[0].id && c.id !== sorted[1].id);
        game.defeatedCandidates = eliminated;

        if(!isPlayerIn) {
            // --- GAME OVER: player n√£o foi ao 2T ---
            // Simula o 2T automaticamente entre os dois finalistas
            let cA = {...sorted[0]}, cB = {...sorted[1]};
            eliminated.forEach(dc => {
                let dA = getIdeologyDistance(dc.id, cA.id);
                let dB = getIdeologyDistance(dc.id, cB.id);
                let share = dc.votes * 0.55;
                if(dA < dB) cA.votes += share;
                else if(dB < dA) cB.votes += share;
                else { cA.votes += share/2; cB.votes += share/2; }
            });
            cA.votes += (Math.random()*6 - 3);
            let tot = cA.votes + cB.votes;
            cA.votes = (cA.votes/tot)*100;
            cB.votes = 100 - cA.votes;
            let winner2T = cA.votes > cB.votes ? cA : cB;
            let loser2T  = cA.votes > cB.votes ? cB : cA;
            let playerFinal = sorted.find(c => c.id === game.player) || sorted[2];
            showEliminatedScreen(winner2T, loser2T, playerFinal, sorted);
            return;
        }

        // --- PLAYER VAI AO 2¬∫ TURNO ---
        game.fase = 2;
        game.turn = 0; // nextTurn far√° turn++ imediatamente
        game.candidates = [sorted[0], sorted[1]];
        allStates.forEach(s => {
            game.stateVotes[s.id] = {};
            game.candidates.forEach(c => game.stateVotes[s.id][c.id] = 50 + (Math.random()*10 - 5));
        });
        applyIdeologicalMigration();
        document.getElementById("fase-label").innerText = "2¬∫ TURNO";
        document.getElementById("btn-alliance").innerText = "Convencer Candidatos (5p)";
        showModal(
            "‚öîÔ∏è SEGUNDO TURNO!",
            `A disputa final √© entre <b>${sorted[0].name}</b> e <b>${sorted[1].name}</b>!<br>
            <small style="color:red">‚ö†Ô∏è Aten√ß√£o: apenas <b>3 rodadas</b>. Cada a√ß√£o √© crucial.</small><br>
            <small>Eleitores dos eliminados migraram por afinidade ideol√≥gica.</small>`,
            `<button class="btn" onclick="closeModal()">Avan√ßar para o 2¬∫ Turno</button>`
        );
        updateUI();

    } else {
        // --- FIM DO 2¬∫ TURNO ---
        finishGame(winner, "Vencedor do Segundo Turno!");
    }
}

function showEliminatedScreen(winner2T, loser2T, playerFinal, allSorted) {
    document.getElementById("game-screen").classList.remove("active");
    document.getElementById("end-screen").classList.add("active");
    let sc = scenariosData[game.scenario] || scenariosData["1994"];
    let playerCd = candidatesData[game.player] || {};
    let w2cd = candidatesData[winner2T.id] || winner2T;
    let l2cd = candidatesData[loser2T.id]  || loser2T;

    document.getElementById("result-title").innerText = "üíÄ ELIMINADO NO 1¬∫ TURNO";
    document.getElementById("result-desc").innerHTML = `
        <b style="color:#cc0000">${playerCd.name||game.player} n√£o avan√ßou ao 2¬∫ turno.</b><br>
        <small>Voc√™ terminou em ${allSorted.findIndex(c=>c.id===game.player)+1}¬∫ lugar com ${playerFinal.votes.toFixed(1)}% dos votos.</small><br><br>
        O segundo turno foi disputado entre <b>${winner2T.name}</b> e <b>${loser2T.name}</b>:
        <table style="margin:10px auto;font-family:'Times New Roman';font-size:15px;border-collapse:collapse">
            <tr><td style="padding:5px;color:${w2cd.color||'#000'}">&nbsp;<b>${winner2T.name} (${w2cd.party||''})</b></td><td style="padding:5px"><b>${winner2T.votes.toFixed(1)}% ‚úÖ</b></td></tr>
            <tr><td style="padding:5px;color:${l2cd.color||'#000'}">&nbsp;${loser2T.name} (${l2cd.party||''})</td><td style="padding:5px">${loser2T.votes.toFixed(1)}%</td></tr>
        </table>
    `;
    document.getElementById("candidate-bio").innerHTML = `
        <p><b>BRAS√çLIA, ${sc.endYear||game.scenario}.</b> A campanha de ${playerCd.name||game.player} n√£o resistiu ao voto √∫til e n√£o conseguiu construir uma coliga√ß√£o suficientemente ampla para disputar o segundo turno.</p>
        <p><b>${winner2T.name}</b> √© eleito Presidente da Rep√∫blica. ${w2cd.bio||''}</p>
        <p><i>Na pr√≥xima campanha: invista mais em estados piv√¥, construa alian√ßas cedo e n√£o negligencie a energia. Chegar ao 2¬∫ turno √© o primeiro passo para a vit√≥ria.</i></p>
    `;
    generateCongress(winner2T);
    document.getElementById('ranking-content').innerHTML = `
        <div style="color:#cc0000;font-weight:bold;font-size:16px;margin-bottom:8px">‚ùå Eliminado no 1¬∫ Turno</div>
        <div class="rank-item">üìä <b>Sua vota√ß√£o:</b> ${playerFinal.votes.toFixed(1)}%</div>
        <div class="rank-item">üèÖ <b>Posi√ß√£o:</b> ${allSorted.findIndex(c=>c.id===game.player)+1}¬∫ de ${allSorted.length}</div>
        <div class="rank-item">ü§ù <b>Coliga√ß√£o montada:</b> ${game.coalition.filter(p=>!p.includes('_seat')).length} partidos</div>
        <div class="rank-item">üéØ <b>Modo:</b> ${game.mode === 'caotico' ? 'Ca√≥tico' : 'Hist√≥rico'}</div>
        <div style="margin-top:10px;font-size:13px;color:#555">Tente novamente e chegue ao 2¬∫ turno!</div>
    `;
}

function finishGame(winner, context) {
    document.getElementById("game-screen").classList.remove("active");
    document.getElementById("end-screen").classList.add("active");
    let isPlayer = winner.id === game.player;
    let cData = candidatesData[winner.id];

    // Check achievements
    if(isPlayer) checkAchievements(winner.id, winner.votes, game.scenario);

    if(game.isGovernor) {
        const g = governorData[currentGovernorKey];
        document.getElementById("result-title").innerText = isPlayer ? `üèÜ ELEITO GOVERNADOR!` : `RESULTADO ‚Äî ${g.stateFullName.toUpperCase()}`;
        document.getElementById("result-desc").innerHTML = `<b>${winner.name} (${cData.party})</b> √© eleito Governador de <b>${g.stateFullName}</b> com <b>${winner.votes.toFixed(1)}%</b>.<br><small>${context}</small>`;
        document.getElementById("candidate-bio").innerHTML = `<p><b>${g.stateFullName}, ${g.year}.</b> ${winner.name} √© o novo governador. ${cData.bio}</p>`;
        document.getElementById("congress-bars").innerHTML = '<b>RESULTADO REGIONAL</b>';
        document.getElementById("congress-gov").innerHTML = `Governador eleito: <b>${winner.name}</b> (${cData.party})`;
        document.getElementById("ranking-content").innerHTML = `
            <div class="rank-item">${isPlayer?'üèÜ':'üìä'} <b>${isPlayer?'ELEITO':'Resultado'}: ${winner.name}</b></div>
            <div class="rank-item">üìä <b>Sua vota√ß√£o:</b> ${(game.candidates.find(c=>c.id===game.player)||{votes:0}).votes.toFixed(1)}%</div>
            <div class="rank-item">üó∫Ô∏è <b>Estado:</b> ${g.stateFullName}</div>`;
        return;
    }

    if(game.isRepVelha) {
        const sc = scenariosData[game.scenario];
        document.getElementById("result-title").innerText = isPlayer ? `üèÜ ELEITO PRESIDENTE!` : `RESULTADO DE ${sc ? sc.year : game.scenario}`;
        document.getElementById("result-desc").innerHTML = `<b>${winner.name} (${cData.party})</b> √© eleito Presidente da Rep√∫blica com <b>${winner.votes.toFixed(1)}%</b> dos votos.<br><small>${context}</small>`;
        document.getElementById("candidate-bio").innerHTML = `<p><b>RIO DE JANEIRO, ${sc ? sc.year : ''}</b> ‚Äî ${cData.bio}</p>`;
        document.getElementById("congress-bars").innerHTML = '<b>RESULTADO DA REP√öBLICA VELHA</b>';
        document.getElementById("congress-gov").innerHTML = `Presidente eleito: <b>${winner.name}</b> ‚Äî Sem 2¬∫ turno, voto masculino direto.`;
        document.getElementById("ranking-content").innerHTML = `<div class="rank-item">${isPlayer?'üèÜ':'üìä'} <b>${winner.name}</b> eleito pelo voto direto</div>`;
        return;
    }

    if(game.isElectoralCollege) {
        let evCounts = getEVCounts();
        let playerEV = evCounts[game.player] || 0;
        let winnerEV = evCounts[winner.id] || 0;
        document.getElementById("result-title").innerText = isPlayer ? `üèÜ ELEITO PRESIDENTE DOS EUA!` : `RESULTADO DAS ELEI√á√ïES EUA 2024`;
        document.getElementById("result-desc").innerHTML = `<b>${winner.name} (${cData.party})</b> vence a elei√ß√£o presidencial com <b>${winnerEV} votos eleitorais</b>.<br><small>${context}</small>`;
        document.getElementById("candidate-bio").innerHTML = `<p><b>WASHINGTON D.C., 2024.</b> ${cData.bio}</p><p>${isPlayer?'Voc√™ fez hist√≥ria!':'Mais sorte na pr√≥xima!'}</p>`;
        let evBar = `<b>RESULTADO DO COL√âGIO ELEITORAL</b><div class="congress-bar" style="height:30px;margin-top:8px">`;
        [...game.candidates].sort((a,b)=>(evCounts[b.id]||0)-(evCounts[a.id]||0)).forEach(c => {
            let ev = evCounts[c.id]||0;
            let pct = ev/538*100;
            evBar += `<div class="congress-segment" style="width:${pct}%;background:${c.color}" title="${c.name}: ${ev} EV">${ev>30?c.name+': '+ev+' EV':ev>15?ev:''}</div>`;
        });
        evBar += '</div>';
        document.getElementById("congress-bars").innerHTML = evBar;
        document.getElementById("congress-gov").innerHTML = `<b>${winner.name}</b>: ${winnerEV} votos eleitorais. ${winnerEV>=270?'‚úÖ Maioria obtida.':'‚ùå Sem maioria ‚Äî elei√ß√£o contestada!'}`;
        document.getElementById("ranking-content").innerHTML = `
            <div class="rank-item">${isPlayer?'üèÜ':'‚ùå'} <b>${isPlayer?'ELEITO':'N√£o eleito'}</b></div>
            <div class="rank-item">üó≥Ô∏è <b>Seus votos eleitorais:</b> ${playerEV}/538</div>
            <div class="rank-item">üá∫üá∏ 270 necess√°rios para vencer</div>`;
        return;
    }

    // International non-EC (Russia etc.)
    if(internationalData[game.scenario]) {
        const sc = internationalData[game.scenario];
        document.getElementById("result-title").innerText = isPlayer ? `üèÜ ELEITO!` : `RESULTADO ‚Äî ${sc.title}`;
        document.getElementById("result-desc").innerHTML = `<b>${winner.name} (${cData.party})</b> vence a elei√ß√£o com <b>${winner.votes.toFixed(1)}%</b> dos votos.<br><small>${context}</small>`;
        document.getElementById("candidate-bio").innerHTML = `<p><b>${sc.year}.</b> ${cData.bio}</p>`;
        document.getElementById("congress-bars").innerHTML = `<b>RESULTADO FINAL</b>`;
        document.getElementById("congress-gov").innerHTML = `Vencedor: <b>${winner.name}</b> (${cData.party}) ‚Äî ${winner.votes.toFixed(1)}%`;
        document.getElementById("ranking-content").innerHTML = `
            <div class="rank-item">${isPlayer?'üèÜ':'üìä'} <b>${winner.name}</b></div>
            <div class="rank-item">üó≥Ô∏è <b>Sua vota√ß√£o:</b> ${(game.candidates.find(c=>c.id===game.player)||{votes:0}).votes.toFixed(1)}%</div>`;
        return;
    }

    let sc = scenariosData[game.scenario] || scenariosData["1994"];
    document.getElementById("result-title").innerText = isPlayer ? "VIT√ìRIA HIST√ìRICA!" : "RESULTADO DAS URNAS";
    document.getElementById("result-desc").innerHTML = `<b>${winner.name} (${cData.party})</b> √© eleito Presidente da Rep√∫blica com <b>${winner.votes.toFixed(1)}%</b> dos votos v√°lidos.<br><small>${context}</small>`;
    let coligText = game.coalition.filter(p=>!p.includes('_seat')).length > 0 ? `apoiado pela coliga√ß√£o composta por ${game.coalition.filter(p=>!p.includes('_seat')).join(", ")}` : "em uma campanha solo";
    document.getElementById("candidate-bio").innerHTML = `
        <p><b>BRAS√çLIA, ${sc.endYear||'1994'}</b> - Em uma vota√ß√£o que parou o pa√≠s, o candidato <b>${winner.name}</b> confirmou seu favoritismo. 
        Defendendo uma ideologia de <b>${cData.ideologia}</b>, o novo presidente conseguiu vencer as resist√™ncias regionais e consolidar sua base.</p>
        <p>${cData.bio}</p>
        <p>A campanha, ${coligText}, foi marcada por intensos debates sobre o futuro do pa√≠s.</p>
    `;
    generateCongress(winner);
    generateFinalRanking(winner, context);
}

function updateNationalVotes(id, val) {
    let c = game.candidates.find(x => x.id === id);
    if(c) c.votes += val;
    let sum = game.candidates.reduce((a,b) => a + b.votes, 0);
    game.candidates.forEach(x => x.votes = (x.votes/sum)*100);
}

function renderMap() {
    const map = document.getElementById("map-container");
    map.innerHTML = "";
    allStates.forEach(s => {
        const div = document.createElement("div");
        div.className = "state-node"; div.id = "node-" + s.id;
        div.style.left = s.x + "%"; div.style.top = s.y + "%";
        div.innerText = s.id; div.onclick = () => selectState(s);
        map.appendChild(div);
    });
}

function selectState(s) {
    let votes = Object.entries(game.stateVotes[s.id]).sort((a,b) => b[1] - a[1]);
    let leaderId = votes[0][0];
    let leaderName = candidatesData[leaderId] ? candidatesData[leaderId].name : "Ningu√©m";
    let pivot = isPivotState(s.id);
    let pivotHtml = pivot ? `<div style="background:var(--gold);padding:3px;margin:3px 0;font-size:10px">‚≠ê ESTADO PIV√î: ${pivotStates[s.id].desc}</div>` : '';
    let top3 = votes.slice(0,3).map(([id,v]) => `<span style="color:${candidatesData[id]?candidatesData[id].color:'#000'}">${candidatesData[id]?candidatesData[id].name:id}</span>: ${v.toFixed(1)}%`).join(' | ');
    document.getElementById("state-details").innerHTML = `<b>${s.n}</b> (${s.r})${pivot?' <span class="pivot-badge">PIV√î</span>':''}<br>${top3}${pivotHtml}<button class="btn" style="width:auto" onclick="campaignState('${s.id}', 3, 5)">Com√≠cio (3p, R$5M)</button>`;
}

function campaignState(sid, p, m) {
    if(game.points < p || game.money < m) return;
    game.points -= p; game.money -= m;
    let mult = energyMultiplier();
    let bonus = isPivotState(sid) ? 1.5 : 1.0;
    let gain = 12 * bonus;
    game.stateVotes[sid][game.player] += gain;
    updateNationalVotes(game.player, 0.5 * mult * bonus); 
    spendEnergy(10);
    let pivotMsg = isPivotState(sid) ? ` (ESTADO PIV√î! B√¥nus x1.5)` : '';
    log(`Com√≠cio realizado em ${sid}.${pivotMsg}`);
    updateUI();
}

function actionTV() { 
    let year = parseInt(game.scenario) || parseInt(currentScenario) || 2000;
    // Rep√∫blica Velha or pre-1965 elections - no TV
    if(game.isRepVelha || year < 1960) {
        log("üì∫ Televis√£o n√£o existe ainda nessa √©poca. Use r√°dio ou com√≠cios!");
        return;
    }
    if(game.points>=6 && game.money>=12) { 
        game.points-=6; game.money-=12; 
        let gain = 4 * energyMultiplier();
        updateNationalVotes(game.player, gain); 
        spendEnergy(15);
        log(`Hor√°rio eleitoral exibido. +${gain.toFixed(1)}%.`); 
        updateUI(); 
    } else { log("Pontos ou verba insuficientes."); }
}

function actionComicioPra√ßa() {
    // Era-specific rally for old elections
    if(game.points < 3 || game.money < 4) { log("Pontos/verba insuficientes."); return; }
    game.points -= 3; game.money -= 4;
    let mult = energyMultiplier();
    let gain = 2.5 * mult;
    updateNationalVotes(game.player, gain);
    spendEnergy(12);
    log(`üé∫ Com√≠cio na pra√ßa central! +${gain.toFixed(1)}% nas inten√ß√µes.`);
    updateUI();
}

function actionJornal() {
    // Newspaper campaign - always available, more effective in old elections
    let year = parseInt(game.scenario) || 2000;
    if(game.points < 2 || game.money < 5) { log("Pontos/verba insuficientes."); return; }
    game.points -= 2; game.money -= 5;
    let mult = energyMultiplier();
    let bonus = (game.isRepVelha || year < 1970) ? 1.8 : 1.0;
    let gain = 1.5 * mult * bonus;
    updateNationalVotes(game.player, gain);
    spendEnergy(5);
    log(`üì∞ An√∫ncio em jornais. +${gain.toFixed(1)}%${bonus > 1 ? ' (era do jornal!)' : ''}.`);
    updateUI();
}
function actionCaixa() { if(game.points>=2) { game.points-=2; game.money+=15; log("Arrecada√ß√£o de fundos conclu√≠da."); updateUI(); } }

function renderAdversaries() {
    const list = document.getElementById("adversary-list");
    list.innerHTML = game.candidates.filter(c => c.id !== game.player).map(c => {
        let dist = getIdeologyDistance(game.player, c.id);
        let distLabel = dist <= 2 ? 'üü¢ Pr√≥ximo' : dist <= 4 ? 'üü° M√©dio' : 'üî¥ Distante';
        return `<div style="margin-bottom:8px"><b>${c.name}</b> <small>${distLabel}</small><br>
        <button class="btn" onclick="attackCand('${c.id}')">Atacar (3p)</button></div>`;
    }).join("");
}
function attackCand(id) { 
    if(game.points>=3) { 
        game.points-=3; 
        updateNationalVotes(id, -2.5); 
        if(game.approvals[id]) game.approvals[id].rej = Math.min(95, game.approvals[id].rej + 3);
        if(game.approvals[game.player]) game.approvals[game.player].rej = Math.min(95, game.approvals[game.player].rej + 1);
        log(`Ataque contra ${id} disparado.`); 
        updateUI(); 
    } 
}

// === SISTEMA DE FADIGA ===
function spendEnergy(amount) {
    game.energy = Math.max(0, game.energy - amount);
    if(game.energy <= 20) {
        log(`‚ö†Ô∏è ATEN√á√ÉO: Energia cr√≠tica! A√ß√µes rendem menos.`);
    }
}
function energyMultiplier() {
    if(game.energy >= 70) return 1.0;
    if(game.energy >= 40) return 0.75;
    if(game.energy >= 20) return 0.5;
    return 0.25;
}

// === NOVAS A√á√ïES ===
function actionRadio() {
    if(game.points < 3 || game.money < 6) { log("Pontos/verba insuficientes."); return; }
    game.points -= 3; game.money -= 6;
    let gain = 2.0 * energyMultiplier();
    updateNationalVotes(game.player, gain);
    spendEnergy(8);
    log(`üìª Inser√ß√µes de r√°dio veiculadas. +${gain.toFixed(1)}% nas pesquisas.`);
    updateUI();
}

function actionEntrevista() {
    if(game.points < 4) { log("Pontos insuficientes."); return; }
    game.points -= 4;
    let mult = energyMultiplier();
    // Entrevista pode ser boa ou ruim dependendo de performance
    let roll = Math.random();
    spendEnergy(12);
    if(roll > 0.6) {
        let gain = 3.0 * mult;
        updateNationalVotes(game.player, gain);
        game.approvals[game.player].app += 5;
        addNews(`ENTREVISTA DE ${candidatesData[game.player].name}`, "Candidato se sai bem e impressiona o p√∫blico.");
        log(`üéôÔ∏è Entrevista excelente! +${gain.toFixed(1)}%.`);
    } else if(roll > 0.3) {
        let gain = 1.0 * mult;
        updateNationalVotes(game.player, gain);
        log(`üéôÔ∏è Entrevista razo√°vel. +${gain.toFixed(1)}%.`);
    } else {
        updateNationalVotes(game.player, -1.5);
        game.approvals[game.player].rej += 4;
        addNews(`GAFE DE ${candidatesData[game.player].name}`, "Candidato comete erro em entrevista ao vivo.");
        log(`üéôÔ∏è Entrevista problem√°tica! -1.5%.`);
    }
    updateUI();
}

function actionCaixa() { if(game.points>=2) { game.points-=2; game.money+=15; spendEnergy(5); log("Arrecada√ß√£o de fundos conclu√≠da."); updateUI(); } }

function actionCaixaEmpresarial() {
    if(game.points < 2) { log("Pontos insuficientes."); return; }
    game.points -= 2;
    spendEnergy(6);
    let roll = Math.random();
    if(roll > 0.7) {
        game.money += 30;
        log(`üè≠ Empres√°rios doam R$30M! Mas pode gerar suspeitas...`);
        // pequena chance de esc√¢ndalo
        if(Math.random() > 0.6) {
            game.scandalLevels[game.player] = Math.min(10, (game.scandalLevels[game.player]||0) + 1);
            addNews(`FINANCIAMENTO EMPRESARIAL`, `Doa√ß√£o ao ${candidatesData[game.player].name} levanta quest√µes sobre conflito de interesses.`);
        }
    } else {
        game.money += 18;
        log(`üè≠ Arrecada√ß√£o empresarial: R$18M.`);
    }
    updateUI();
}

function actionCaixaSindical() {
    if(game.points < 2) { log("Pontos insuficientes."); return; }
    let playerSide = candidatesData[game.player].side;
    game.points -= 2;
    spendEnergy(5);
    if(playerSide === 'D') {
        game.money += 8;
        game.approvals[game.player].rej += 3;
        log(`‚öíÔ∏è Sindicatos desconfiaram. R$8M apenas.`);
    } else {
        game.money += 20;
        updateNationalVotes(game.player, 1);
        log(`‚öíÔ∏è Sindicatos abra√ßaram a causa! R$20M + +1%.`);
    }
    updateUI();
}

function actionCaixaPopular() {
    if(game.points < 1) { log("Pontos insuficientes."); return; }
    game.points -= 1;
    spendEnergy(3);
    game.money += 8;
    updateNationalVotes(game.player, 0.5);
    game.approvals[game.player].app += 2;
    log(`üèòÔ∏è Vaquinha popular arrecadou R$8M. +0.5% org√¢nico.`);
    updateUI();
}

function actionRedesSociais() {
    if(game.points < 2 || game.money < 4) { log("Pontos/verba insuficientes."); return; }
    game.points -= 2; game.money -= 4;
    let mult = energyMultiplier();
    let roll = Math.random();
    spendEnergy(8);
    if(roll > 0.5) {
        let gain = (2.5 + Math.random()*2) * mult;
        updateNationalVotes(game.player, gain);
        addNews(`VIRAL: ${candidatesData[game.player].name}`, `Post do candidato viraliza com milh√µes de compartilhamentos.`);
        log(`üì± Conte√∫do viral! +${gain.toFixed(1)}%.`);
    } else if(roll > 0.2) {
        let gain = 1.2 * mult;
        updateNationalVotes(game.player, gain);
        log(`üì± Engajamento nas redes. +${gain.toFixed(1)}%.`);
    } else {
        updateNationalVotes(game.player, -0.5);
        addNews(`POL√äMICA: ${candidatesData[game.player].name}`, `Post controverso nas redes gera cr√≠ticas e rea√ß√£o negativa.`);
        log(`üì± Post pol√™mico! -0.5%.`);
    }
    updateUI();
}

function actionDescansar() {
    if(game.points < 1) { log("Pontos insuficientes."); return; }
    game.points -= 1;
    game.energy = Math.min(100, game.energy + 30);
    log(`üò¥ Descansou. Energia recuperada para ${game.energy}%.`);
    updateUI();
}

// === SISTEMA DE DEBATE AO VIVO ===
function triggerDebate() {
    let rivals = game.candidates.filter(c => c.id !== game.player).sort((a,b)=>b.votes-a.votes);
    let mainRival = rivals[0];
    let playerC = candidatesData[game.player];
    let mult = energyMultiplier();
    
    let options = [
        {
            label: `‚öîÔ∏è ATAQUE DIRETO a ${mainRival.name}`,
            desc: "Alto risco, alto retorno. Pode sair pela culatra.",
            exec: () => {
                let roll = Math.random();
                spendEnergy(20);
                if(roll > 0.45) {
                    let gain = (4 + Math.random()*2) * mult;
                    updateNationalVotes(game.player, gain);
                    updateNationalVotes(mainRival.id, -2);
                    addNews(`ATAQUE DE ${playerC.name} REPERCUTE`, `Candidato parte para o confronto e sobe nas pesquisas.`);
                    log(`üí• Ataque bem-sucedido! +${gain.toFixed(1)}%.`);
                } else {
                    updateNationalVotes(game.player, -1.5);
                    game.approvals[game.player].rej += 5;
                    addNews(`ATAQUE DE ${playerC.name} SAI PELA CULATRA`, `Candidato √© criticado por postura agressiva no debate.`);
                    log(`üí• Ataque fracassou. -1.5% e rejei√ß√£o aumentou.`);
                }
            }
        },
        {
            label: `üìã APRESENTAR PROGRAMA DE GOVERNO`,
            desc: "Seguro. Aumenta aprova√ß√£o, ganho moderado.",
            exec: () => {
                let gain = (2 + Math.random()*1.5) * mult;
                spendEnergy(10);
                updateNationalVotes(game.player, gain);
                game.approvals[game.player].app += 6;
                addNews(`${playerC.name} APRESENTA PROPOSTAS`, `Candidato impressiona com proposta concreta no debate.`);
                log(`üìã Programa apresentado. +${gain.toFixed(1)}% e aprova√ß√£o +6.`);
            }
        },
        {
            label: `üòå POSTURA MODERADA E CONCILIADORA`,
            desc: "Menos votos imediatos, mas menos rejei√ß√£o.",
            exec: () => {
                let gain = 1.0 * mult;
                spendEnergy(8);
                updateNationalVotes(game.player, gain);
                game.approvals[game.player].app += 3;
                game.approvals[game.player].rej = Math.max(0, game.approvals[game.player].rej - 2);
                log(`üòå Postura moderada. +${gain.toFixed(1)}% com menos rejei√ß√£o.`);
            }
        },
        {
            label: `üé≠ MOMENTO EMOCIONAL / APELO POPULAR`,
            desc: "Aposta na emo√ß√£o. Funciona bem para candidatos carism√°ticos.",
            exec: () => {
                let roll = Math.random();
                spendEnergy(15);
                if(roll > 0.4) {
                    let gain = (3 + Math.random()*3) * mult;
                    updateNationalVotes(game.player, gain);
                    game.approvals[game.player].app += 8;
                    addNews(`MOMENTO MARCANTE DE ${playerC.name}`, `Discurso emocional viraliza e comove o pa√≠s.`);
                    log(`üé≠ Momento emocional hist√≥rico! +${gain.toFixed(1)}%.`);
                } else {
                    updateNationalVotes(game.player, 0.5);
                    log(`üé≠ Apelo emocional n√£o funcionou como esperado. +0.5%.`);
                }
            }
        }
    ];
    
    let energyWarn = game.energy < 40 ? `<div style="color:red;font-size:10px;margin-bottom:5px">‚ö†Ô∏è Energia baixa (${game.energy}%). A√ß√µes render√£o menos!</div>` : '';
    let btnHtml = options.map((o,i) => 
        `<div class="action-card"><b>${o.label}</b><br><small style="color:#666">${o.desc}</small><br>
        <button class="btn" style="margin-top:3px;width:auto" onclick="executeDebateOption(${i})">ESCOLHER</button></div>`
    ).join('');
    
    window._debateOptions = options;
    showModal("üé§ DEBATE AO VIVO", `${energyWarn}Voc√™ est√° no palco. Como vai se sair?<hr>`, btnHtml + `<button class="btn" onclick="closeModal()">Evitar o debate</button>`);
}

function executeDebateOption(i) {
    window._debateOptions[i].exec();
    closeModal();
    updateUI();
}

// === ESTADOS PIV√îS ===
const pivotStates = {
    "SP": {name:"S√£o Paulo", weight:23, desc:"Estado decisivo. 23% do eleitorado nacional. Vencer SP √© quase garantia de vit√≥ria."},
    "MG": {name:"Minas Gerais", weight:11, desc:"'Minas √© a caixa registradora do Brasil.' Quem vence Minas vence o pa√≠s."},
    "BA": {name:"Bahia", weight:8, desc:"Portal do Nordeste. Vit√≥ria na BA arrasta os estados vizinhos."},
    "RJ": {name:"Rio de Janeiro", weight:9, desc:"Capital pol√≠tica informal. Forte influ√™ncia nacional de m√≠dia."},
    "RS": {name:"Rio G. do Sul", weight:7, desc:"Estado ga√∫cho historicamente disputado entre direita e esquerda."}
};

function isPivotState(sid) { return pivotStates.hasOwnProperty(sid); }

// === VERIFICAR EVENTOS HIST√ìRICOS ===
function checkHistoricalEvents() {
    if(game.mode !== 'historico') return;
    let hideHist = document.getElementById('hide-hist-events');
    if(spectatorMode || (hideHist && !hideHist.checked)) return;
    let events = historicalEvents[game.scenario] || [];
    events.forEach((ev, idx) => {
        if(ev.turn === game.turn && !game.firedHistoricalEvents.includes(idx)) {
            game.firedHistoricalEvents.push(idx);
            let btns = ev.b.map((btn, btnIdx) => 
                `<button class="btn" onclick="executeHistoricalEvent(${idx}, ${btnIdx})">${btn.n}</button>`
            ).join("");
            // delay para n√£o sobrepor outros modais
            setTimeout(() => showModal(`üì∞ EVENTO HIST√ìRICO: ${ev.t}`, `<span style="color:red;font-size:10px">‚òÖ ACONTECIMENTO REAL DE ${game.scenario}</span><br><br>${ev.d}`, btns), 500);
        }
    });
}

function executeHistoricalEvent(evIdx, btnIdx) {
    let events = historicalEvents[game.scenario] || [];
    if(events[evIdx]) {
        events[evIdx].b[btnIdx].f();
    }
    closeModal();
    updateUI();
}

function recordPollSnapshot() {
    let snap = {turn: game.turn, votes: {}};
    game.candidates.forEach(c => snap.votes[c.id] = c.votes);
    game.pollHistory.push(snap);
}

function showChart() {
    const modal = document.getElementById('chart-modal');
    modal.style.display = 'flex';
    const canvas = document.getElementById('poll-chart');
    const ctx = canvas.getContext('2d');
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    
    const W = canvas.width, H = canvas.height;
    const pad = 30;
    const maxT = Math.max(game.pollHistory.length - 1, 1);
    
    ctx.strokeStyle = '#333'; ctx.lineWidth = 1;
    // Grid lines
    [0,25,50,75,100].forEach(pct => {
        let y = H - pad - (pct/100)*(H - pad*2);
        ctx.beginPath(); ctx.moveTo(pad, y); ctx.lineTo(W-10, y);
        ctx.stroke();
        ctx.fillStyle = '#555'; ctx.font = '9px monospace';
        ctx.fillText(pct+'%', 2, y+3);
    });

    game.candidates.forEach(c => {
        let cd = candidatesData[c.id];
        ctx.strokeStyle = cd.color; ctx.lineWidth = 2;
        ctx.beginPath();
        game.pollHistory.forEach((snap, i) => {
            let x = pad + (i / maxT) * (W - pad - 10);
            let y = H - pad - (snap.votes[c.id]||0)/100 * (H - pad*2);
            i === 0 ? ctx.moveTo(x, y) : ctx.lineTo(x, y);
        });
        ctx.stroke();
    });

    // Legend
    const legend = document.getElementById('chart-legend');
    legend.innerHTML = game.candidates.map(c => 
        `<span style="color:${c.color}">‚ñ† ${c.name}: ${c.votes.toFixed(1)}%</span>`
    ).join('');
}

function getIdeologyDistance(id1, id2) {
    let a = candidatesData[id1], b = candidatesData[id2];
    return Math.abs((a.econ||0)-(b.econ||0)) + Math.abs((a.soc||0)-(b.soc||0)) + Math.abs((a.nat||0)-(b.nat||0));
}

function actionInvestigar() {
    if(game.points < 4) { log("Pontos insuficientes para investigar."); return; }
    game.points -= 4;
    let rivals = game.candidates.filter(c => c.id !== game.player);
    let target = rivals[Math.floor(Math.random() * rivals.length)];
    game.scandalLevels[target.id] = Math.min(10, (game.scandalLevels[target.id]||0) + 3);
    let dmg = game.scandalLevels[target.id] >= 5 ? 3 : 1.5;
    updateNationalVotes(target.id, -dmg);
    addNews(`ESC√ÇNDALO: ${target.name}`, `Investiga√ß√£o revela irregularidades na campanha de ${target.name}. N√≠vel de esc√¢ndalo: ${game.scandalLevels[target.id]}/10`);
    log(`Investiga√ß√£o exp√¥s ${target.name}! Esc√¢ndalo +3.`);
    if(game.scandalLevels[target.id] >= 8) {
        addNews(`CPI CONTRA ${target.name}`, `Congresso abre CPI para investigar candidato ap√≥s s√©rie de den√∫ncias!`);
    }
    updateUI();
}

function actionAbafar() {
    if(game.money < 15) { log("Verba insuficiente."); return; }
    let myScandal = game.scandalLevels[game.player]||0;
    if(myScandal === 0) { log("Nenhum esc√¢ndalo para abafar."); return; }
    game.money -= 15;
    let reduction = Math.min(myScandal, 3);
    game.scandalLevels[game.player] = myScandal - reduction;
    game.approvals[game.player].rej = Math.max(0, game.approvals[game.player].rej - 2);
    log(`Esc√¢ndalo abafado. N√≠vel reduzido para ${game.scandalLevels[game.player]}.`);
    updateUI();
}

// IA Estrat√©gica com alian√ßas coerentes
function aiStrategicTurn() {
    let sorted = [...game.candidates].sort((a,b) => b.votes - a.votes);
    let leader = sorted[0];
    game.candidates.forEach(c => {
        if(c.id === game.player) return;
        let gain = (Math.random() * 1.8) + (game.difficulty * 0.2);
        // IA ataca o l√≠der
        if(c.id !== leader.id && Math.random() > 0.6) {
            updateNationalVotes(leader.id, -1.5);
            gain += 0.5;
        }
        // IA no modo ca√≥tico √© mais agressiva
        if(game.mode === 'caotico') gain += Math.random() * 2;
        updateNationalVotes(c.id, gain);
        // Esc√¢ndalo penaliza IA
        if(game.scandalLevels[c.id] >= 5) {
            updateNationalVotes(c.id, -1.5);
        }
        // IA tenta fazer alian√ßa ideologicamente coerente (1 vez a cada ~4 turnos)
        if(Math.random() > 0.75 && game.availableParties.length > 0) {
            let cd = candidatesData[c.id];
            // Filtra partidos compat√≠veis com a ideologia da IA
            let compatible = game.availableParties.filter(p => {
                if(p.owner) return false;
                if(cd.side === 'E') return p.side === 'E' || p.side === 'C';
                if(cd.side === 'D') return p.side === 'D' || p.side === 'C';
                return true; // X ou qualquer side
            });
            if(compatible.length > 0) {
                let chosen = compatible[Math.floor(Math.random() * compatible.length)];
                chosen.owner = c.id;
                updateNationalVotes(c.id, 1.5);
                addNews(`ALIAN√áA: ${chosen.n} APOIA ${candidatesData[c.id].name}`, `O ${chosen.n} anuncia apoio formal √† candidatura de ${candidatesData[c.id].name}.`);
            }
        }
    });
}

// Atualiza aprova√ß√£o/rejei√ß√£o
function updateApprovalRejection() {
    game.candidates.forEach(c => {
        if(!game.approvals[c.id]) game.approvals[c.id] = {app:50, rej:30};
        let sorted = [...game.candidates].sort((a,b)=>b.votes-a.votes);
        let isLeader = sorted[0].id === c.id;
        // TV aumenta aprova√ß√£o do player
        game.approvals[c.id].app = Math.min(95, game.approvals[c.id].app + (isLeader ? 0.5 : 0));
        game.approvals[c.id].rej = Math.max(0, Math.min(95, game.approvals[c.id].rej + (isLeader ? 0.5 : -0.2)));
        // Esc√¢ndalos aumentam rejei√ß√£o
        if(game.scandalLevels[c.id] > 0) {
            game.approvals[c.id].rej = Math.min(95, game.approvals[c.id].rej + game.scandalLevels[c.id]*0.3);
        }
    });
}

// Checagem de momentum
function checkMomentum() {
    if(game.pollHistory.length < 3) return;
    let prev = game.pollHistory[game.pollHistory.length-3];
    let curr = game.pollHistory[game.pollHistory.length-1];
    game.candidates.forEach(c => {
        let delta = (curr.votes[c.id]||0) - (prev.votes[c.id]||0);
        if(!game.momentumTracker[c.id]) game.momentumTracker[c.id] = [];
        game.momentumTracker[c.id].push(delta);
        if(game.momentumTracker[c.id].length > 3) game.momentumTracker[c.id].shift();
        let totalDelta = game.momentumTracker[c.id].reduce((a,b)=>a+b,0);
        if(totalDelta > 5) {
            addNews(`ONDA DE ${candidatesData[c.id].name}`, `${candidatesData[c.id].name} cresce ${totalDelta.toFixed(1)}% em dois turnos! Analistas falam em fen√¥meno eleitoral.`);
            if(c.id === game.player) {
                updateNationalVotes(c.id, 1); // bonus momentum
                log(`üî• MOMENTUM! B√¥nus autom√°tico de +1% pela onda de crescimento.`);
            }
        }
    });
}

// Jornal din√¢mico
function generateDynamicNews() {
    let sorted = [...game.candidates].sort((a,b)=>b.votes-a.votes);
    let leader = sorted[0];
    let second = sorted[1];
    let playerC = game.candidates.find(c=>c.id===game.player);
    
    let headlines = [
        () => `${candidatesData[leader.id].name} LIDERA COM ${leader.votes.toFixed(1)}% DAS INTEN√á√ïES`,
        () => { 
            let diff = leader.votes - second.votes;
            return diff < 5 ? `DISPUTA ACIRRADA: APENAS ${diff.toFixed(1)}% SEPARA OS DOIS PRIMEIROS` : null;
        },
        () => {
            if(playerC && playerC.votes > 20 && playerC.id !== leader.id) return `CRESCIMENTO DE ${playerC.name} SURPREENDE ANALISTAS`;
            return null;
        },
        () => {
            let biggest = Object.entries(game.scandalLevels).sort((a,b)=>b[1]-a[1])[0];
            if(biggest && biggest[1] >= 5) return `CRISE NA CAMPANHA DE ${candidatesData[biggest[0]].name}`;
            return null;
        }
    ];
    headlines.forEach(fn => {
        let h = fn();
        if(h && Math.random() > 0.4) addNews(h, `Relat√≥rio especial da Folha de S. Pol√≠tica ‚Äî Turno ${game.turn}.`);
    });
}

function renderApprovalBars() {
    const div = document.getElementById('approval-bars');
    if(!div) return;
    div.innerHTML = game.candidates.map(c => {
        let ap = game.approvals[c.id]||{app:50,rej:30};
        let scandal = game.scandalLevels[c.id]||0;
        let scanHtml = scandal > 0 ? `<span style="color:red;font-size:9px"> üí•${scandal}</span>` : '';
        return `<div class="approval-row"><span style="color:${c.color};width:40px;display:inline-block;font-size:9px">${c.name}</span>
            <span style="color:green">‚úì</span><div class="mini-bar"><div class="approve-fill" style="width:${Math.min(100,ap.app)}%"></div></div>
            <span style="color:red">‚úó</span><div class="mini-bar"><div class="reject-fill" style="width:${Math.min(100,ap.rej)}%"></div></div>${scanHtml}</div>`;
    }).join('');
}

// Votos do 2¬∫ turno com migra√ß√£o ideol√≥gica
function applyIdeologicalMigration() {
    if(game.fase !== 2 || !game.defeatedCandidates) return;
    game.defeatedCandidates.forEach(dc => {
        let dcData = candidatesData[dc.id];
        let candidates2 = game.candidates;
        if(candidates2.length < 2) return;
        let distA = getIdeologyDistance(dc.id, candidates2[0].id);
        let distB = getIdeologyDistance(dc.id, candidates2[1].id);
        // Eleitores migram para candidato mais pr√≥ximo ideologicamente
        let migBonus = 2;
        if(distA < distB) {
            updateNationalVotes(candidates2[0].id, migBonus);
        } else if(distB < distA) {
            updateNationalVotes(candidates2[1].id, migBonus);
        }
    });
}

// Gera congresso simulado
function generateCongress(winner) {
    let seats = {[winner.id]: 50};
    game.coalition.forEach((partyName, i) => {
        seats[winner.id] = (seats[winner.id]||0) + 5;
    });
    game.candidates.filter(c=>c.id!==winner.id).forEach(c => {
        seats[c.id] = Math.max(5, Math.round(c.votes * 1.2));
    });
    // Ajusta total
    let total = Object.values(seats).reduce((a,b)=>a+b,0);
    Object.keys(seats).forEach(k => seats[k] = Math.round(seats[k]/total*513));
    game.congressSeats = seats;
    
    const barsDiv = document.getElementById('congress-bars');
    if(!barsDiv) return;
    barsDiv.innerHTML = '<b>C√ÇMARA DOS DEPUTADOS (513 cadeiras)</b>';
    let bar = document.createElement('div');
    bar.className = 'congress-bar';
    Object.entries(seats).forEach(([id, n]) => {
        let seg = document.createElement('div');
        seg.className = 'congress-segment';
        seg.style.width = (n/513*100)+'%';
        seg.style.background = candidatesData[id] ? candidatesData[id].color : '#888';
        seg.title = `${candidatesData[id]?candidatesData[id].name:id}: ${n} cadeiras`;
        seg.innerText = n > 30 ? n : '';
        bar.appendChild(seg);
    });
    barsDiv.appendChild(bar);
    
    let wSeats = seats[winner.id]||0;
    let govDiv = document.getElementById('congress-gov');
    if(govDiv) {
        let govText = wSeats >= 257 ? '‚úÖ MAIORIA ABSOLUTA - Governabilidade garantida!' 
                    : wSeats >= 180 ? '‚ö†Ô∏è MINORIA RELATIVA - Negocia√ß√£o necess√°ria.'
                    : '‚ùå MINORIA FRACA - Crise de governabilidade prevista!';
        govDiv.innerHTML = `<b>${candidatesData[winner.id].name}:</b> ${wSeats} cadeiras. ${govText}`;
    }
}

function generateFinalRanking(winner, context) {
    let isPlayer = winner.id === game.player;
    if(!isPlayer) { document.getElementById('ranking-content').innerHTML = ''; return; }
    let statesWon = allStates.filter(s => {
        let v = Object.entries(game.stateVotes[s.id]).sort((a,b)=>b[1]-a[1]);
        return v[0][0] === game.player;
    }).length;
    let turnBonus = Math.max(0, 16 - game.turn);
    let coaBonus = game.coalition.length * 5;
    let stateBonus = statesWon * 2;
    let modeBonus = game.mode === 'caotico' ? 20 : 0;
    let diffBonus = game.difficulty * 10;
    let total = turnBonus + coaBonus + stateBonus + modeBonus + diffBonus;
    let rank = total >= 80 ? 'Estrategista Supremo üèÜ' : total >= 60 ? 'Pol√≠tico Habilidoso ‚≠ê' : total >= 40 ? 'Candidato Competente üëç' : 'Democrata Iniciante üìã';
    let fase = game.fase === 1 && winner.votes > 50 ? '1¬∫ Turno' : '2¬∫ Turno';
    document.getElementById('ranking-content').innerHTML = `
        <div class="rank-item">üó∫Ô∏è <b>Estados conquistados:</b> ${statesWon}/27</div>
        <div class="rank-item">üèÖ <b>Vit√≥ria no:</b> ${fase}</div>
        <div class="rank-item">ü§ù <b>Partidos na coliga√ß√£o:</b> ${game.coalition.length}</div>
        <div class="rank-item">‚ö° <b>Turnos restantes:</b> ${Math.max(0, 15-game.turn)}</div>
        <div class="rank-item">üéØ <b>Modo:</b> ${game.mode === 'caotico' ? 'Ca√≥tico (+20)' : 'Hist√≥rico'}</div>
        <div class="rank-item">üíØ <b>Pontua√ß√£o:</b> ${total}</div>
        <div style="margin-top:10px;font-size:18px;font-weight:bold;color:#000080">Classifica√ß√£o: ${rank}</div>
    `;
}

function updateUI() {
    document.getElementById("turn-display").innerText = game.turn;
    let tmx = document.getElementById("turn-max-display");
    if(tmx) tmx.innerText = game.fase === 2 ? 3 : 15;
    document.getElementById("money-display").innerText = game.money;
    document.getElementById("points-display").innerText = game.points;
    document.getElementById("energy-display").innerText = game.energy;
    
    // Fatigue bar pointer
    let ptr = document.getElementById("fatigue-ptr");
    let lbl = document.getElementById("fatigue-label");
    if(ptr) ptr.style.left = (100 - game.energy) + '%';
    if(lbl) lbl.innerText = game.energy + '%';

    let table = document.getElementById("polling-body");
    table.innerHTML = "<tr><th>Candidato</th><th>%</th><th>Œî</th></tr>";
    
    [...game.candidates].sort((a,b)=>b.votes-a.votes).forEach(c => {
        let r = table.insertRow(); if(c.id === game.player) r.className = "player-row";
        let prevSnap = game.pollHistory.length > 1 ? game.pollHistory[game.pollHistory.length-2] : null;
        let delta = prevSnap ? (c.votes - (prevSnap.votes[c.id]||c.votes)).toFixed(1) : '‚Äî';
        let deltaColor = delta > 0 ? 'green' : delta < 0 ? 'red' : '#888';
        let deltaStr = delta !== '‚Äî' ? `<span style="color:${deltaColor}">${delta>0?'+':''}${delta}</span>` : '‚Äî';
        let scandal = game.scandalLevels[c.id]||0;
        let scanIcon = scandal >= 5 ? ' üí•' : scandal > 0 ? ' ‚ö†Ô∏è' : '';
        r.innerHTML = `<td><span style="color:${c.color}">‚ñ†</span> ${c.name}${scanIcon}</td><td>${c.votes.toFixed(1)}%</td><td>${deltaStr}</td>`;
    });

    if(game.isGovernor) {
        updateGovernorMap();
    } else if(game.isRepVelha && scenariosData[game.scenario]) {
        updateRegionalMap(scenariosData[game.scenario].regions);
    } else if(game.isElectoralCollege && internationalData[game.scenario]) {
        updateECMapColors(internationalData[game.scenario]);
    } else if(!game.isElectoralCollege && internationalData[game.scenario] && internationalData[game.scenario].regions) {
        updateRegionalMap(internationalData[game.scenario].regions);
    } else {
        allStates.forEach(s => {
            let votesArr = Object.entries(game.stateVotes[s.id]||{}).sort((a,b)=>b[1]-a[1]);
            if(votesArr.length > 0) {
                let leaderId = votesArr[0][0];
                let node = document.getElementById("node-"+s.id);
                if(node && candidatesData[leaderId]) {
                    node.style.backgroundColor = candidatesData[leaderId].color;
                    node.style.border = isPivotState(s.id) ? '2px solid var(--gold)' : '1px solid black';
                    node.style.width = isPivotState(s.id) ? '26px' : '22px';
                }
            }
        });
    }

    renderApprovalBars();
}
function log(m) { document.getElementById("terminal-log").innerHTML = `> ${m}<br>` + document.getElementById("terminal-log").innerHTML; }
function showModal(t, d, b) { document.getElementById("modal-overlay").style.display="flex"; document.getElementById("modal-title").innerText=t; document.getElementById("modal-text").innerHTML=d; document.getElementById("modal-buttons").innerHTML=b; }
function closeModal() { document.getElementById("modal-overlay").style.display="none"; }
// === MODO ESPECTADOR ===
let spectatorMode = false;

function toggleSpectatorMode(enabled) {
    spectatorMode = enabled;
    log(enabled ? 'üé≠ Modo Espectador ATIVADO ‚Äî eventos ser√£o ignorados.' : 'üé≠ Modo Espectador desativado.');
}

function autoSimulateAll() {
    let maxT = game.fase === 2 ? 3 : 15;
    let remaining = maxT - game.turn;
    if(remaining <= 0) { log('Jogo j√° encerrado.'); return; }
    let i = 0;
    function step() {
        if(i++ >= remaining) return;
        game.turn++;
        aiStrategicTurn();
        updateApprovalRejection();
        updateStateVotesRealTime();
        checkHistoricalEvents();
        recordPollSnapshot();
        checkMomentum();
        generateDynamicNews();
        updateUI();
        let maxTNow = game.fase === 2 ? 3 : 15;
        if(game.turn > maxTNow) { processElection(); return; }
        setTimeout(step, 150);
    }
    step();
}

// ============================================================
// SISTEMA DE ELEI√á√ÉO INDIRETA
// ============================================================
let indirectGame = {
    scenario: null, player: null, turn: 1, maxTurns: 10,
    points: 5, candidates: {}, factions: [], news: [],
    firedEvents: [], totalVotes: 0
};

function startIndirectGame(key) {
    const sc = scenariosData[key];
    indirectGame.scenario = key;
    indirectGame.turn = 1;
    indirectGame.maxTurns = 10;
    indirectGame.points = 5;
    indirectGame.news = [];
    indirectGame.firedEvents = [];
    indirectGame.totalVotes = sc.totalVotes;
    indirectGame.candidates = JSON.parse(JSON.stringify(sc.candidates));
    indirectGame.factions = JSON.parse(JSON.stringify(sc.factions));

    // Show candidate selection modal
    let html = `<div style="font-size:11px;color:#8b4513;margin-bottom:8px">${sc.context}</div><hr>
        <b>Escolha seu candidato:</b><br><br>`;
    html += Object.entries(sc.candidates).map(([id, c]) =>
        `<button class="btn" style="background:${c.color};color:white;margin-bottom:6px" onclick="confirmIndirectPlayer('${key}','${id}')">
            <b>${c.name}</b> (${c.party})<br><small>${c.ideologia}</small>
        </button>`
    ).join('');
    html += `<button class="btn" onclick="closeModal();goToScenarios()">‚Üê Voltar</button>`;
    showModal(`üèõÔ∏è ${sc.title}`, html, '');
}

function confirmIndirectPlayer(key, playerId) {
    closeModal();
    indirectGame.player = playerId;
    document.getElementById("scenario-screen").classList.remove("active");
    document.getElementById("indirect-screen").classList.add("active");
    
    const sc = scenariosData[key];
    document.getElementById("indirect-title-text").textContent = `üèõÔ∏è COL√âGIO ELEITORAL ‚Äî ${sc.year} | ${sc.title.toUpperCase()}`;
    document.getElementById("indirect-context").textContent = sc.context;
    
    indirectAddNews(`SESS√ÉO INAUGURADA`, `O processo de escolha do presidente come√ßa. ${sc.context.substring(0,80)}...`);
    renderIndirectActions();
    renderFactions();
    renderIndirectScoreboard();
    drawHemicycle();
    document.getElementById("ind-turn").textContent = indirectGame.turn;
    document.getElementById("ind-points").textContent = indirectGame.points;
}

function indirectAddNews(t, d) {
    indirectGame.news.unshift(`<div style="border-bottom:1px solid #333;padding:4px 0"><b style="color:#f4d03f">${t}</b><br><span>${d}</span></div>`);
    if(indirectGame.news.length > 10) indirectGame.news.pop();
    const div = document.getElementById("indirect-news");
    if(div) div.innerHTML = indirectGame.news.join('');
}

function indirectLog(m) {
    const div = document.getElementById("indirect-log");
    if(div) div.innerHTML = `> ${m}<br>` + div.innerHTML;
}

function indirectShiftVotes(candidateId, amount) {
    // Shift from largest opponent to this candidate
    if(!indirectGame.candidates[candidateId]) return;
    let others = Object.entries(indirectGame.candidates).filter(([id]) => id !== candidateId);
    others.sort((a,b) => b[1].start - a[1].start);
    let transferred = 0;
    others.forEach(([id, c]) => {
        let take = Math.min(amount - transferred, Math.floor(c.start * 0.15));
        if(take > 0 && transferred < amount) {
            c.start -= take;
            transferred += take;
        }
    });
    indirectGame.candidates[candidateId].start += transferred;
    renderIndirectScoreboard();
    drawHemicycle();
}

function indirectShiftFaction(factionName, amount, candidateId) {
    let faction = indirectGame.factions.find(f => f.name === factionName);
    if(!faction) return;
    faction.leans = candidateId;
    // Recalculate candidate vote totals from factions
    Object.keys(indirectGame.candidates).forEach(id => {
        indirectGame.candidates[id].start = 0;
    });
    indirectGame.factions.forEach(f => {
        if(f.leans && indirectGame.candidates[f.leans]) {
            indirectGame.candidates[f.leans].start += f.votes;
        }
    });
    // distribute undecided proportionally
    renderIndirectScoreboard();
    drawHemicycle();
}

function renderIndirectActions() {
    const sc = scenariosData[indirectGame.scenario];
    const player = indirectGame.player;
    const playerName = indirectGame.candidates[player].name;
    const actionsDiv = document.getElementById("indirect-actions");

    const actions = [
        {
            label:"üí¨ Discurso no Plen√°rio (2p)",
            desc:"Galvanize o Congresso com um discurso hist√≥rico.",
            cost:2,
            exec: () => {
                let gain = 5 + Math.floor(Math.random()*8);
                indirectShiftVotes(player, gain);
                indirectAddNews("DISCURSO HIST√ìRICO", `${playerName} discursou com vigor. Deputados indecisos se impressionaram.`);
                indirectLog(`Discurso rendeu +${gain} votos no plen√°rio.`);
            }
        },
        {
            label:"ü§ù Articula√ß√£o com Bancada (3p)",
            desc:"Negocie votos com uma fac√ß√£o indecisa ou rival.",
            cost:3,
            exec: () => {
                let faction = indirectGame.factions.find(f => !f.leans || f.leans !== player);
                if(faction) {
                    let gain = Math.floor(faction.votes * 0.25);
                    indirectShiftVotes(player, gain);
                    indirectAddNews("ARTICULA√á√ÉO POL√çTICA", `Negocia√ß√£o com "${faction.name}" rendeu ${gain} votos.`);
                    indirectLog(`Articula√ß√£o com "${faction.name}": +${gain} votos.`);
                }
            }
        },
        {
            label:"üì∞ Manifesto P√∫blico (1p)",
            desc:"Pressione o Congresso pela opini√£o p√∫blica.",
            cost:1,
            exec: () => {
                let gain = 2 + Math.floor(Math.random()*4);
                indirectShiftVotes(player, gain);
                indirectAddNews("MANIFESTO", `${playerName} lan√ßa manifesto que repercute na sociedade civil.`);
                indirectLog(`Manifesto: +${gain} votos de simpatizantes.`);
            }
        },
        {
            label:"üîç Investigar Rival (2p)",
            desc:"Exponha fraquezas do advers√°rio no Congresso.",
            cost:2,
            exec: () => {
                let rivals = Object.entries(indirectGame.candidates).filter(([id]) => id !== player);
                rivals.sort((a,b) => b[1].start - a[1].start);
                if(rivals.length > 0) {
                    let [rid, rc] = rivals[0];
                    let dmg = 4 + Math.floor(Math.random()*6);
                    indirectShiftVotes(player, dmg);
                    rc.start = Math.max(0, rc.start - Math.floor(dmg/2));
                    indirectAddNews("DEN√öNCIA", `Campanha de ${playerName} exp√µe contradi√ß√µes de ${rc.name}.`);
                    indirectLog(`Investiga√ß√£o: ${rc.name} perde votos, voc√™ ganha.`);
                }
            }
        },
        {
            label:"üèõÔ∏è Alian√ßa Regional (3p)",
            desc:"Conquiste bancadas estaduais com promessas de cargo.",
            cost:3,
            exec: () => {
                let gain = 8 + Math.floor(Math.random()*10);
                indirectShiftVotes(player, gain);
                indirectAddNews("ALIAN√áA REGIONAL", `Bancadas do Norte e Nordeste se comprometem com ${playerName}.`);
                indirectLog(`Alian√ßa regional firmada: +${gain} votos.`);
            }
        }
    ];

    actionsDiv.innerHTML = actions.map((a, i) =>
        `<button class="indirect-action" onclick="executeIndirectAction(${i})" ${indirectGame.points < a.cost ? 'disabled style="opacity:0.5"':''}>
            ${a.label}<br><small style="color:#cc9">${a.desc}</small>
        </button>`
    ).join('');
    window._indirectActions = actions;
}

function executeIndirectAction(i) {
    const action = window._indirectActions[i];
    if(indirectGame.points < action.cost) { indirectLog("Influ√™ncia insuficiente!"); return; }
    indirectGame.points -= action.cost;
    action.exec();
    document.getElementById("ind-points").textContent = indirectGame.points;
    renderFactions();
    renderIndirectActions();
}

function renderIndirectScoreboard() {
    const div = document.getElementById("indirect-scoreboard");
    if(!div) return;
    const total = indirectGame.totalVotes;
    const majority = Math.floor(total/2) + 1;
    const sorted = Object.entries(indirectGame.candidates).sort((a,b) => b[1].start - a[1].start);

    div.innerHTML = `<div style="text-align:center;font-size:10px;color:#888;margin-bottom:6px">
        Total: <b style="color:#f4d03f">${total}</b> votos &nbsp;|&nbsp; Maioria: <b style="color:#f4d03f">${majority}</b>
    </div>` + sorted.map(([id, c]) => {
        let votes = Math.round(c.start);
        let pct = Math.min(100, Math.round(votes / total * 100));
        let majPct = majority / total * 100;
        let isPlayer = id === indirectGame.player;
        let hasMajority = votes >= majority;
        return `<div style="margin:5px 0;padding:3px;background:${isPlayer?'rgba(244,208,63,0.08)':'transparent'};border-radius:3px;">
            <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:3px;">
                <span style="font-size:11px;font-weight:bold;color:${isPlayer?'#f4d03f':c.color}">${isPlayer?'‚ñ∂ ':''} ${c.name} <small style="color:#888;font-weight:normal">(${c.party})</small></span>
                <span style="font-family:monospace;font-size:11px;color:${hasMajority?'#44ff44':'#ccc'}">${votes} / ${total} ${hasMajority?'‚úì':''}</span>
            </div>
            <div style="height:14px;background:#111;border:1px solid #333;border-radius:2px;position:relative;overflow:hidden;">
                <div style="height:100%;background:${c.color};width:${pct}%;transition:width 0.5s ease;"></div>
                <div style="position:absolute;top:0;left:${majPct}%;width:2px;height:100%;background:#f4d03f;opacity:0.8;"></div>
                <span style="position:absolute;top:1px;left:4px;font-size:9px;color:white;font-weight:bold;text-shadow:1px 1px 2px black;">${pct}%</span>
            </div>
        </div>`;
    }).join('');
}

// Spectator mode for indirect elections
let indirectSpectatorMode = false;

function indirectAutoSimulate() {
    let remaining = indirectGame.maxTurns - indirectGame.turn;
    if(remaining <= 0) { finishIndirectGame(); return; }
    indirectSpectatorMode = true;
    if(document.getElementById('indirect-spectator')) document.getElementById('indirect-spectator').checked = true;
    let step = () => {
        if(indirectGame.turn >= indirectGame.maxTurns) { finishIndirectGame(); return; }
        indirectNextTurn();
        setTimeout(step, 200);
    };
    step();
}

function renderFactions() {
    const div = document.getElementById("faction-list");
    if(!div) return;
    div.innerHTML = indirectGame.factions.map(f => {
        let lean = f.leans ? indirectGame.candidates[f.leans] : null;
        let leanColor = lean ? lean.color : '#888';
        return `<div style="margin-bottom:8px;border:1px solid #333;padding:5px;border-radius:2px">
            <div style="font-weight:bold;font-size:10px;color:#f4d03f">${f.name}</div>
            <div style="font-size:9px;color:#999;margin:2px 0">${f.desc}</div>
            <div style="display:flex;align-items:center;gap:4px;margin-top:3px">
                <span style="background:${leanColor};color:white;padding:1px 4px;font-size:9px;border-radius:2px">${lean ? lean.name : 'Indeciso'}</span>
                <span style="color:#aaa;font-size:9px">${f.votes} votos</span>
            </div>
        </div>`;
    }).join('');
}

function drawHemicycle() {
    const canvas = document.getElementById("hemicycle-canvas");
    if(!canvas) return;
    const ctx = canvas.getContext("2d");
    const W = canvas.width, H = canvas.height;
    ctx.clearRect(0, 0, W, H);
    ctx.fillStyle = "#0d0d1a";
    ctx.fillRect(0, 0, W, H);

    const total = indirectGame.totalVotes;
    const sorted = Object.entries(indirectGame.candidates).sort((a,b) => b[1].start - a[1].start);

    // Build ordered seat color array (grouped by candidate, not shuffled, for clear visual)
    let seats = [];
    sorted.forEach(([id, c]) => {
        let count = Math.max(0, Math.round(c.start));
        for(let i = 0; i < count; i++) seats.push(c.color);
    });
    // Ensure length matches total
    while(seats.length < total) seats.push('#333');
    if(seats.length > total) seats = seats.slice(0, total);

    // Hemicycle layout: rows from outer to inner
    const cx = W / 2;
    const cy = H - 8;
    const dotR = 4;
    const gap = 2;
    const dotStep = dotR * 2 + gap;

    // Calculate how many dots per row based on arc length
    let rowConfigs = [];
    let totalSlots = 0;
    const numRows = 9;
    for(let row = 0; row < numRows; row++) {
        let radius = 55 + row * (dotStep + 1);
        let arcLen = Math.PI * radius;
        let count = Math.floor(arcLen / dotStep);
        count = Math.max(8, Math.min(count, 70));
        rowConfigs.push({radius, count});
        totalSlots += count;
    }

    // If total seats > totalSlots, scale down
    // Distribute seats proportionally across rows
    let seatIdx = 0;

    for(let row = 0; row < numRows; row++) {
        const {radius, count} = rowConfigs[row];
        for(let s = 0; s < count; s++) {
            if(seatIdx >= seats.length) break;
            // angle from PI (left) to 0 (right), evenly distributed
            let angle = Math.PI - (s / (count - 1 || 1)) * Math.PI;
            let x = cx + radius * Math.cos(angle);
            let y = cy + radius * Math.sin(angle);
            ctx.beginPath();
            ctx.arc(x, y, dotR, 0, Math.PI * 2);
            ctx.fillStyle = seats[seatIdx];
            ctx.fill();
            // subtle outline
            ctx.strokeStyle = 'rgba(0,0,0,0.4)';
            ctx.lineWidth = 0.5;
            ctx.stroke();
            seatIdx++;
        }
        if(seatIdx >= seats.length) break;
    }

    // Majority line
    const majority = Math.floor(total / 2) + 1;
    let majIdx = majority;
    // Draw a vertical line at the center as majority indicator
    ctx.strokeStyle = '#f4d03f';
    ctx.lineWidth = 2;
    ctx.setLineDash([4, 3]);
    ctx.beginPath();
    ctx.moveTo(cx, cy - 10);
    ctx.lineTo(cx, cy - 160);
    ctx.stroke();
    ctx.setLineDash([]);

    // Labels at bottom
    ctx.font = 'bold 10px monospace';
    ctx.fillStyle = '#f4d03f';
    ctx.textAlign = 'center';
    ctx.fillText(`Maioria: ${majority}`, cx, cy - 2);

    // Candidate legend inside canvas (bottom corners)
    let lx = 6, ly = 12;
    ctx.textAlign = 'left';
    sorted.forEach(([id, c]) => {
        ctx.fillStyle = c.color;
        ctx.fillRect(lx, ly - 9, 10, 10);
        ctx.fillStyle = '#ddd';
        ctx.font = '9px monospace';
        ctx.fillText(`${c.name}: ${Math.round(c.start)}`, lx + 13, ly);
        ly += 13;
        if(ly > H - 15) { ly = 12; lx += 130; }
    });
}

function indirectNextTurn() {
    if(indirectGame.turn >= indirectGame.maxTurns) {
        finishIndirectGame();
        return;
    }
    indirectGame.turn++;
    document.getElementById("ind-turn").textContent = indirectGame.turn;

    // Earn points
    indirectGame.points += 3;
    document.getElementById("ind-points").textContent = indirectGame.points;

    // AI moves
    Object.entries(indirectGame.candidates).forEach(([id, c]) => {
        if(id !== indirectGame.player) {
            let gain = 2 + Math.floor(Math.random()*4);
            indirectShiftVotes(id, gain);
        }
    });

    // Check historical events (skip if spectator mode)
    if(!indirectSpectatorMode) {
        const sc = scenariosData[indirectGame.scenario];
        if(sc.events) {
            sc.events.forEach((ev, idx) => {
                if(ev.turn === indirectGame.turn && !indirectGame.firedEvents.includes(idx)) {
                    indirectGame.firedEvents.push(idx);
                    let btns = ev.b.map((btn, bi) =>
                        `<button class="btn" onclick="executeIndirectEvent('${indirectGame.scenario}',${idx},${bi})">${btn.n}</button>`
                    ).join('');
                    setTimeout(() => showModal(`üì∞ EVENTO: ${ev.t}`, `<span style="color:red;font-size:10px">‚òÖ ACONTECIMENTO REAL</span><br><br>${ev.d}`, btns), 300);
                }
            });
        }
    }

    indirectAddNews(`RODADA ${indirectGame.turn}`, `Articula√ß√µes continuam no Congresso. Fac√ß√µes se movem.`);
    renderFactions();
    renderIndirectScoreboard();
    renderIndirectActions();
    drawHemicycle();

    if(indirectGame.turn >= indirectGame.maxTurns) {
        setTimeout(finishIndirectGame, 500);
    }
}

function executeIndirectEvent(scenarioKey, evIdx, btnIdx) {
    const sc = scenariosData[scenarioKey];
    if(sc.events && sc.events[evIdx]) {
        sc.events[evIdx].b[btnIdx].f();
    }
    closeModal();
    renderIndirectScoreboard();
    drawHemicycle();
    renderFactions();
}

function finishIndirectGame() {
    const sorted = Object.entries(indirectGame.candidates).sort((a,b) => b[1].start - a[1].start);
    const winner = sorted[0];
    const winnerId = winner[0];
    const winnerData = winner[1];
    const total = indirectGame.totalVotes;
    const majority = Math.floor(total/2) + 1;
    const isPlayer = winnerId === indirectGame.player;
    const sc = scenariosData[indirectGame.scenario];

    document.getElementById("indirect-screen").classList.remove("active");
    document.getElementById("end-screen").classList.add("active");
    
    document.getElementById("result-title").textContent = isPlayer ? `üèÜ VIT√ìRIA NO COL√âGIO ELEITORAL!` : `üèõÔ∏è RESULTADO DO COL√âGIO ELEITORAL`;
    document.getElementById("result-desc").innerHTML = `
        <b>${winnerData.name} (${winnerData.party})</b> √© eleito Presidente da Rep√∫blica com <b>${winnerData.start} votos</b> de ${total} (${Math.round(winnerData.start/total*100)}%).<br>
        <small>Maioria necess√°ria: ${majority} votos | Elei√ß√£o indireta de ${sc.year}</small>`;
    document.getElementById("candidate-bio").innerHTML = `
        <p><b>BRAS√çLIA, ${sc.year}</b> ‚Äî Em sess√£o solene do Col√©gio Eleitoral, ${winnerData.name} √© eleito presidente.</p>
        <p>${winnerData.bio}</p>
        ${isPlayer ? '<p><i>Voc√™ articulou com maestria o processo indiretamente democr√°tico do Brasil.</i></p>' : '<p><i>Seu candidato n√£o foi eleito desta vez. A hist√≥ria tem seus caminhos...</i></p>'}`;
    
    // Hemicycle-style result bar
    document.getElementById("congress-bars").innerHTML = `<b>RESULTADO DO COL√âGIO ELEITORAL</b>`;
    let bar = document.createElement('div');
    bar.className = 'congress-bar';
    bar.style.height = '30px';
    sorted.forEach(([id, c]) => {
        let pct = c.start / total * 100;
        let seg = document.createElement('div');
        seg.className = 'congress-segment';
        seg.style.width = pct + '%';
        seg.style.background = c.color;
        seg.title = `${c.name}: ${c.start} votos (${Math.round(pct)}%)`;
        seg.textContent = c.start > 20 ? `${c.name}: ${c.start}` : '';
        bar.appendChild(seg);
    });
    document.getElementById("congress-bars").appendChild(bar);
    document.getElementById("congress-gov").innerHTML = `<b>${winnerData.name}</b>: ${winnerData.start} votos. ${winnerData.start >= majority ? '‚úÖ Maioria obtida.' : '‚ùå Sem maioria ‚Äî elei√ß√£o contestada!'}`;
    document.getElementById("ranking-content").innerHTML = `
        <div class="rank-item">${isPlayer?'üèÜ':'‚ùå'} <b>${isPlayer?'Vit√≥ria':'Derrota'} no Col√©gio Eleitoral</b></div>
        <div class="rank-item">üó≥Ô∏è <b>Votos obtidos:</b> ${indirectGame.candidates[indirectGame.player].start} / ${total}</div>
        <div class="rank-item">üèõÔ∏è <b>Per√≠odo:</b> ${sc.year} ‚Äî Elei√ß√£o Indireta</div>`;
}


// === CONTE√öDO PLANEJADO ===
function showPlannedContent() {
    let html = `<div style="max-height:420px;overflow-y:auto;font-size:12px;">
        <b>üîÆ CONTE√öDO PLANEJADO</b><hr>
        <b>‚úÖ PRESIDENCIAIS DISPON√çVEIS</b>
        <div style="background:#e8ffe8;padding:6px;margin:4px 0;border-left:3px solid #006600;font-size:11px;">
            1938 (sim.) ‚úÖ | 1945 ‚úÖ | 1950 ‚úÖ | 1955 ‚úÖ | 1960 ‚úÖ | 1965 (sim.) ‚úÖ<br>
            1989 ‚úÖ | 1994 ‚úÖ | 1998 ‚úÖ | 2002 ‚úÖ | 2006 ‚úÖ | 2010 ‚úÖ | 2014 ‚úÖ | 2018 ‚úÖ | 2022 ‚úÖ | 2026 ‚úÖ
        </div>
        <b>‚úÖ INDIRETAS DISPON√çVEIS</b>
        <div style="background:#e8ffe8;padding:6px;margin:4px 0;border-left:3px solid #006600;font-size:11px;">
            1934 ‚úÖ | 1964 ‚úÖ | 1974 ‚úÖ | 1978 ‚úÖ | 1985 ‚úÖ
        </div>
        <b>‚úÖ ELEI√á√ïES ESTADUAIS DISPON√çVEIS</b>
        <div style="background:#e8ffe8;padding:6px;margin:4px 0;border-left:3px solid #006600;font-size:11px;">
            MG 2022 ‚úÖ | SP 2022 ‚úÖ
        </div>
        <b>üîí ESTADUAIS PLANEJADAS (1982-2022)</b>
        <div style="background:#f0f0f0;padding:6px;margin:4px 0;border-left:3px solid #888;font-size:11px;">
            SP: 1982, 1986, 1990, 1994, 1998, 2002, 2006, 2010, 2014, 2018<br>
            MG: 1982, 1986, 1990, 1994, 1998, 2002, 2006, 2010, 2014, 2018<br>
            RJ, RS, BA, PE, CE, PR, GO ‚Äî v√°rios anos<br>
            Total planejado: 50+ elei√ß√µes estaduais
        </div>
        <b>üîí SISTEMA DE MANDATO P√ìS-ELEI√á√ÉO</b>
        <div style="background:#e8e8ff;padding:6px;margin:4px 0;border-left:3px solid #000080;font-size:11px;">
            Gerir o mandato: aprova√ß√£o, crises, decis√µes pol√≠ticas, reelei√ß√£o.<br>
            <i>Em planejamento...</i>
        </div>
        <b>üèôÔ∏è PREFEITURAS DE CAPITAIS</b>
        <div style="background:#fff8e8;padding:6px;margin:4px 0;border-left:3px solid #886600;font-size:11px;">
            SP, RJ, BH, Salvador, Manaus, Fortaleza, Recife... <i>Em planejamento...</i>
        </div>
        <hr><small style="color:#666">Sugest√µes s√£o bem-vindas!</small>
    </div>`;
    showModal('üìã CONTE√öDO PLANEJADO', html, `<button class="btn" onclick="closeModal()">Fechar</button>`);
}

function showChangelog() {
    let html = `<div style="max-height:400px;overflow-y:auto;font-size:11px;">
    <div style="background:#000080;color:white;padding:6px;margin-bottom:8px;font-weight:bold;font-size:12px">
        üåé SIMULADOR ELEITORAL GLOBAL ‚Äî CHANGELOG
    </div>
    <div style="background:#ffffcc;border:1px solid #999;padding:6px;margin-bottom:6px;">
        <b>üÜï VERS√ÉO 9.0</b><br>
        <b style="color:#006600">‚úÖ 11 Elei√ß√µes da Rep√∫blica Velha</b> integradas √†s Presidenciais BR (1894, 1898, 1902, 1906, 1910, 1914, 1918, 1919, 1922, 1926, 1930) com candidatos e partidos corretos<br>
        <b style="color:#006600">‚úÖ Elei√ß√µes Russas 2024:</b> Putin, Kharitonov, Davankov, Slutsky<br>
        <b style="color:#006600">‚úÖ Aba Municipais:</b> SP 2024 em categoria pr√≥pria<br>
        <b style="color:#006600">‚úÖ EUA em portugu√™s:</b> todas as telas e bot√µes traduzidos<br>
        <b style="color:#006600">‚úÖ Redes Sociais criativas:</b> memes, perfis de f√£s, usu√°rios normais, contas de not√≠cia com personalidade<br>
        <b style="color:#006600">‚úÖ 23 Conquistas</b> (+11 novas: Rui Barbosa, Virada √âpica, Sem Rival, Camarada Putin, etc.)<br>
        <b style="color:#006600">‚úÖ Sem 2¬∫ turno</b> para TODAS elei√ß√µes 1894‚Äì1964<br>
        <b style="color:#006600">‚úÖ 1966 removido</b> do Em Desenvolvimento
    </div>
    <div style="background:#f0f0f0;border:1px solid #ccc;padding:6px;margin-bottom:6px;">
        <b>üì¶ v8.0</b> ‚Äî Rep√∫blica Velha separada | EUA 2024 com Col√©gio Eleitoral | Conquistas | A√ß√µes por era | Redes sociais
    </div>
    <div style="background:#f0f0f0;border:1px solid #ccc;padding:6px;margin-bottom:6px;">
        <b>üì¶ v7.0</b> ‚Äî Presidenciais hist√≥ricas: 1938-1965 | Governadores MG+SP | Hemiciclo | Tabs
    </div>
    <div style="background:#f0f0f0;border:1px solid #ccc;padding:6px;margin-bottom:6px;">
        <b>üì¶ v6.0</b> ‚Äî 5 indiretas jog√°veis | Hemiciclo | Fac√ß√µes | Mobile
    </div>
    <div style="background:#f0f0f0;border:1px solid #ccc;padding:6px;">
        <b>üì¶ v1-5</b> ‚Äî 1989 a 2026 | Debates | Esc√¢ndalos | Mapa | Congresso | Modo Ca√≥tico
    </div>
    </div>`;
    showModal('üìã CHANGELOG ‚Äî SIMULADOR ELEITORAL GLOBAL', html, `<button class="btn" onclick="closeModal()">Fechar</button>`);
}

init();
</script>
</body>
</html>
